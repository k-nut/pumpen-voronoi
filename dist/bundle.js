(()=>{var Ph=Object.create;var Tr=Object.defineProperty;var Lh=Object.getOwnPropertyDescriptor;var Eh=Object.getOwnPropertyNames;var Sh=Object.getPrototypeOf,bh=Object.prototype.hasOwnProperty;var Ch=m=>Tr(m,"__esModule",{value:!0});var ds=(m,J)=>()=>(J||m((J={exports:{}}).exports,J),J.exports);var Th=(m,J,nt)=>{if(J&&typeof J=="object"||typeof J=="function")for(let lt of Eh(J))!bh.call(m,lt)&&lt!=="default"&&Tr(m,lt,{get:()=>J[lt],enumerable:!(nt=Lh(J,lt))||nt.enumerable});return m},ps=m=>Th(Ch(Tr(m!=null?Ph(Sh(m)):{},"default",m&&m.__esModule&&"default"in m?{get:()=>m.default,enumerable:!0}:{value:m,enumerable:!0})),m);var _s=ds((Nh,ai)=>{(function(m,J,nt){var lt=m.L,u={};u.version="0.7.5",typeof ai=="object"&&typeof ai.exports=="object"?ai.exports=u:typeof define=="function"&&define.amd&&define(u),u.noConflict=function(){return m.L=lt,this},m.L=u,u.Util={extend:function(e){var o=Array.prototype.slice.call(arguments,1),h,_,y,S;for(_=0,y=o.length;_<y;_++){S=o[_]||{};for(h in S)S.hasOwnProperty(h)&&(e[h]=S[h])}return e},bind:function(e,o){var h=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return e.apply(o,h||arguments)}},stamp:function(){var e=0,o="_leaflet_id";return function(h){return h[o]=h[o]||++e,h[o]}}(),invokeEach:function(e,o,h){var _,y;if(typeof e=="object"){y=Array.prototype.slice.call(arguments,3);for(_ in e)o.apply(h,[_,e[_]].concat(y));return!0}return!1},limitExecByInterval:function(e,o,h){var _,y;return function S(){var T=arguments;if(_){y=!0;return}_=!0,setTimeout(function(){_=!1,y&&(S.apply(h,T),y=!1)},o),e.apply(h,T)}},falseFn:function(){return!1},formatNum:function(e,o){var h=Math.pow(10,o||5);return Math.round(e*h)/h},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},splitWords:function(e){return u.Util.trim(e).split(/\s+/)},setOptions:function(e,o){return e.options=u.extend({},e.options,o),e.options},getParamString:function(e,o,h){var _=[];for(var y in e)_.push(encodeURIComponent(h?y.toUpperCase():y)+"="+encodeURIComponent(e[y]));return(!o||o.indexOf("?")===-1?"?":"&")+_.join("&")},template:function(e,o){return e.replace(/\{ *([\w_]+) *\}/g,function(h,_){var y=o[_];if(y===nt)throw new Error("No value provided for variable "+h);return typeof y=="function"&&(y=y(o)),y})},isArray:Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(S){var T,U,O=["webkit","moz","o","ms"];for(T=0;T<O.length&&!U;T++)U=m[O[T]+S];return U}var o=0;function h(S){var T=+new Date,U=Math.max(0,16-(T-o));return o=T+U,m.setTimeout(S,U)}var _=m.requestAnimationFrame||e("RequestAnimationFrame")||h,y=m.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(S){m.clearTimeout(S)};u.Util.requestAnimFrame=function(S,T,U,O){if(S=u.bind(S,T),U&&_===h)S();else return _.call(m,S,O)},u.Util.cancelAnimFrame=function(S){S&&y.call(m,S)}}(),u.extend=u.Util.extend,u.bind=u.Util.bind,u.stamp=u.Util.stamp,u.setOptions=u.Util.setOptions,u.Class=function(){},u.Class.extend=function(e){var o=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},h=function(){};h.prototype=this.prototype;var _=new h;_.constructor=o,o.prototype=_;for(var y in this)this.hasOwnProperty(y)&&y!=="prototype"&&(o[y]=this[y]);e.statics&&(u.extend(o,e.statics),delete e.statics),e.includes&&(u.Util.extend.apply(null,[_].concat(e.includes)),delete e.includes),e.options&&_.options&&(e.options=u.extend({},_.options,e.options)),u.extend(_,e),_._initHooks=[];var S=this;return o.__super__=S.prototype,_.callInitHooks=function(){if(!this._initHooksCalled){S.prototype.callInitHooks&&S.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var T=0,U=_._initHooks.length;T<U;T++)_._initHooks[T].call(this)}},o},u.Class.include=function(e){u.extend(this.prototype,e)},u.Class.mergeOptions=function(e){u.extend(this.prototype.options,e)},u.Class.addInitHook=function(e){var o=Array.prototype.slice.call(arguments,1),h=typeof e=="function"?e:function(){this[e].apply(this,o)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h)};var ct="_leaflet_events";u.Mixin={},u.Mixin.Events={addEventListener:function(e,o,h){if(u.Util.invokeEach(e,this.addEventListener,this,o,h))return this;var _=this[ct]=this[ct]||{},y=h&&h!==this&&u.stamp(h),S,T,U,O,V,q,ot;for(e=u.Util.splitWords(e),S=0,T=e.length;S<T;S++)U={action:o,context:h||this},O=e[S],y?(V=O+"_idx",q=V+"_len",ot=_[V]=_[V]||{},ot[y]||(ot[y]=[],_[q]=(_[q]||0)+1),ot[y].push(U)):(_[O]=_[O]||[],_[O].push(U));return this},hasEventListeners:function(e){var o=this[ct];return!!o&&(e in o&&o[e].length>0||e+"_idx"in o&&o[e+"_idx_len"]>0)},removeEventListener:function(e,o,h){if(!this[ct])return this;if(!e)return this.clearAllEventListeners();if(u.Util.invokeEach(e,this.removeEventListener,this,o,h))return this;var _=this[ct],y=h&&h!==this&&u.stamp(h),S,T,U,O,V,q,ot,ht,ut;for(e=u.Util.splitWords(e),S=0,T=e.length;S<T;S++)if(U=e[S],q=U+"_idx",ot=q+"_len",ht=_[q],!o)delete _[U],delete _[q],delete _[ot];else if(O=y&&ht?ht[y]:_[U],O){for(V=O.length-1;V>=0;V--)O[V].action===o&&(!h||O[V].context===h)&&(ut=O.splice(V,1),ut[0].action=u.Util.falseFn);h&&ht&&O.length===0&&(delete ht[y],_[ot]--)}return this},clearAllEventListeners:function(){return delete this[ct],this},fireEvent:function(e,o){if(!this.hasEventListeners(e))return this;var h=u.Util.extend({},o,{type:e,target:this}),_=this[ct],y,S,T,U,O;if(_[e])for(y=_[e].slice(),S=0,T=y.length;S<T;S++)y[S].action.call(y[S].context,h);U=_[e+"_idx"];for(O in U)if(y=U[O].slice(),y)for(S=0,T=y.length;S<T;S++)y[S].action.call(y[S].context,h);return this},addOneTimeEventListener:function(e,o,h){if(u.Util.invokeEach(e,this.addOneTimeEventListener,this,o,h))return this;var _=u.bind(function(){this.removeEventListener(e,o,h).removeEventListener(e,_,h)},this);return this.addEventListener(e,o,h).addEventListener(e,_,h)}},u.Mixin.Events.on=u.Mixin.Events.addEventListener,u.Mixin.Events.off=u.Mixin.Events.removeEventListener,u.Mixin.Events.once=u.Mixin.Events.addOneTimeEventListener,u.Mixin.Events.fire=u.Mixin.Events.fireEvent,function(){var e="ActiveXObject"in m,o=e&&!J.addEventListener,h=navigator.userAgent.toLowerCase(),_=h.indexOf("webkit")!==-1,y=h.indexOf("chrome")!==-1,S=h.indexOf("phantom")!==-1,T=h.indexOf("android")!==-1,U=h.search("android [23]")!==-1,O=h.indexOf("gecko")!==-1,V=typeof orientation!=nt+"",q=!m.PointerEvent&&m.MSPointerEvent,ot=m.PointerEvent&&m.navigator.pointerEnabled&&m.navigator.maxTouchPoints||q,ht="devicePixelRatio"in m&&m.devicePixelRatio>1||"matchMedia"in m&&m.matchMedia("(min-resolution:144dpi)")&&m.matchMedia("(min-resolution:144dpi)").matches,ut=J.documentElement,zt=e&&"transition"in ut.style,bt="WebKitCSSMatrix"in m&&"m11"in new m.WebKitCSSMatrix&&!U,Mt="MozPerspective"in ut.style,Lt="OTransition"in ut.style,ee=!m.L_DISABLE_3D&&(zt||bt||Mt||Lt)&&!S,on=!m.L_NO_TOUCH&&!S&&(ot||"ontouchstart"in m||m.DocumentTouch&&J instanceof m.DocumentTouch);u.Browser={ie:e,ielt9:o,webkit:_,gecko:O&&!_&&!m.opera&&!e,android:T,android23:U,chrome:y,ie3d:zt,webkit3d:bt,gecko3d:Mt,opera3d:Lt,any3d:ee,mobile:V,mobileWebkit:V&&_,mobileWebkit3d:V&&bt,mobileOpera:V&&m.opera,touch:on,msPointer:q,pointer:ot,retina:ht}}(),u.Point=function(e,o,h){this.x=h?Math.round(e):e,this.y=h?Math.round(o):o},u.Point.prototype={clone:function(){return new u.Point(this.x,this.y)},add:function(e){return this.clone()._add(u.point(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(u.point(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(e){e=u.point(e);var o=e.x-this.x,h=e.y-this.y;return Math.sqrt(o*o+h*h)},equals:function(e){return e=u.point(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=u.point(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+u.Util.formatNum(this.x)+", "+u.Util.formatNum(this.y)+")"}},u.point=function(e,o,h){return e instanceof u.Point?e:u.Util.isArray(e)?new u.Point(e[0],e[1]):e===nt||e===null?e:new u.Point(e,o,h)},u.Bounds=function(e,o){if(!!e)for(var h=o?[e,o]:e,_=0,y=h.length;_<y;_++)this.extend(h[_])},u.Bounds.prototype={extend:function(e){return e=u.point(e),!this.min&&!this.max?(this.min=e.clone(),this.max=e.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(e.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(e.y,this.max.y)),this},getCenter:function(e){return new u.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new u.Point(this.min.x,this.max.y)},getTopRight:function(){return new u.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var o,h;return typeof e[0]=="number"||e instanceof u.Point?e=u.point(e):e=u.bounds(e),e instanceof u.Bounds?(o=e.min,h=e.max):o=h=e,o.x>=this.min.x&&h.x<=this.max.x&&o.y>=this.min.y&&h.y<=this.max.y},intersects:function(e){e=u.bounds(e);var o=this.min,h=this.max,_=e.min,y=e.max,S=y.x>=o.x&&_.x<=h.x,T=y.y>=o.y&&_.y<=h.y;return S&&T},isValid:function(){return!!(this.min&&this.max)}},u.bounds=function(e,o){return!e||e instanceof u.Bounds?e:new u.Bounds(e,o)},u.Transformation=function(e,o,h,_){this._a=e,this._b=o,this._c=h,this._d=_},u.Transformation.prototype={transform:function(e,o){return this._transform(e.clone(),o)},_transform:function(e,o){return o=o||1,e.x=o*(this._a*e.x+this._b),e.y=o*(this._c*e.y+this._d),e},untransform:function(e,o){return o=o||1,new u.Point((e.x/o-this._b)/this._a,(e.y/o-this._d)/this._c)}},u.DomUtil={get:function(e){return typeof e=="string"?J.getElementById(e):e},getStyle:function(e,o){var h=e.style[o];if(!h&&e.currentStyle&&(h=e.currentStyle[o]),(!h||h==="auto")&&J.defaultView){var _=J.defaultView.getComputedStyle(e,null);h=_?_[o]:null}return h==="auto"?null:h},getViewportOffset:function(e){var o=0,h=0,_=e,y=J.body,S=J.documentElement,T;do{if(o+=_.offsetTop||0,h+=_.offsetLeft||0,o+=parseInt(u.DomUtil.getStyle(_,"borderTopWidth"),10)||0,h+=parseInt(u.DomUtil.getStyle(_,"borderLeftWidth"),10)||0,T=u.DomUtil.getStyle(_,"position"),_.offsetParent===y&&T==="absolute")break;if(T==="fixed"){o+=y.scrollTop||S.scrollTop||0,h+=y.scrollLeft||S.scrollLeft||0;break}if(T==="relative"&&!_.offsetLeft){var U=u.DomUtil.getStyle(_,"width"),O=u.DomUtil.getStyle(_,"max-width"),V=_.getBoundingClientRect();(U!=="none"||O!=="none")&&(h+=V.left+_.clientLeft),o+=V.top+(y.scrollTop||S.scrollTop||0);break}_=_.offsetParent}while(_);_=e;do{if(_===y)break;o-=_.scrollTop||0,h-=_.scrollLeft||0,_=_.parentNode}while(_);return new u.Point(h,o)},documentIsLtr:function(){return u.DomUtil._docIsLtrCached||(u.DomUtil._docIsLtrCached=!0,u.DomUtil._docIsLtr=u.DomUtil.getStyle(J.body,"direction")==="ltr"),u.DomUtil._docIsLtr},create:function(e,o,h){var _=J.createElement(e);return _.className=o,h&&h.appendChild(_),_},hasClass:function(e,o){if(e.classList!==nt)return e.classList.contains(o);var h=u.DomUtil._getClass(e);return h.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(h)},addClass:function(e,o){if(e.classList!==nt)for(var h=u.Util.splitWords(o),_=0,y=h.length;_<y;_++)e.classList.add(h[_]);else if(!u.DomUtil.hasClass(e,o)){var S=u.DomUtil._getClass(e);u.DomUtil._setClass(e,(S?S+" ":"")+o)}},removeClass:function(e,o){e.classList!==nt?e.classList.remove(o):u.DomUtil._setClass(e,u.Util.trim((" "+u.DomUtil._getClass(e)+" ").replace(" "+o+" "," ")))},_setClass:function(e,o){e.className.baseVal===nt?e.className=o:e.className.baseVal=o},_getClass:function(e){return e.className.baseVal===nt?e.className:e.className.baseVal},setOpacity:function(e,o){if("opacity"in e.style)e.style.opacity=o;else if("filter"in e.style){var h=!1,_="DXImageTransform.Microsoft.Alpha";try{h=e.filters.item(_)}catch(y){if(o===1)return}o=Math.round(o*100),h?(h.Enabled=o!==100,h.Opacity=o):e.style.filter+=" progid:"+_+"(opacity="+o+")"}},testProp:function(e){for(var o=J.documentElement.style,h=0;h<e.length;h++)if(e[h]in o)return e[h];return!1},getTranslateString:function(e){var o=u.Browser.webkit3d,h="translate"+(o?"3d":"")+"(",_=(o?",0":"")+")";return h+e.x+"px,"+e.y+"px"+_},getScaleString:function(e,o){var h=u.DomUtil.getTranslateString(o.add(o.multiplyBy(-1*e))),_=" scale("+e+") ";return h+_},setPosition:function(e,o,h){e._leaflet_pos=o,!h&&u.Browser.any3d?e.style[u.DomUtil.TRANSFORM]=u.DomUtil.getTranslateString(o):(e.style.left=o.x+"px",e.style.top=o.y+"px")},getPosition:function(e){return e._leaflet_pos}},u.DomUtil.TRANSFORM=u.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),u.DomUtil.TRANSITION=u.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),u.DomUtil.TRANSITION_END=u.DomUtil.TRANSITION==="webkitTransition"||u.DomUtil.TRANSITION==="OTransition"?u.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in J)u.extend(u.DomUtil,{disableTextSelection:function(){u.DomEvent.on(m,"selectstart",u.DomEvent.preventDefault)},enableTextSelection:function(){u.DomEvent.off(m,"selectstart",u.DomEvent.preventDefault)}});else{var e=u.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);u.extend(u.DomUtil,{disableTextSelection:function(){if(e){var o=J.documentElement.style;this._userSelect=o[e],o[e]="none"}},enableTextSelection:function(){e&&(J.documentElement.style[e]=this._userSelect,delete this._userSelect)}})}u.extend(u.DomUtil,{disableImageDrag:function(){u.DomEvent.on(m,"dragstart",u.DomEvent.preventDefault)},enableImageDrag:function(){u.DomEvent.off(m,"dragstart",u.DomEvent.preventDefault)}})}(),u.LatLng=function(e,o,h){if(e=parseFloat(e),o=parseFloat(o),isNaN(e)||isNaN(o))throw new Error("Invalid LatLng object: ("+e+", "+o+")");this.lat=e,this.lng=o,h!==nt&&(this.alt=parseFloat(h))},u.extend(u.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),u.LatLng.prototype={equals:function(e){if(!e)return!1;e=u.latLng(e);var o=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return o<=u.LatLng.MAX_MARGIN},toString:function(e){return"LatLng("+u.Util.formatNum(this.lat,e)+", "+u.Util.formatNum(this.lng,e)+")"},distanceTo:function(e){e=u.latLng(e);var o=6378137,h=u.LatLng.DEG_TO_RAD,_=(e.lat-this.lat)*h,y=(e.lng-this.lng)*h,S=this.lat*h,T=e.lat*h,U=Math.sin(_/2),O=Math.sin(y/2),V=U*U+O*O*Math.cos(S)*Math.cos(T);return o*2*Math.atan2(Math.sqrt(V),Math.sqrt(1-V))},wrap:function(e,o){var h=this.lng;return e=e||-180,o=o||180,h=(h+o)%(o-e)+(h<e||h===o?o:e),new u.LatLng(this.lat,h)}},u.latLng=function(e,o){return e instanceof u.LatLng?e:u.Util.isArray(e)?typeof e[0]=="number"||typeof e[0]=="string"?new u.LatLng(e[0],e[1],e[2]):null:e===nt||e===null?e:typeof e=="object"&&"lat"in e?new u.LatLng(e.lat,"lng"in e?e.lng:e.lon):o===nt?null:new u.LatLng(e,o)},u.LatLngBounds=function(e,o){if(!!e)for(var h=o?[e,o]:e,_=0,y=h.length;_<y;_++)this.extend(h[_])},u.LatLngBounds.prototype={extend:function(e){if(!e)return this;var o=u.latLng(e);return o!==null?e=o:e=u.latLngBounds(e),e instanceof u.LatLng?!this._southWest&&!this._northEast?(this._southWest=new u.LatLng(e.lat,e.lng),this._northEast=new u.LatLng(e.lat,e.lng)):(this._southWest.lat=Math.min(e.lat,this._southWest.lat),this._southWest.lng=Math.min(e.lng,this._southWest.lng),this._northEast.lat=Math.max(e.lat,this._northEast.lat),this._northEast.lng=Math.max(e.lng,this._northEast.lng)):e instanceof u.LatLngBounds&&(this.extend(e._southWest),this.extend(e._northEast)),this},pad:function(e){var o=this._southWest,h=this._northEast,_=Math.abs(o.lat-h.lat)*e,y=Math.abs(o.lng-h.lng)*e;return new u.LatLngBounds(new u.LatLng(o.lat-_,o.lng-y),new u.LatLng(h.lat+_,h.lng+y))},getCenter:function(){return new u.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new u.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new u.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){typeof e[0]=="number"||e instanceof u.LatLng?e=u.latLng(e):e=u.latLngBounds(e);var o=this._southWest,h=this._northEast,_,y;return e instanceof u.LatLngBounds?(_=e.getSouthWest(),y=e.getNorthEast()):_=y=e,_.lat>=o.lat&&y.lat<=h.lat&&_.lng>=o.lng&&y.lng<=h.lng},intersects:function(e){e=u.latLngBounds(e);var o=this._southWest,h=this._northEast,_=e.getSouthWest(),y=e.getNorthEast(),S=y.lat>=o.lat&&_.lat<=h.lat,T=y.lng>=o.lng&&_.lng<=h.lng;return S&&T},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e){return e?(e=u.latLngBounds(e),this._southWest.equals(e.getSouthWest())&&this._northEast.equals(e.getNorthEast())):!1},isValid:function(){return!!(this._southWest&&this._northEast)}},u.latLngBounds=function(e,o){return!e||e instanceof u.LatLngBounds?e:new u.LatLngBounds(e,o)},u.Projection={},u.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(e){var o=u.LatLng.DEG_TO_RAD,h=this.MAX_LATITUDE,_=Math.max(Math.min(h,e.lat),-h),y=e.lng*o,S=_*o;return S=Math.log(Math.tan(Math.PI/4+S/2)),new u.Point(y,S)},unproject:function(e){var o=u.LatLng.RAD_TO_DEG,h=e.x*o,_=(2*Math.atan(Math.exp(e.y))-Math.PI/2)*o;return new u.LatLng(_,h)}},u.Projection.LonLat={project:function(e){return new u.Point(e.lng,e.lat)},unproject:function(e){return new u.LatLng(e.y,e.x)}},u.CRS={latLngToPoint:function(e,o){var h=this.projection.project(e),_=this.scale(o);return this.transformation._transform(h,_)},pointToLatLng:function(e,o){var h=this.scale(o),_=this.transformation.untransform(e,h);return this.projection.unproject(_)},project:function(e){return this.projection.project(e)},scale:function(e){return 256*Math.pow(2,e)},getSize:function(e){var o=this.scale(e);return u.point(o,o)}},u.CRS.Simple=u.extend({},u.CRS,{projection:u.Projection.LonLat,transformation:new u.Transformation(1,0,-1,0),scale:function(e){return Math.pow(2,e)}}),u.CRS.EPSG3857=u.extend({},u.CRS,{code:"EPSG:3857",projection:u.Projection.SphericalMercator,transformation:new u.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(e){var o=this.projection.project(e),h=6378137;return o.multiplyBy(h)}}),u.CRS.EPSG900913=u.extend({},u.CRS.EPSG3857,{code:"EPSG:900913"}),u.CRS.EPSG4326=u.extend({},u.CRS,{code:"EPSG:4326",projection:u.Projection.LonLat,transformation:new u.Transformation(1/360,.5,-1/360,.5)}),u.Map=u.Class.extend({includes:u.Mixin.Events,options:{crs:u.CRS.EPSG3857,fadeAnimation:u.DomUtil.TRANSITION&&!u.Browser.android23,trackResize:!0,markerZoomAnimation:u.DomUtil.TRANSITION&&u.Browser.any3d},initialize:function(e,o){o=u.setOptions(this,o),this._initContainer(e),this._initLayout(),this._onResize=u.bind(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.center&&o.zoom!==nt&&this.setView(u.latLng(o.center),o.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(o.layers)},setView:function(e,o){return o=o===nt?this.getZoom():o,this._resetView(u.latLng(e),this._limitZoom(o)),this},setZoom:function(e,o){return this._loaded?this.setView(this.getCenter(),e,{zoom:o}):(this._zoom=this._limitZoom(e),this)},zoomIn:function(e,o){return this.setZoom(this._zoom+(e||1),o)},zoomOut:function(e,o){return this.setZoom(this._zoom-(e||1),o)},setZoomAround:function(e,o,h){var _=this.getZoomScale(o),y=this.getSize().divideBy(2),S=e instanceof u.Point?e:this.latLngToContainerPoint(e),T=S.subtract(y).multiplyBy(1-1/_),U=this.containerPointToLatLng(y.add(T));return this.setView(U,o,{zoom:h})},fitBounds:function(e,o){o=o||{},e=e.getBounds?e.getBounds():u.latLngBounds(e);var h=u.point(o.paddingTopLeft||o.padding||[0,0]),_=u.point(o.paddingBottomRight||o.padding||[0,0]),y=this.getBoundsZoom(e,!1,h.add(_));y=o.maxZoom?Math.min(o.maxZoom,y):y;var S=_.subtract(h).divideBy(2),T=this.project(e.getSouthWest(),y),U=this.project(e.getNorthEast(),y),O=this.unproject(T.add(U).divideBy(2).add(S),y);return this.setView(O,y,o)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,o){return this.setView(e,this._zoom,{pan:o})},panBy:function(e){return this.fire("movestart"),this._rawPanBy(u.point(e)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(e){return e=u.latLngBounds(e),this.options.maxBounds=e,e?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(e,o){var h=this.getCenter(),_=this._limitCenter(h,this._zoom,e);return h.equals(_)?this:this.panTo(_,o)},addLayer:function(e){var o=u.stamp(e);return this._layers[o]?this:(this._layers[o]=e,e.options&&(!isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[o]=e,this._updateZoomLevels()),this.options.zoomAnimation&&u.TileLayer&&e instanceof u.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,e.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(e),this)},removeLayer:function(e){var o=u.stamp(e);return this._layers[o]?(this._loaded&&e.onRemove(this),delete this._layers[o],this._loaded&&this.fire("layerremove",{layer:e}),this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels()),this.options.zoomAnimation&&u.TileLayer&&e instanceof u.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,e.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(e){return e?u.stamp(e)in this._layers:!1},eachLayer:function(e,o){for(var h in this._layers)e.call(o,this._layers[h]);return this},invalidateSize:function(e){if(!this._loaded)return this;e=u.extend({animate:!1,pan:!0},e===!0?{animate:!0}:e);var o=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var h=this.getSize(),_=o.divideBy(2).round(),y=h.divideBy(2).round(),S=_.subtract(y);return!S.x&&!S.y?this:(e.animate&&e.pan?this.panBy(S):(e.pan&&this._rawPanBy(S),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:h}))},addHandler:function(e,o){if(!o)return this;var h=this[e]=new o(this);return this._handlers.push(h),this.options[e]&&h.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(e){this._container._leaflet=nt}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),o=this.unproject(e.getBottomLeft()),h=this.unproject(e.getTopRight());return new u.LatLngBounds(o,h)},getMinZoom:function(){return this.options.minZoom===nt?this._layersMinZoom===nt?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===nt?this._layersMaxZoom===nt?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,o,h){e=u.latLngBounds(e);var _=this.getMinZoom()-(o?1:0),y=this.getMaxZoom(),S=this.getSize(),T=e.getNorthWest(),U=e.getSouthEast(),O=!0,V;h=u.point(h||[0,0]);do _++,V=this.project(U,_).subtract(this.project(T,_)).add(h),O=o?V.x<S.x||V.y<S.y:S.contains(V);while(O&&_<=y);return O&&o?null:o?_:_-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new u.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var e=this._getTopLeftPoint();return new u.Bounds(e,e.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e){var o=this.options.crs;return o.scale(e)/o.scale(this._zoom)},getScaleZoom:function(e){return this._zoom+Math.log(e)/Math.LN2},project:function(e,o){return o=o===nt?this._zoom:o,this.options.crs.latLngToPoint(u.latLng(e),o)},unproject:function(e,o){return o=o===nt?this._zoom:o,this.options.crs.pointToLatLng(u.point(e),o)},layerPointToLatLng:function(e){var o=u.point(e).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(e){var o=this.project(u.latLng(e))._round();return o._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(e){return u.point(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return u.point(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var o=this.containerPointToLayerPoint(u.point(e));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(u.latLng(e)))},mouseEventToContainerPoint:function(e){return u.DomEvent.getMousePosition(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var o=this._container=u.DomUtil.get(e);if(o){if(o._leaflet)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");o._leaflet=!0},_initLayout:function(){var e=this._container;u.DomUtil.addClass(e,"leaflet-container"+(u.Browser.touch?" leaflet-touch":"")+(u.Browser.retina?" leaflet-retina":"")+(u.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var o=u.DomUtil.getStyle(e,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._mapPane=e.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=e.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),e.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),e.shadowPane=this._createPane("leaflet-shadow-pane"),e.overlayPane=this._createPane("leaflet-overlay-pane"),e.markerPane=this._createPane("leaflet-marker-pane"),e.popupPane=this._createPane("leaflet-popup-pane");var o=" leaflet-zoom-hide";this.options.markerZoomAnimation||(u.DomUtil.addClass(e.markerPane,o),u.DomUtil.addClass(e.shadowPane,o),u.DomUtil.addClass(e.popupPane,o))},_createPane:function(e,o){return u.DomUtil.create("div",e,o||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(e){e=e?u.Util.isArray(e)?e:[e]:[];for(var o=0,h=e.length;o<h;o++)this.addLayer(e[o])},_resetView:function(e,o,h,_){var y=this._zoom!==o;_||(this.fire("movestart"),y&&this.fire("zoomstart")),this._zoom=o,this._initialCenter=e,this._initialTopLeftPoint=this._getNewTopLeftPoint(e),h?this._initialTopLeftPoint._add(this._getMapPanePos()):u.DomUtil.setPosition(this._mapPane,new u.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var S=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!h}),S&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(y||_)&&this.fire("zoomend"),this.fire("moveend",{hard:!h})},_rawPanBy:function(e){u.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var e,o=1/0,h=-1/0,_=this._getZoomSpan();for(e in this._zoomBoundLayers){var y=this._zoomBoundLayers[e];isNaN(y.options.minZoom)||(o=Math.min(o,y.options.minZoom)),isNaN(y.options.maxZoom)||(h=Math.max(h,y.options.maxZoom))}e===nt?this._layersMaxZoom=this._layersMinZoom=nt:(this._layersMaxZoom=h,this._layersMinZoom=o),_!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){if(!!u.DomEvent){e=e||"on",u.DomEvent[e](this._container,"click",this._onMouseClick,this);var o=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"],h,_;for(h=0,_=o.length;h<_;h++)u.DomEvent[e](this._container,o[h],this._fireMouseEvent,this);this.options.trackResize&&u.DomEvent[e](m,"resize",this._onResize,this)}},_onResize:function(){u.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=u.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(e){!this._loaded||!e._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||u.DomEvent._skipped(e)||(this.fire("preclick"),this._fireMouseEvent(e))},_fireMouseEvent:function(e){if(!(!this._loaded||u.DomEvent._skipped(e))){var o=e.type;if(o=o==="mouseenter"?"mouseover":o==="mouseleave"?"mouseout":o,!!this.hasEventListeners(o)){o==="contextmenu"&&u.DomEvent.preventDefault(e);var h=this.mouseEventToContainerPoint(e),_=this.containerPointToLayerPoint(h),y=this.layerPointToLatLng(_);this.fire(o,{latlng:y,layerPoint:_,containerPoint:h,originalEvent:e})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var e=0,o=this._handlers.length;e<o;e++)this._handlers[e].disable()},whenReady:function(e,o){return this._loaded?e.call(o||this,this):this.on("load",e,o),this},_layerAdd:function(e){e.onAdd(this),this.fire("layeradd",{layer:e})},_getMapPanePos:function(){return u.DomUtil.getPosition(this._mapPane)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(e,o){var h=this.getSize()._divideBy(2);return this.project(e,o)._subtract(h)._round()},_latLngToNewLayerPoint:function(e,o,h){var _=this._getNewTopLeftPoint(h,o).add(this._getMapPanePos());return this.project(e,o)._subtract(_)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,o,h){if(!h)return e;var _=this.project(e,o),y=this.getSize().divideBy(2),S=new u.Bounds(_.subtract(y),_.add(y)),T=this._getBoundsOffset(S,h,o);return this.unproject(_.add(T),o)},_limitOffset:function(e,o){if(!o)return e;var h=this.getPixelBounds(),_=new u.Bounds(h.min.add(e),h.max.add(e));return e.add(this._getBoundsOffset(_,o))},_getBoundsOffset:function(e,o,h){var _=this.project(o.getNorthWest(),h).subtract(e.min),y=this.project(o.getSouthEast(),h).subtract(e.max),S=this._rebound(_.x,-y.x),T=this._rebound(_.y,-y.y);return new u.Point(S,T)},_rebound:function(e,o){return e+o>0?Math.round(e-o)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(o))},_limitZoom:function(e){var o=this.getMinZoom(),h=this.getMaxZoom();return Math.max(o,Math.min(h,e))}}),u.map=function(e,o){return new u.Map(e,o)},u.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752314245179e-9,R_MAJOR:6378137,project:function(e){var o=u.LatLng.DEG_TO_RAD,h=this.MAX_LATITUDE,_=Math.max(Math.min(h,e.lat),-h),y=this.R_MAJOR,S=this.R_MINOR,T=e.lng*o*y,U=_*o,O=S/y,V=Math.sqrt(1-O*O),q=V*Math.sin(U);q=Math.pow((1-q)/(1+q),V*.5);var ot=Math.tan(.5*(Math.PI*.5-U))/q;return U=-y*Math.log(ot),new u.Point(T,U)},unproject:function(e){for(var o=u.LatLng.RAD_TO_DEG,h=this.R_MAJOR,_=this.R_MINOR,y=e.x*o/h,S=_/h,T=Math.sqrt(1-S*S),U=Math.exp(-e.y/h),O=Math.PI/2-2*Math.atan(U),V=15,q=1e-7,ot=V,ht=.1,ut;Math.abs(ht)>q&&--ot>0;)ut=T*Math.sin(O),ht=Math.PI/2-2*Math.atan(U*Math.pow((1-ut)/(1+ut),.5*T))-O,O+=ht;return new u.LatLng(O*o,y)}},u.CRS.EPSG3395=u.extend({},u.CRS,{code:"EPSG:3395",projection:u.Projection.Mercator,transformation:function(){var e=u.Projection.Mercator,o=e.R_MAJOR,h=.5/(Math.PI*o);return new u.Transformation(h,.5,-h,.5)}()}),u.TileLayer=u.Class.extend({includes:u.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:u.Browser.mobile,updateWhenIdle:u.Browser.mobile},initialize:function(e,o){o=u.setOptions(this,o),o.detectRetina&&u.Browser.retina&&o.maxZoom>0&&(o.tileSize=Math.floor(o.tileSize/2),o.zoomOffset++,o.minZoom>0&&o.minZoom--,this.options.maxZoom--),o.bounds&&(o.bounds=u.latLngBounds(o.bounds)),this._url=e;var h=this.options.subdomains;typeof h=="string"&&(this.options.subdomains=h.split(""))},onAdd:function(e){this._map=e,this._animated=e._zoomAnimated,this._initContainer(),e.on({viewreset:this._reset,moveend:this._update},this),this._animated&&e.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=u.Util.limitExecByInterval(this._update,150,this),e.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){this._container.parentNode.removeChild(this._container),e.off({viewreset:this._reset,moveend:this._update},this),this._animated&&e.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||e.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var e=this._map._panes.tilePane;return this._container&&(e.appendChild(this._container),this._setAutoZIndex(e,Math.max)),this},bringToBack:function(){var e=this._map._panes.tilePane;return this._container&&(e.insertBefore(this._container,e.firstChild),this._setAutoZIndex(e,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},setUrl:function(e,o){return this._url=e,o||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==nt&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e,o){var h=e.children,_=-o(1/0,-1/0),y,S,T;for(S=0,T=h.length;S<T;S++)h[S]!==this._container&&(y=parseInt(h[S].style.zIndex,10),isNaN(y)||(_=o(_,y)));this.options.zIndex=this._container.style.zIndex=(isFinite(_)?_:0)+o(1,-1)},_updateOpacity:function(){var e,o=this._tiles;if(u.Browser.ielt9)for(e in o)u.DomUtil.setOpacity(o[e],this.options.opacity);else u.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var e=this._map._panes.tilePane;if(!this._container){if(this._container=u.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var o="leaflet-tile-container";this._bgBuffer=u.DomUtil.create("div",o,this._container),this._tileContainer=u.DomUtil.create("div",o,this._container)}else this._tileContainer=this._container;e.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(e){for(var o in this._tiles)this.fire("tileunload",{tile:this._tiles[o]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&e&&e.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var e=this._map,o=e.getZoom()+this.options.zoomOffset,h=this.options.maxNativeZoom,_=this.options.tileSize;return h&&o>h&&(_=Math.round(e.getZoomScale(o)/e.getZoomScale(h)*_)),_},_update:function(){if(!!this._map){var e=this._map,o=e.getPixelBounds(),h=e.getZoom(),_=this._getTileSize();if(!(h>this.options.maxZoom||h<this.options.minZoom)){var y=u.bounds(o.min.divideBy(_)._floor(),o.max.divideBy(_)._floor());this._addTilesFromCenterOut(y),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(y)}}},_addTilesFromCenterOut:function(e){var o=[],h=e.getCenter(),_,y,S;for(_=e.min.y;_<=e.max.y;_++)for(y=e.min.x;y<=e.max.x;y++)S=new u.Point(y,_),this._tileShouldBeLoaded(S)&&o.push(S);var T=o.length;if(T!==0){o.sort(function(O,V){return O.distanceTo(h)-V.distanceTo(h)});var U=J.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=T,y=0;y<T;y++)this._addTile(o[y],U);this._tileContainer.appendChild(U)}},_tileShouldBeLoaded:function(e){if(e.x+":"+e.y in this._tiles)return!1;var o=this.options;if(!o.continuousWorld){var h=this._getWrapTileNum();if(o.noWrap&&(e.x<0||e.x>=h.x)||e.y<0||e.y>=h.y)return!1}if(o.bounds){var _=this._getTileSize(),y=e.multiplyBy(_),S=y.add([_,_]),T=this._map.unproject(y),U=this._map.unproject(S);if(!o.continuousWorld&&!o.noWrap&&(T=T.wrap(),U=U.wrap()),!o.bounds.intersects([T,U]))return!1}return!0},_removeOtherTiles:function(e){var o,h,_,y;for(y in this._tiles)o=y.split(":"),h=parseInt(o[0],10),_=parseInt(o[1],10),(h<e.min.x||h>e.max.x||_<e.min.y||_>e.max.y)&&this._removeTile(y)},_removeTile:function(e){var o=this._tiles[e];this.fire("tileunload",{tile:o,url:o.src}),this.options.reuseTiles?(u.DomUtil.removeClass(o,"leaflet-tile-loaded"),this._unusedTiles.push(o)):o.parentNode===this._tileContainer&&this._tileContainer.removeChild(o),u.Browser.android||(o.onload=null,o.src=u.Util.emptyImageUrl),delete this._tiles[e]},_addTile:function(e,o){var h=this._getTilePos(e),_=this._getTile();u.DomUtil.setPosition(_,h,u.Browser.chrome),this._tiles[e.x+":"+e.y]=_,this._loadTile(_,e),_.parentNode!==this._tileContainer&&o.appendChild(_)},_getZoomForUrl:function(){var e=this.options,o=this._map.getZoom();return e.zoomReverse&&(o=e.maxZoom-o),o+=e.zoomOffset,e.maxNativeZoom?Math.min(o,e.maxNativeZoom):o},_getTilePos:function(e){var o=this._map.getPixelOrigin(),h=this._getTileSize();return e.multiplyBy(h).subtract(o)},getTileUrl:function(e){return u.Util.template(this._url,u.extend({s:this._getSubdomain(e),z:e.z,x:e.x,y:e.y},this.options))},_getWrapTileNum:function(){var e=this._map.options.crs,o=e.getSize(this._map.getZoom());return o.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(e){var o=this._getWrapTileNum();!this.options.continuousWorld&&!this.options.noWrap&&(e.x=(e.x%o.x+o.x)%o.x),this.options.tms&&(e.y=o.y-e.y-1),e.z=this._getZoomForUrl()},_getSubdomain:function(e){var o=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[o]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var e=this._unusedTiles.pop();return this._resetTile(e),e}return this._createTile()},_resetTile:function(){},_createTile:function(){var e=u.DomUtil.create("img","leaflet-tile");return e.style.width=e.style.height=this._getTileSize()+"px",e.galleryimg="no",e.onselectstart=e.onmousemove=u.Util.falseFn,u.Browser.ielt9&&this.options.opacity!==nt&&u.DomUtil.setOpacity(e,this.options.opacity),u.Browser.mobileWebkit3d&&(e.style.WebkitBackfaceVisibility="hidden"),e},_loadTile:function(e,o){e._layer=this,e.onload=this._tileOnLoad,e.onerror=this._tileOnError,this._adjustTilePoint(o),e.src=this.getTileUrl(o),this.fire("tileloadstart",{tile:e,url:e.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&u.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(u.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var e=this._layer;this.src!==u.Util.emptyImageUrl&&(u.DomUtil.addClass(this,"leaflet-tile-loaded"),e.fire("tileload",{tile:this,url:this.src})),e._tileLoaded()},_tileOnError:function(){var e=this._layer;e.fire("tileerror",{tile:this,url:this.src});var o=e.options.errorTileUrl;o&&(this.src=o),e._tileLoaded()}}),u.tileLayer=function(e,o){return new u.TileLayer(e,o)},u.TileLayer.WMS=u.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(e,o){this._url=e;var h=u.extend({},this.defaultWmsParams),_=o.tileSize||this.options.tileSize;o.detectRetina&&u.Browser.retina?h.width=h.height=_*2:h.width=h.height=_;for(var y in o)!this.options.hasOwnProperty(y)&&y!=="crs"&&(h[y]=o[y]);this.wmsParams=h,u.setOptions(this,o)},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,u.TileLayer.prototype.onAdd.call(this,e)},getTileUrl:function(e){var o=this._map,h=this.options.tileSize,_=e.multiplyBy(h),y=_.add([h,h]),S=this._crs.project(o.unproject(_,e.z)),T=this._crs.project(o.unproject(y,e.z)),U=this._wmsVersion>=1.3&&this._crs===u.CRS.EPSG4326?[T.y,S.x,S.y,T.x].join(","):[S.x,T.y,T.x,S.y].join(","),O=u.Util.template(this._url,{s:this._getSubdomain(e)});return O+u.Util.getParamString(this.wmsParams,O,!0)+"&BBOX="+U},setParams:function(e,o){return u.extend(this.wmsParams,e),o||this.redraw(),this}}),u.tileLayer.wms=function(e,o){return new u.TileLayer.WMS(e,o)},u.TileLayer.Canvas=u.TileLayer.extend({options:{async:!1},initialize:function(e){u.setOptions(this,e)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var e in this._tiles)this._redrawTile(this._tiles[e]);return this},_redrawTile:function(e){this.drawTile(e,e._tilePoint,this._map._zoom)},_createTile:function(){var e=u.DomUtil.create("canvas","leaflet-tile");return e.width=e.height=this.options.tileSize,e.onselectstart=e.onmousemove=u.Util.falseFn,e},_loadTile:function(e,o){e._layer=this,e._tilePoint=o,this._redrawTile(e),this.options.async||this.tileDrawn(e)},drawTile:function(){},tileDrawn:function(e){this._tileOnLoad.call(e)}}),u.tileLayer.canvas=function(e){return new u.TileLayer.Canvas(e)},u.ImageOverlay=u.Class.extend({includes:u.Mixin.Events,options:{opacity:1},initialize:function(e,o,h){this._url=e,this._bounds=u.latLngBounds(o),u.setOptions(this,h)},onAdd:function(e){this._map=e,this._image||this._initImage(),e._panes.overlayPane.appendChild(this._image),e.on("viewreset",this._reset,this),e.options.zoomAnimation&&u.Browser.any3d&&e.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(e){e.getPanes().overlayPane.removeChild(this._image),e.off("viewreset",this._reset,this),e.options.zoomAnimation&&e.off("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var e=this._map._panes.overlayPane;return this._image&&e.insertBefore(this._image,e.firstChild),this},setUrl:function(e){this._url=e,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=u.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&u.Browser.any3d?u.DomUtil.addClass(this._image,"leaflet-zoom-animated"):u.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),u.extend(this._image,{galleryimg:"no",onselectstart:u.Util.falseFn,onmousemove:u.Util.falseFn,onload:u.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(e){var o=this._map,h=this._image,_=o.getZoomScale(e.zoom),y=this._bounds.getNorthWest(),S=this._bounds.getSouthEast(),T=o._latLngToNewLayerPoint(y,e.zoom,e.center),U=o._latLngToNewLayerPoint(S,e.zoom,e.center)._subtract(T),O=T._add(U._multiplyBy(1/2*(1-1/_)));h.style[u.DomUtil.TRANSFORM]=u.DomUtil.getTranslateString(O)+" scale("+_+") "},_reset:function(){var e=this._image,o=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),h=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(o);u.DomUtil.setPosition(e,o),e.style.width=h.x+"px",e.style.height=h.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){u.DomUtil.setOpacity(this._image,this.options.opacity)}}),u.imageOverlay=function(e,o,h){return new u.ImageOverlay(e,o,h)},u.Icon=u.Class.extend({options:{className:""},initialize:function(e){u.setOptions(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,o){var h=this._getIconUrl(e);if(!h){if(e==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _;return!o||o.tagName!=="IMG"?_=this._createImg(h):_=this._createImg(h,o),this._setIconStyles(_,e),_},_setIconStyles:function(e,o){var h=this.options,_=u.point(h[o+"Size"]),y;o==="shadow"?y=u.point(h.shadowAnchor||h.iconAnchor):y=u.point(h.iconAnchor),!y&&_&&(y=_.divideBy(2,!0)),e.className="leaflet-marker-"+o+" "+h.className,y&&(e.style.marginLeft=-y.x+"px",e.style.marginTop=-y.y+"px"),_&&(e.style.width=_.x+"px",e.style.height=_.y+"px")},_createImg:function(e,o){return o=o||J.createElement("img"),o.src=e,o},_getIconUrl:function(e){return u.Browser.retina&&this.options[e+"RetinaUrl"]?this.options[e+"RetinaUrl"]:this.options[e+"Url"]}}),u.icon=function(e){return new u.Icon(e)},u.Icon.Default=u.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(e){var o=e+"Url";if(this.options[o])return this.options[o];u.Browser.retina&&e==="icon"&&(e+="-2x");var h=u.Icon.Default.imagePath;if(!h)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return h+"/marker-"+e+".png"}}),u.Icon.Default.imagePath=function(){var e=J.getElementsByTagName("script"),o=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/,h,_,y,S,T;for(h=0,_=e.length;h<_;h++)if(y=e[h].src,S=y.match(o),S)return T=y.split(o)[0],(T?T+"/":"")+"images"}(),u.Marker=u.Class.extend({includes:u.Mixin.Events,options:{icon:new u.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(e,o){u.setOptions(this,o),this._latlng=u.latLng(e)},onAdd:function(e){this._map=e,e.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),e.options.zoomAnimation&&e.options.markerZoomAnimation&&e.on("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),e.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=u.latLng(e),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update(),this},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){return this._icon&&this._setPos(this._map.latLngToLayerPoint(this._latlng).round()),this},_initIcon:function(){var e=this.options,o=this._map,h=o.options.zoomAnimation&&o.options.markerZoomAnimation,_=h?"leaflet-zoom-animated":"leaflet-zoom-hide",y=e.icon.createIcon(this._icon),S=!1;y!==this._icon&&(this._icon&&this._removeIcon(),S=!0,e.title&&(y.title=e.title),e.alt&&(y.alt=e.alt)),u.DomUtil.addClass(y,_),e.keyboard&&(y.tabIndex="0"),this._icon=y,this._initInteraction(),e.riseOnHover&&u.DomEvent.on(y,"mouseover",this._bringToFront,this).on(y,"mouseout",this._resetZIndex,this);var T=e.icon.createShadow(this._shadow),U=!1;T!==this._shadow&&(this._removeShadow(),U=!0),T&&u.DomUtil.addClass(T,_),this._shadow=T,e.opacity<1&&this._updateOpacity();var O=this._map._panes;S&&O.markerPane.appendChild(this._icon),T&&U&&O.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&u.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(e){u.DomUtil.setPosition(this._icon,e),this._shadow&&u.DomUtil.setPosition(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon.style.zIndex=this._zIndex+e},_animateZoom:function(e){var o=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(o)},_initInteraction:function(){if(!!this.options.clickable){var e=this._icon,o=["dblclick","mousedown","mouseover","mouseout","contextmenu"];u.DomUtil.addClass(e,"leaflet-clickable"),u.DomEvent.on(e,"click",this._onMouseClick,this),u.DomEvent.on(e,"keypress",this._onKeyPress,this);for(var h=0;h<o.length;h++)u.DomEvent.on(e,o[h],this._fireMouseEvent,this);u.Handler.MarkerDrag&&(this.dragging=new u.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(e){var o=this.dragging&&this.dragging.moved();(this.hasEventListeners(e.type)||o)&&u.DomEvent.stopPropagation(e),!o&&((!this.dragging||!this.dragging._enabled)&&this._map.dragging&&this._map.dragging.moved()||this.fire(e.type,{originalEvent:e,latlng:this._latlng}))},_onKeyPress:function(e){e.keyCode===13&&this.fire("click",{originalEvent:e,latlng:this._latlng})},_fireMouseEvent:function(e){this.fire(e.type,{originalEvent:e,latlng:this._latlng}),e.type==="contextmenu"&&this.hasEventListeners(e.type)&&u.DomEvent.preventDefault(e),e.type!=="mousedown"?u.DomEvent.stopPropagation(e):u.DomEvent.preventDefault(e)},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){u.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&u.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),u.marker=function(e,o){return new u.Marker(e,o)},u.DivIcon=u.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(e){var o=e&&e.tagName==="DIV"?e:J.createElement("div"),h=this.options;return h.html!==!1?o.innerHTML=h.html:o.innerHTML="",h.bgPos&&(o.style.backgroundPosition=-h.bgPos.x+"px "+-h.bgPos.y+"px"),this._setIconStyles(o,"icon"),o},createShadow:function(){return null}}),u.divIcon=function(e){return new u.DivIcon(e)},u.Map.mergeOptions({closePopupOnClick:!0}),u.Popup=u.Class.extend({includes:u.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(e,o){u.setOptions(this,e),this._source=o,this._animated=u.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(e){this._map=e,this._container||this._initLayout();var o=e.options.fadeAnimation;o&&u.DomUtil.setOpacity(this._container,0),e._panes.popupPane.appendChild(this._container),e.on(this._getEvents(),this),this.update(),o&&u.DomUtil.setOpacity(this._container,1),this.fire("open"),e.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(e){return e.addLayer(this),this},openOn:function(e){return e.openPopup(this),this},onRemove:function(e){e._panes.popupPane.removeChild(this._container),u.Util.falseFn(this._container.offsetWidth),e.off(this._getEvents(),this),e.options.fadeAnimation&&u.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),e.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=u.latLng(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var e={viewreset:this._updatePosition};return this._animated&&(e.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this._close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var e="leaflet-popup",o=e+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),h=this._container=u.DomUtil.create("div",o),_;this.options.closeButton&&(_=this._closeButton=u.DomUtil.create("a",e+"-close-button",h),_.href="#close",_.innerHTML="&#215;",u.DomEvent.disableClickPropagation(_),u.DomEvent.on(_,"click",this._onCloseButtonClick,this));var y=this._wrapper=u.DomUtil.create("div",e+"-content-wrapper",h);u.DomEvent.disableClickPropagation(y),this._contentNode=u.DomUtil.create("div",e+"-content",y),u.DomEvent.disableScrollPropagation(this._contentNode),u.DomEvent.on(y,"contextmenu",u.DomEvent.stopPropagation),this._tipContainer=u.DomUtil.create("div",e+"-tip-container",h),this._tip=u.DomUtil.create("div",e+"-tip",this._tipContainer)},_updateContent:function(){if(!!this._content){if(typeof this._content=="string")this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var e=this._contentNode,o=e.style;o.width="",o.whiteSpace="nowrap";var h=e.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),o.width=h+1+"px",o.whiteSpace="",o.height="";var _=e.offsetHeight,y=this.options.maxHeight,S="leaflet-popup-scrolled";y&&_>y?(o.height=y+"px",u.DomUtil.addClass(e,S)):u.DomUtil.removeClass(e,S),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(!!this._map){var e=this._map.latLngToLayerPoint(this._latlng),o=this._animated,h=u.point(this.options.offset);o&&u.DomUtil.setPosition(this._container,e),this._containerBottom=-h.y-(o?0:e.y),this._containerLeft=-Math.round(this._containerWidth/2)+h.x+(o?0:e.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(e){var o=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);u.DomUtil.setPosition(this._container,o)},_adjustPan:function(){if(!!this.options.autoPan){var e=this._map,o=this._container.offsetHeight,h=this._containerWidth,_=new u.Point(this._containerLeft,-o-this._containerBottom);this._animated&&_._add(u.DomUtil.getPosition(this._container));var y=e.layerPointToContainerPoint(_),S=u.point(this.options.autoPanPadding),T=u.point(this.options.autoPanPaddingTopLeft||S),U=u.point(this.options.autoPanPaddingBottomRight||S),O=e.getSize(),V=0,q=0;y.x+h+U.x>O.x&&(V=y.x+h-O.x+U.x),y.x-V-T.x<0&&(V=y.x-T.x),y.y+o+U.y>O.y&&(q=y.y+o-O.y+U.y),y.y-q-T.y<0&&(q=y.y-T.y),(V||q)&&e.fire("autopanstart").panBy([V,q])}},_onCloseButtonClick:function(e){this._close(),u.DomEvent.stop(e)}}),u.popup=function(e,o){return new u.Popup(e,o)},u.Map.include({openPopup:function(e,o,h){if(this.closePopup(),!(e instanceof u.Popup)){var _=e;e=new u.Popup(h).setLatLng(o).setContent(_)}return e._isOpen=!0,this._popup=e,this.addLayer(e)},closePopup:function(e){return(!e||e===this._popup)&&(e=this._popup,this._popup=null),e&&(this.removeLayer(e),e._isOpen=!1),this}}),u.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(e,o){var h=u.point(this.options.icon.options.popupAnchor||[0,0]);return h=h.add(u.Popup.prototype.options.offset),o&&o.offset&&(h=h.add(o.offset)),o=u.extend({offset:h},o),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),e instanceof u.Popup?(u.setOptions(e,o),this._popup=e,e._source=this):this._popup=new u.Popup(o,this).setContent(e),this},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(e){this._popup.setLatLng(e.latlng)}}),u.LayerGroup=u.Class.extend({initialize:function(e){this._layers={};var o,h;if(e)for(o=0,h=e.length;o<h;o++)this.addLayer(e[o])},addLayer:function(e){var o=this.getLayerId(e);return this._layers[o]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var o=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(e){return e?e in this._layers||this.getLayerId(e)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(e){var o=Array.prototype.slice.call(arguments,1),h,_;for(h in this._layers)_=this._layers[h],_[e]&&_[e].apply(_,o);return this},onAdd:function(e){this._map=e,this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e),this._map=null},addTo:function(e){return e.addLayer(this),this},eachLayer:function(e,o){for(var h in this._layers)e.call(o,this._layers[h]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];for(var o in this._layers)e.push(this._layers[o]);return e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return u.stamp(e)}}),u.layerGroup=function(e){return new u.LayerGroup(e)},u.FeatureGroup=u.LayerGroup.extend({includes:u.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(e){return this.hasLayer(e)?this:("on"in e&&e.on(u.FeatureGroup.EVENTS,this._propagateEvent,this),u.LayerGroup.prototype.addLayer.call(this,e),this._popupContent&&e.bindPopup&&e.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.off(u.FeatureGroup.EVENTS,this._propagateEvent,this),u.LayerGroup.prototype.removeLayer.call(this,e),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:e})):this},bindPopup:function(e,o){return this._popupContent=e,this._popupOptions=o,this.invoke("bindPopup",e,o)},openPopup:function(e){for(var o in this._layers){this._layers[o].openPopup(e);break}return this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new u.LatLngBounds;return this.eachLayer(function(o){e.extend(o instanceof u.Marker?o.getLatLng():o.getBounds())}),e},_propagateEvent:function(e){e=u.extend({layer:e.target,target:this},e),this.fire(e.type,e)}}),u.featureGroup=function(e){return new u.FeatureGroup(e)},u.Path=u.Class.extend({includes:[u.Mixin.Events],statics:{CLIP_PADDING:function(){var e=u.Browser.mobile?1280:2e3,o=(e/Math.max(m.outerWidth,m.outerHeight)-1)/2;return Math.max(0,Math.min(.5,o))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(e){u.setOptions(this,e)},onAdd:function(e){this._map=e,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),e.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){e._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,u.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),e.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(e){return u.setOptions(this,e),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),u.Map.include({_updatePathViewport:function(){var e=u.Path.CLIP_PADDING,o=this.getSize(),h=u.DomUtil.getPosition(this._mapPane),_=h.multiplyBy(-1)._subtract(o.multiplyBy(e)._round()),y=_.add(o.multiplyBy(1+e*2)._round());this._pathViewport=new u.Bounds(_,y)}}),u.Path.SVG_NS="http://www.w3.org/2000/svg",u.Browser.svg=!!(J.createElementNS&&J.createElementNS(u.Path.SVG_NS,"svg").createSVGRect),u.Path=u.Path.extend({statics:{SVG:u.Browser.svg},bringToFront:function(){var e=this._map._pathRoot,o=this._container;return o&&e.lastChild!==o&&e.appendChild(o),this},bringToBack:function(){var e=this._map._pathRoot,o=this._container,h=e.firstChild;return o&&h!==o&&e.insertBefore(o,h),this},getPathString:function(){},_createElement:function(e){return J.createElementNS(u.Path.SVG_NS,e)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&u.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),!this.options.clickable&&!this.options.pointerEvents&&this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var e=this.getPathString();e||(e="M0 0"),this._path.setAttribute("d",e)},_initEvents:function(){if(this.options.clickable){(u.Browser.svg||!u.Browser.vml)&&u.DomUtil.addClass(this._path,"leaflet-clickable"),u.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var e=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],o=0;o<e.length;o++)u.DomEvent.on(this._container,e[o],this._fireMouseEvent,this)}},_onMouseClick:function(e){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(e)},_fireMouseEvent:function(e){if(!!this.hasEventListeners(e.type)){var o=this._map,h=o.mouseEventToContainerPoint(e),_=o.containerPointToLayerPoint(h),y=o.layerPointToLatLng(_);this.fire(e.type,{latlng:y,layerPoint:_,containerPoint:h,originalEvent:e}),e.type==="contextmenu"&&u.DomEvent.preventDefault(e),e.type!=="mousemove"&&u.DomEvent.stopPropagation(e)}}}),u.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=u.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&u.Browser.any3d?(u.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):u.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(e){var o=this.getZoomScale(e.zoom),h=this._getCenterOffset(e.center)._multiplyBy(-o)._add(this._pathViewport.min);this._pathRoot.style[u.DomUtil.TRANSFORM]=u.DomUtil.getTranslateString(h)+" scale("+o+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var e=this._pathViewport,o=e.min,h=e.max,_=h.x-o.x,y=h.y-o.y,S=this._pathRoot,T=this._panes.overlayPane;u.Browser.mobileWebkit&&T.removeChild(S),u.DomUtil.setPosition(S,o),S.setAttribute("width",_),S.setAttribute("height",y),S.setAttribute("viewBox",[o.x,o.y,_,y].join(" ")),u.Browser.mobileWebkit&&T.appendChild(S)}}}),u.Path.include({bindPopup:function(e,o){return e instanceof u.Popup?this._popup=e:((!this._popup||o)&&(this._popup=new u.Popup(o,this)),this._popup.setContent(e)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(e){return this._popup&&(e=e||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:e})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(e){this._popup.setLatLng(e.latlng),this._map.openPopup(this._popup)}}),u.Browser.vml=!u.Browser.svg&&function(){try{var e=J.createElement("div");e.innerHTML='<v:shape adj="1"/>';var o=e.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch(h){return!1}}(),u.Path=u.Browser.svg||!u.Browser.vml?u.Path:u.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return J.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return J.createElement("<lvml:"+e+' class="lvml">')}}catch(e){return function(o){return J.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var e=this._container=this._createElement("shape");u.DomUtil.addClass(e,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&u.DomUtil.addClass(e,"leaflet-clickable"),e.coordsize="1 1",this._path=this._createElement("path"),e.appendChild(this._path),this._map._pathRoot.appendChild(e)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var e=this._stroke,o=this._fill,h=this.options,_=this._container;_.stroked=h.stroke,_.filled=h.fill,h.stroke?(e||(e=this._stroke=this._createElement("stroke"),e.endcap="round",_.appendChild(e)),e.weight=h.weight+"px",e.color=h.color,e.opacity=h.opacity,h.dashArray?e.dashStyle=u.Util.isArray(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):e.dashStyle="",h.lineCap&&(e.endcap=h.lineCap.replace("butt","flat")),h.lineJoin&&(e.joinstyle=h.lineJoin)):e&&(_.removeChild(e),this._stroke=null),h.fill?(o||(o=this._fill=this._createElement("fill"),_.appendChild(o)),o.color=h.fillColor||h.color,o.opacity=h.fillOpacity):o&&(_.removeChild(o),this._fill=null)},_updatePath:function(){var e=this._container.style;e.display="none",this._path.v=this.getPathString()+" ",e.display=""}}),u.Map.include(u.Browser.svg||!u.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var e=this._pathRoot=J.createElement("div");e.className="leaflet-vml-container",this._panes.overlayPane.appendChild(e),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),u.Browser.canvas=function(){return!!J.createElement("canvas").getContext}(),u.Path=u.Path.SVG&&!m.L_PREFER_CANVAS||!u.Browser.canvas?u.Path:u.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(e){return u.setOptions(this,e),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(e){e.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!u.Path._updateRequest&&(u.Path._updateRequest=u.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){u.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var e=this.options;e.stroke&&(this._ctx.lineWidth=e.weight,this._ctx.strokeStyle=e.color),e.fill&&(this._ctx.fillStyle=e.fillColor||e.color),e.lineCap&&(this._ctx.lineCap=e.lineCap),e.lineJoin&&(this._ctx.lineJoin=e.lineJoin)},_drawPath:function(){var e,o,h,_,y,S;for(this._ctx.beginPath(),e=0,h=this._parts.length;e<h;e++){for(o=0,_=this._parts[e].length;o<_;o++)y=this._parts[e][o],S=(o===0?"move":"line")+"To",this._ctx[S](y.x,y.y);this instanceof u.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var e=this._ctx,o=this.options;this._drawPath(),e.save(),this._updateStyle(),o.fill&&(e.globalAlpha=o.fillOpacity,e.fill(o.fillRule||"evenodd")),o.stroke&&(e.globalAlpha=o.opacity,e.stroke()),e.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click dblclick contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(e){this._containsPoint(e.layerPoint)&&this.fire(e.type,e)},_onMouseMove:function(e){!this._map||this._map._animatingZoom||(this._containsPoint(e.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",e)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",e)))}}),u.Map.include(u.Path.SVG&&!m.L_PREFER_CANVAS||!u.Browser.canvas?{}:{_initPathRoot:function(){var e=this._pathRoot,o;e||(e=this._pathRoot=J.createElement("canvas"),e.style.position="absolute",o=this._canvasCtx=e.getContext("2d"),o.lineCap="round",o.lineJoin="round",this._panes.overlayPane.appendChild(e),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var e=this._pathViewport,o=e.min,h=e.max.subtract(o),_=this._pathRoot;u.DomUtil.setPosition(_,o),_.width=h.x,_.height=h.y,_.getContext("2d").translate(-o.x,-o.y)}}}),u.LineUtil={simplify:function(e,o){if(!o||!e.length)return e.slice();var h=o*o;return e=this._reducePoints(e,h),e=this._simplifyDP(e,h),e},pointToSegmentDistance:function(e,o,h){return Math.sqrt(this._sqClosestPointOnSegment(e,o,h,!0))},closestPointOnSegment:function(e,o,h){return this._sqClosestPointOnSegment(e,o,h)},_simplifyDP:function(e,o){var h=e.length,_=typeof Uint8Array!=nt+""?Uint8Array:Array,y=new _(h);y[0]=y[h-1]=1,this._simplifyDPStep(e,y,o,0,h-1);var S,T=[];for(S=0;S<h;S++)y[S]&&T.push(e[S]);return T},_simplifyDPStep:function(e,o,h,_,y){var S=0,T,U,O;for(U=_+1;U<=y-1;U++)O=this._sqClosestPointOnSegment(e[U],e[_],e[y],!0),O>S&&(T=U,S=O);S>h&&(o[T]=1,this._simplifyDPStep(e,o,h,_,T),this._simplifyDPStep(e,o,h,T,y))},_reducePoints:function(e,o){for(var h=[e[0]],_=1,y=0,S=e.length;_<S;_++)this._sqDist(e[_],e[y])>o&&(h.push(e[_]),y=_);return y<S-1&&h.push(e[S-1]),h},clipSegment:function(e,o,h,_){var y=_?this._lastCode:this._getBitCode(e,h),S=this._getBitCode(o,h),T,U,O;for(this._lastCode=S;;)if(y|S){if(y&S)return!1;T=y||S,U=this._getEdgeIntersection(e,o,T,h),O=this._getBitCode(U,h),T===y?(e=U,y=O):(o=U,S=O)}else return[e,o]},_getEdgeIntersection:function(e,o,h,_){var y=o.x-e.x,S=o.y-e.y,T=_.min,U=_.max;if(h&8)return new u.Point(e.x+y*(U.y-e.y)/S,U.y);if(h&4)return new u.Point(e.x+y*(T.y-e.y)/S,T.y);if(h&2)return new u.Point(U.x,e.y+S*(U.x-e.x)/y);if(h&1)return new u.Point(T.x,e.y+S*(T.x-e.x)/y)},_getBitCode:function(e,o){var h=0;return e.x<o.min.x?h|=1:e.x>o.max.x&&(h|=2),e.y<o.min.y?h|=4:e.y>o.max.y&&(h|=8),h},_sqDist:function(e,o){var h=o.x-e.x,_=o.y-e.y;return h*h+_*_},_sqClosestPointOnSegment:function(e,o,h,_){var y=o.x,S=o.y,T=h.x-y,U=h.y-S,O=T*T+U*U,V;return O>0&&(V=((e.x-y)*T+(e.y-S)*U)/O,V>1?(y=h.x,S=h.y):V>0&&(y+=T*V,S+=U*V)),T=e.x-y,U=e.y-S,_?T*T+U*U:new u.Point(y,S)}},u.Polyline=u.Path.extend({initialize:function(e,o){u.Path.prototype.initialize.call(this,o),this._latlngs=this._convertLatLngs(e)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var e=0,o=this._latlngs.length;e<o;e++)this._originalPoints[e]=this._map.latLngToLayerPoint(this._latlngs[e])},getPathString:function(){for(var e=0,o=this._parts.length,h="";e<o;e++)h+=this._getPathPartStr(this._parts[e]);return h},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._latlngs=this._convertLatLngs(e),this.redraw()},addLatLng:function(e){return this._latlngs.push(u.latLng(e)),this.redraw()},spliceLatLngs:function(){var e=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),e},closestLayerPoint:function(e){for(var o=1/0,h=this._parts,_,y,S=null,T=0,U=h.length;T<U;T++)for(var O=h[T],V=1,q=O.length;V<q;V++){_=O[V-1],y=O[V];var ot=u.LineUtil._sqClosestPointOnSegment(e,_,y,!0);ot<o&&(o=ot,S=u.LineUtil._sqClosestPointOnSegment(e,_,y))}return S&&(S.distance=Math.sqrt(o)),S},getBounds:function(){return new u.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(e,o){var h,_,y=o?e:[];for(h=0,_=e.length;h<_;h++){if(u.Util.isArray(e[h])&&typeof e[h][0]!="number")return;y[h]=u.latLng(e[h])}return y},_initEvents:function(){u.Path.prototype._initEvents.call(this)},_getPathPartStr:function(e){for(var o=u.Path.VML,h=0,_=e.length,y="",S;h<_;h++)S=e[h],o&&S._round(),y+=(h?"L":"M")+S.x+" "+S.y;return y},_clipPoints:function(){var e=this._originalPoints,o=e.length,h,_,y;if(this.options.noClip){this._parts=[e];return}this._parts=[];var S=this._parts,T=this._map._pathViewport,U=u.LineUtil;for(h=0,_=0;h<o-1;h++)y=U.clipSegment(e[h],e[h+1],T,h),!!y&&(S[_]=S[_]||[],S[_].push(y[0]),(y[1]!==e[h+1]||h===o-2)&&(S[_].push(y[1]),_++))},_simplifyPoints:function(){for(var e=this._parts,o=u.LineUtil,h=0,_=e.length;h<_;h++)e[h]=o.simplify(e[h],this.options.smoothFactor)},_updatePath:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),u.Path.prototype._updatePath.call(this))}}),u.polyline=function(e,o){return new u.Polyline(e,o)},u.PolyUtil={},u.PolyUtil.clipPolygon=function(e,o){var h,_=[1,4,2,8],y,S,T,U,O,V,q,ot,ht=u.LineUtil;for(y=0,V=e.length;y<V;y++)e[y]._code=ht._getBitCode(e[y],o);for(T=0;T<4;T++){for(q=_[T],h=[],y=0,V=e.length,S=V-1;y<V;S=y++)U=e[y],O=e[S],U._code&q?O._code&q||(ot=ht._getEdgeIntersection(O,U,q,o),ot._code=ht._getBitCode(ot,o),h.push(ot)):(O._code&q&&(ot=ht._getEdgeIntersection(O,U,q,o),ot._code=ht._getBitCode(ot,o),h.push(ot)),h.push(U));e=h}return e},u.Polygon=u.Polyline.extend({options:{fill:!0},initialize:function(e,o){u.Polyline.prototype.initialize.call(this,e,o),this._initWithHoles(e)},_initWithHoles:function(e){var o,h,_;if(e&&u.Util.isArray(e[0])&&typeof e[0][0]!="number")for(this._latlngs=this._convertLatLngs(e[0]),this._holes=e.slice(1),o=0,h=this._holes.length;o<h;o++)_=this._holes[o]=this._convertLatLngs(this._holes[o]),_[0].equals(_[_.length-1])&&_.pop();e=this._latlngs,e.length>=2&&e[0].equals(e[e.length-1])&&e.pop()},projectLatlngs:function(){if(u.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],!!this._holes){var e,o,h,_;for(e=0,h=this._holes.length;e<h;e++)for(this._holePoints[e]=[],o=0,_=this._holes[e].length;o<_;o++)this._holePoints[e][o]=this._map.latLngToLayerPoint(this._holes[e][o])}},setLatLngs:function(e){return e&&u.Util.isArray(e[0])&&typeof e[0][0]!="number"?(this._initWithHoles(e),this.redraw()):u.Polyline.prototype.setLatLngs.call(this,e)},_clipPoints:function(){var e=this._originalPoints,o=[];if(this._parts=[e].concat(this._holePoints),!this.options.noClip){for(var h=0,_=this._parts.length;h<_;h++){var y=u.PolyUtil.clipPolygon(this._parts[h],this._map._pathViewport);y.length&&o.push(y)}this._parts=o}},_getPathPartStr:function(e){var o=u.Polyline.prototype._getPathPartStr.call(this,e);return o+(u.Browser.svg?"z":"x")}}),u.polygon=function(e,o){return new u.Polygon(e,o)},function(){function e(o){return u.FeatureGroup.extend({initialize:function(h,_){this._layers={},this._options=_,this.setLatLngs(h)},setLatLngs:function(h){var _=0,y=h.length;for(this.eachLayer(function(S){_<y?S.setLatLngs(h[_++]):this.removeLayer(S)},this);_<y;)this.addLayer(new o(h[_++],this._options));return this},getLatLngs:function(){var h=[];return this.eachLayer(function(_){h.push(_.getLatLngs())}),h}})}u.MultiPolyline=e(u.Polyline),u.MultiPolygon=e(u.Polygon),u.multiPolyline=function(o,h){return new u.MultiPolyline(o,h)},u.multiPolygon=function(o,h){return new u.MultiPolygon(o,h)}}(),u.Rectangle=u.Polygon.extend({initialize:function(e,o){u.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(e),o)},setBounds:function(e){this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=u.latLngBounds(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}}),u.rectangle=function(e,o){return new u.Rectangle(e,o)},u.Circle=u.Path.extend({initialize:function(e,o,h){u.Path.prototype.initialize.call(this,h),this._latlng=u.latLng(e),this._mRadius=o},options:{fill:!0},setLatLng:function(e){return this._latlng=u.latLng(e),this.redraw()},setRadius:function(e){return this._mRadius=e,this.redraw()},projectLatlngs:function(){var e=this._getLngRadius(),o=this._latlng,h=this._map.latLngToLayerPoint([o.lat,o.lng-e]);this._point=this._map.latLngToLayerPoint(o),this._radius=Math.max(this._point.x-h.x,1)},getBounds:function(){var e=this._getLngRadius(),o=this._mRadius/40075017*360,h=this._latlng;return new u.LatLngBounds([h.lat-o,h.lng-e],[h.lat+o,h.lng+e])},getLatLng:function(){return this._latlng},getPathString:function(){var e=this._point,o=this._radius;return this._checkIfEmpty()?"":u.Browser.svg?"M"+e.x+","+(e.y-o)+"A"+o+","+o+",0,1,1,"+(e.x-.1)+","+(e.y-o)+" z":(e._round(),o=Math.round(o),"AL "+e.x+","+e.y+" "+o+","+o+" 0,"+65535*360)},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(u.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var e=this._map._pathViewport,o=this._radius,h=this._point;return h.x-o>e.max.x||h.y-o>e.max.y||h.x+o<e.min.x||h.y+o<e.min.y}}),u.circle=function(e,o,h){return new u.Circle(e,o,h)},u.CircleMarker=u.Circle.extend({options:{radius:10,weight:2},initialize:function(e,o){u.Circle.prototype.initialize.call(this,e,null,o),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){u.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(e){return u.Circle.prototype.setLatLng.call(this,e),this._popup&&this._popup._isOpen&&this._popup.setLatLng(e),this},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius}}),u.circleMarker=function(e,o){return new u.CircleMarker(e,o)},u.Polyline.include(u.Path.CANVAS?{_containsPoint:function(e,o){var h,_,y,S,T,U,O,V=this.options.weight/2;for(u.Browser.touch&&(V+=10),h=0,S=this._parts.length;h<S;h++)for(O=this._parts[h],_=0,T=O.length,y=T-1;_<T;y=_++)if(!(!o&&_===0)&&(U=u.LineUtil.pointToSegmentDistance(e,O[y],O[_]),U<=V))return!0;return!1}}:{}),u.Polygon.include(u.Path.CANVAS?{_containsPoint:function(e){var o=!1,h,_,y,S,T,U,O,V;if(u.Polyline.prototype._containsPoint.call(this,e,!0))return!0;for(S=0,O=this._parts.length;S<O;S++)for(h=this._parts[S],T=0,V=h.length,U=V-1;T<V;U=T++)_=h[T],y=h[U],_.y>e.y!=y.y>e.y&&e.x<(y.x-_.x)*(e.y-_.y)/(y.y-_.y)+_.x&&(o=!o);return o}}:{}),u.Circle.include(u.Path.CANVAS?{_drawPath:function(){var e=this._point;this._ctx.beginPath(),this._ctx.arc(e.x,e.y,this._radius,0,Math.PI*2,!1)},_containsPoint:function(e){var o=this._point,h=this.options.stroke?this.options.weight/2:0;return e.distanceTo(o)<=this._radius+h}}:{}),u.CircleMarker.include(u.Path.CANVAS?{_updateStyle:function(){u.Path.prototype._updateStyle.call(this)}}:{}),u.GeoJSON=u.FeatureGroup.extend({initialize:function(e,o){u.setOptions(this,o),this._layers={},e&&this.addData(e)},addData:function(e){var o=u.Util.isArray(e)?e:e.features,h,_,y;if(o){for(h=0,_=o.length;h<_;h++)y=o[h],(y.geometries||y.geometry||y.features||y.coordinates)&&this.addData(o[h]);return this}var S=this.options;if(!(S.filter&&!S.filter(e))){var T=u.GeoJSON.geometryToLayer(e,S.pointToLayer,S.coordsToLatLng,S);return T.feature=u.GeoJSON.asFeature(e),T.defaultOptions=T.options,this.resetStyle(T),S.onEachFeature&&S.onEachFeature(e,T),this.addLayer(T)}},resetStyle:function(e){var o=this.options.style;o&&(u.Util.extend(e.options,e.defaultOptions),this._setLayerStyle(e,o))},setStyle:function(e){this.eachLayer(function(o){this._setLayerStyle(o,e)},this)},_setLayerStyle:function(e,o){typeof o=="function"&&(o=o(e.feature)),e.setStyle&&e.setStyle(o)}}),u.extend(u.GeoJSON,{geometryToLayer:function(e,o,h,_){var y=e.type==="Feature"?e.geometry:e,S=y.coordinates,T=[],U,O,V,q;switch(h=h||this.coordsToLatLng,y.type){case"Point":return U=h(S),o?o(e,U):new u.Marker(U);case"MultiPoint":for(V=0,q=S.length;V<q;V++)U=h(S[V]),T.push(o?o(e,U):new u.Marker(U));return new u.FeatureGroup(T);case"LineString":return O=this.coordsToLatLngs(S,0,h),new u.Polyline(O,_);case"Polygon":if(S.length===2&&!S[1].length)throw new Error("Invalid GeoJSON object.");return O=this.coordsToLatLngs(S,1,h),new u.Polygon(O,_);case"MultiLineString":return O=this.coordsToLatLngs(S,1,h),new u.MultiPolyline(O,_);case"MultiPolygon":return O=this.coordsToLatLngs(S,2,h),new u.MultiPolygon(O,_);case"GeometryCollection":for(V=0,q=y.geometries.length;V<q;V++)T.push(this.geometryToLayer({geometry:y.geometries[V],type:"Feature",properties:e.properties},o,h,_));return new u.FeatureGroup(T);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(e){return new u.LatLng(e[1],e[0],e[2])},coordsToLatLngs:function(e,o,h){var _,y,S,T=[];for(y=0,S=e.length;y<S;y++)_=o?this.coordsToLatLngs(e[y],o-1,h):(h||this.coordsToLatLng)(e[y]),T.push(_);return T},latLngToCoords:function(e){var o=[e.lng,e.lat];return e.alt!==nt&&o.push(e.alt),o},latLngsToCoords:function(e){for(var o=[],h=0,_=e.length;h<_;h++)o.push(u.GeoJSON.latLngToCoords(e[h]));return o},getFeature:function(e,o){return e.feature?u.extend({},e.feature,{geometry:o}):u.GeoJSON.asFeature(o)},asFeature:function(e){return e.type==="Feature"?e:{type:"Feature",properties:{},geometry:e}}});var Nt={toGeoJSON:function(){return u.GeoJSON.getFeature(this,{type:"Point",coordinates:u.GeoJSON.latLngToCoords(this.getLatLng())})}};u.Marker.include(Nt),u.Circle.include(Nt),u.CircleMarker.include(Nt),u.Polyline.include({toGeoJSON:function(){return u.GeoJSON.getFeature(this,{type:"LineString",coordinates:u.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),u.Polygon.include({toGeoJSON:function(){var e=[u.GeoJSON.latLngsToCoords(this.getLatLngs())],o,h,_;if(e[0].push(e[0][0]),this._holes)for(o=0,h=this._holes.length;o<h;o++)_=u.GeoJSON.latLngsToCoords(this._holes[o]),_.push(_[0]),e.push(_);return u.GeoJSON.getFeature(this,{type:"Polygon",coordinates:e})}}),function(){function e(o){return function(){var h=[];return this.eachLayer(function(_){h.push(_.toGeoJSON().geometry.coordinates)}),u.GeoJSON.getFeature(this,{type:o,coordinates:h})}}u.MultiPolyline.include({toGeoJSON:e("MultiLineString")}),u.MultiPolygon.include({toGeoJSON:e("MultiPolygon")}),u.LayerGroup.include({toGeoJSON:function(){var o=this.feature&&this.feature.geometry,h=[],_;if(o&&o.type==="MultiPoint")return e("MultiPoint").call(this);var y=o&&o.type==="GeometryCollection";return this.eachLayer(function(S){S.toGeoJSON&&(_=S.toGeoJSON(),h.push(y?_.geometry:u.GeoJSON.asFeature(_)))}),y?u.GeoJSON.getFeature(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}})}(),u.geoJson=function(e,o){return new u.GeoJSON(e,o)},u.DomEvent={addListener:function(e,o,h,_){var y=u.stamp(h),S="_leaflet_"+o+y,T,U,O;return e[S]?this:(T=function(V){return h.call(_||e,V||u.DomEvent._getEvent())},u.Browser.pointer&&o.indexOf("touch")===0?this.addPointerListener(e,o,T,y):(u.Browser.touch&&o==="dblclick"&&this.addDoubleTapListener&&this.addDoubleTapListener(e,T,y),"addEventListener"in e?o==="mousewheel"?(e.addEventListener("DOMMouseScroll",T,!1),e.addEventListener(o,T,!1)):o==="mouseenter"||o==="mouseleave"?(U=T,O=o==="mouseenter"?"mouseover":"mouseout",T=function(V){if(!!u.DomEvent._checkMouse(e,V))return U(V)},e.addEventListener(O,T,!1)):(o==="click"&&u.Browser.android&&(U=T,T=function(V){return u.DomEvent._filterClick(V,U)}),e.addEventListener(o,T,!1)):"attachEvent"in e&&e.attachEvent("on"+o,T),e[S]=T,this))},removeListener:function(e,o,h){var _=u.stamp(h),y="_leaflet_"+o+_,S=e[y];return S?(u.Browser.pointer&&o.indexOf("touch")===0?this.removePointerListener(e,o,_):u.Browser.touch&&o==="dblclick"&&this.removeDoubleTapListener?this.removeDoubleTapListener(e,_):"removeEventListener"in e?o==="mousewheel"?(e.removeEventListener("DOMMouseScroll",S,!1),e.removeEventListener(o,S,!1)):o==="mouseenter"||o==="mouseleave"?e.removeEventListener(o==="mouseenter"?"mouseover":"mouseout",S,!1):e.removeEventListener(o,S,!1):"detachEvent"in e&&e.detachEvent("on"+o,S),e[y]=null,this):this},stopPropagation:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,u.DomEvent._skipped(e),this},disableScrollPropagation:function(e){var o=u.DomEvent.stopPropagation;return u.DomEvent.on(e,"mousewheel",o).on(e,"MozMousePixelScroll",o)},disableClickPropagation:function(e){for(var o=u.DomEvent.stopPropagation,h=u.Draggable.START.length-1;h>=0;h--)u.DomEvent.on(e,u.Draggable.START[h],o);return u.DomEvent.on(e,"click",u.DomEvent._fakeStop).on(e,"dblclick",o)},preventDefault:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this},stop:function(e){return u.DomEvent.preventDefault(e).stopPropagation(e)},getMousePosition:function(e,o){if(!o)return new u.Point(e.clientX,e.clientY);var h=o.getBoundingClientRect();return new u.Point(e.clientX-h.left-o.clientLeft,e.clientY-h.top-o.clientTop)},getWheelDelta:function(e){var o=0;return e.wheelDelta&&(o=e.wheelDelta/120),e.detail&&(o=-e.detail/3),o},_skipEvents:{},_fakeStop:function(e){u.DomEvent._skipEvents[e.type]=!0},_skipped:function(e){var o=this._skipEvents[e.type];return this._skipEvents[e.type]=!1,o},_checkMouse:function(e,o){var h=o.relatedTarget;if(!h)return!0;try{for(;h&&h!==e;)h=h.parentNode}catch(_){return!1}return h!==e},_getEvent:function(){var e=m.event;if(!e)for(var o=arguments.callee.caller;o&&(e=o.arguments[0],!(e&&m.Event===e.constructor));)o=o.caller;return e},_filterClick:function(e,o){var h=e.timeStamp||e.originalEvent.timeStamp,_=u.DomEvent._lastClick&&h-u.DomEvent._lastClick;if(_&&_>100&&_<500||e.target._simulatedClick&&!e._simulated){u.DomEvent.stop(e);return}return u.DomEvent._lastClick=h,o(e)}},u.DomEvent.on=u.DomEvent.addListener,u.DomEvent.off=u.DomEvent.removeListener,u.Draggable=u.Class.extend({includes:u.Mixin.Events,statics:{START:u.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(e,o){this._element=e,this._dragStartTarget=o||e},enable:function(){if(!this._enabled){for(var e=u.Draggable.START.length-1;e>=0;e--)u.DomEvent.on(this._dragStartTarget,u.Draggable.START[e],this._onDown,this);this._enabled=!0}},disable:function(){if(!!this._enabled){for(var e=u.Draggable.START.length-1;e>=0;e--)u.DomEvent.off(this._dragStartTarget,u.Draggable.START[e],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(e){if(this._moved=!1,!(e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)&&(u.DomEvent.stopPropagation(e),!u.Draggable._disabled&&(u.DomUtil.disableImageDrag(),u.DomUtil.disableTextSelection(),!this._moving))){var o=e.touches?e.touches[0]:e;this._startPoint=new u.Point(o.clientX,o.clientY),this._startPos=this._newPos=u.DomUtil.getPosition(this._element),u.DomEvent.on(J,u.Draggable.MOVE[e.type],this._onMove,this).on(J,u.Draggable.END[e.type],this._onUp,this)}},_onMove:function(e){if(e.touches&&e.touches.length>1){this._moved=!0;return}var o=e.touches&&e.touches.length===1?e.touches[0]:e,h=new u.Point(o.clientX,o.clientY),_=h.subtract(this._startPoint);!_.x&&!_.y||u.Browser.touch&&Math.abs(_.x)+Math.abs(_.y)<3||(u.DomEvent.preventDefault(e),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=u.DomUtil.getPosition(this._element).subtract(_),u.DomUtil.addClass(J.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,u.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(_),this._moving=!0,u.Util.cancelAnimFrame(this._animRequest),this._animRequest=u.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))},_updatePosition:function(){this.fire("predrag"),u.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){u.DomUtil.removeClass(J.body,"leaflet-dragging"),this._lastTarget&&(u.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var e in u.Draggable.MOVE)u.DomEvent.off(J,u.Draggable.MOVE[e],this._onMove).off(J,u.Draggable.END[e],this._onUp);u.DomUtil.enableImageDrag(),u.DomUtil.enableTextSelection(),this._moved&&this._moving&&(u.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),u.Handler=u.Class.extend({initialize:function(e){this._map=e},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){!this._enabled||(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),u.Map.mergeOptions({dragging:!0,inertia:!u.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:u.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),u.Map.Drag=u.Handler.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new u.Draggable(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),e.on("viewreset",this._onViewReset,this),e.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var e=this._map;e._panAnim&&e._panAnim.stop(),e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var e=this._lastTime=+new Date,o=this._lastPos=this._draggable._newPos;this._positions.push(o),this._times.push(e),e-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var e=this._map.getSize()._divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(e).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var e=this._worldWidth,o=Math.round(e/2),h=this._initialWorldOffset,_=this._draggable._newPos.x,y=(_-o+h)%e+o-h,S=(_+o+h)%e-o-h,T=Math.abs(y+h)<Math.abs(S+h)?y:S;this._draggable._newPos.x=T},_onDragEnd:function(e){var o=this._map,h=o.options,_=+new Date-this._lastTime,y=!h.inertia||_>h.inertiaThreshold||!this._positions[0];if(o.fire("dragend",e),y)o.fire("moveend");else{var S=this._lastPos.subtract(this._positions[0]),T=(this._lastTime+_-this._times[0])/1e3,U=h.easeLinearity,O=S.multiplyBy(U/T),V=O.distanceTo([0,0]),q=Math.min(h.inertiaMaxSpeed,V),ot=O.multiplyBy(q/V),ht=q/(h.inertiaDeceleration*U),ut=ot.multiplyBy(-ht/2).round();!ut.x||!ut.y?o.fire("moveend"):(ut=o._limitOffset(ut,o.options.maxBounds),u.Util.requestAnimFrame(function(){o.panBy(ut,{duration:ht,easeLinearity:U,noMoveStart:!0})}))}}}),u.Map.addInitHook("addHandler","dragging",u.Map.Drag),u.Map.mergeOptions({doubleClickZoom:!0}),u.Map.DoubleClickZoom=u.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var o=this._map,h=o.getZoom()+(e.originalEvent.shiftKey?-1:1);o.options.doubleClickZoom==="center"?o.setZoom(h):o.setZoomAround(e.containerPoint,h)}}),u.Map.addInitHook("addHandler","doubleClickZoom",u.Map.DoubleClickZoom),u.Map.mergeOptions({scrollWheelZoom:!0}),u.Map.ScrollWheelZoom=u.Handler.extend({addHooks:function(){u.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),u.DomEvent.on(this._map._container,"MozMousePixelScroll",u.DomEvent.preventDefault),this._delta=0},removeHooks:function(){u.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),u.DomEvent.off(this._map._container,"MozMousePixelScroll",u.DomEvent.preventDefault)},_onWheelScroll:function(e){var o=u.DomEvent.getWheelDelta(e);this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var h=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u.bind(this._performZoom,this),h),u.DomEvent.preventDefault(e),u.DomEvent.stopPropagation(e)},_performZoom:function(){var e=this._map,o=this._delta,h=e.getZoom();o=o>0?Math.ceil(o):Math.floor(o),o=Math.max(Math.min(o,4),-4),o=e._limitZoom(h+o)-h,this._delta=0,this._startTime=null,!!o&&(e.options.scrollWheelZoom==="center"?e.setZoom(h+o):e.setZoomAround(this._lastMousePos,h+o))}}),u.Map.addInitHook("addHandler","scrollWheelZoom",u.Map.ScrollWheelZoom),u.extend(u.DomEvent,{_touchstart:u.Browser.msPointer?"MSPointerDown":u.Browser.pointer?"pointerdown":"touchstart",_touchend:u.Browser.msPointer?"MSPointerUp":u.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(e,o,h){var _,y=!1,S=250,T,U="_leaflet_",O=this._touchstart,V=this._touchend,q=[];function ot(zt){var bt;if(u.Browser.pointer?(q.push(zt.pointerId),bt=q.length):bt=zt.touches.length,!(bt>1)){var Mt=Date.now(),Lt=Mt-(_||Mt);T=zt.touches?zt.touches[0]:zt,y=Lt>0&&Lt<=S,_=Mt}}function ht(zt){if(u.Browser.pointer){var bt=q.indexOf(zt.pointerId);if(bt===-1)return;q.splice(bt,1)}if(y){if(u.Browser.pointer){var Mt={},Lt;for(var ee in T)Lt=T[ee],typeof Lt=="function"?Mt[ee]=Lt.bind(T):Mt[ee]=Lt;T=Mt}T.type="dblclick",o(T),_=null}}e[U+O+h]=ot,e[U+V+h]=ht;var ut=u.Browser.pointer?J.documentElement:e;return e.addEventListener(O,ot,!1),ut.addEventListener(V,ht,!1),u.Browser.pointer&&ut.addEventListener(u.DomEvent.POINTER_CANCEL,ht,!1),this},removeDoubleTapListener:function(e,o){var h="_leaflet_";return e.removeEventListener(this._touchstart,e[h+this._touchstart+o],!1),(u.Browser.pointer?J.documentElement:e).removeEventListener(this._touchend,e[h+this._touchend+o],!1),u.Browser.pointer&&J.documentElement.removeEventListener(u.DomEvent.POINTER_CANCEL,e[h+this._touchend+o],!1),this}}),u.extend(u.DomEvent,{POINTER_DOWN:u.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:u.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:u.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:u.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(e,o,h,_){switch(o){case"touchstart":return this.addPointerListenerStart(e,o,h,_);case"touchend":return this.addPointerListenerEnd(e,o,h,_);case"touchmove":return this.addPointerListenerMove(e,o,h,_);default:throw"Unknown touch event type"}},addPointerListenerStart:function(e,o,h,_){var y="_leaflet_",S=this._pointers,T=function(O){u.DomEvent.preventDefault(O);for(var V=!1,q=0;q<S.length;q++)if(S[q].pointerId===O.pointerId){V=!0;break}V||S.push(O),O.touches=S.slice(),O.changedTouches=[O],h(O)};if(e[y+"touchstart"+_]=T,e.addEventListener(this.POINTER_DOWN,T,!1),!this._pointerDocumentListener){var U=function(O){for(var V=0;V<S.length;V++)if(S[V].pointerId===O.pointerId){S.splice(V,1);break}};J.documentElement.addEventListener(this.POINTER_UP,U,!1),J.documentElement.addEventListener(this.POINTER_CANCEL,U,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(e,o,h,_){var y="_leaflet_",S=this._pointers;function T(U){if(!((U.pointerType===U.MSPOINTER_TYPE_MOUSE||U.pointerType==="mouse")&&U.buttons===0)){for(var O=0;O<S.length;O++)if(S[O].pointerId===U.pointerId){S[O]=U;break}U.touches=S.slice(),U.changedTouches=[U],h(U)}}return e[y+"touchmove"+_]=T,e.addEventListener(this.POINTER_MOVE,T,!1),this},addPointerListenerEnd:function(e,o,h,_){var y="_leaflet_",S=this._pointers,T=function(U){for(var O=0;O<S.length;O++)if(S[O].pointerId===U.pointerId){S.splice(O,1);break}U.touches=S.slice(),U.changedTouches=[U],h(U)};return e[y+"touchend"+_]=T,e.addEventListener(this.POINTER_UP,T,!1),e.addEventListener(this.POINTER_CANCEL,T,!1),this},removePointerListener:function(e,o,h){var _="_leaflet_",y=e[_+o+h];switch(o){case"touchstart":e.removeEventListener(this.POINTER_DOWN,y,!1);break;case"touchmove":e.removeEventListener(this.POINTER_MOVE,y,!1);break;case"touchend":e.removeEventListener(this.POINTER_UP,y,!1),e.removeEventListener(this.POINTER_CANCEL,y,!1);break}return this}}),u.Map.mergeOptions({touchZoom:u.Browser.touch&&!u.Browser.android23,bounceAtZoomLimits:!0}),u.Map.TouchZoom=u.Handler.extend({addHooks:function(){u.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){u.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var o=this._map;if(!(!e.touches||e.touches.length!==2||o._animatingZoom||this._zooming)){var h=o.mouseEventToLayerPoint(e.touches[0]),_=o.mouseEventToLayerPoint(e.touches[1]),y=o._getCenterLayerPoint();this._startCenter=h.add(_)._divideBy(2),this._startDist=h.distanceTo(_),this._moved=!1,this._zooming=!0,this._centerOffset=y.subtract(this._startCenter),o._panAnim&&o._panAnim.stop(),u.DomEvent.on(J,"touchmove",this._onTouchMove,this).on(J,"touchend",this._onTouchEnd,this),u.DomEvent.preventDefault(e)}},_onTouchMove:function(e){var o=this._map;if(!(!e.touches||e.touches.length!==2||!this._zooming)){var h=o.mouseEventToLayerPoint(e.touches[0]),_=o.mouseEventToLayerPoint(e.touches[1]);this._scale=h.distanceTo(_)/this._startDist,this._delta=h._add(_)._divideBy(2)._subtract(this._startCenter),this._scale!==1&&(!o.options.bounceAtZoomLimits&&(o.getZoom()===o.getMinZoom()&&this._scale<1||o.getZoom()===o.getMaxZoom()&&this._scale>1)||(this._moved||(u.DomUtil.addClass(o._mapPane,"leaflet-touching"),o.fire("movestart").fire("zoomstart"),this._moved=!0),u.Util.cancelAnimFrame(this._animRequest),this._animRequest=u.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),u.DomEvent.preventDefault(e)))}},_updateOnMove:function(){var e=this._map,o=this._getScaleOrigin(),h=e.layerPointToLatLng(o),_=e.getScaleZoom(this._scale);e._animateZoom(h,_,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}var e=this._map;this._zooming=!1,u.DomUtil.removeClass(e._mapPane,"leaflet-touching"),u.Util.cancelAnimFrame(this._animRequest),u.DomEvent.off(J,"touchmove",this._onTouchMove).off(J,"touchend",this._onTouchEnd);var o=this._getScaleOrigin(),h=e.layerPointToLatLng(o),_=e.getZoom(),y=e.getScaleZoom(this._scale)-_,S=y>0?Math.ceil(y):Math.floor(y),T=e._limitZoom(_+S),U=e.getZoomScale(T)/this._scale;e._animateZoom(h,T,o,U)},_getScaleOrigin:function(){var e=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(e)}}),u.Map.addInitHook("addHandler","touchZoom",u.Map.TouchZoom),u.Map.mergeOptions({tap:!0,tapTolerance:15}),u.Map.Tap=u.Handler.extend({addHooks:function(){u.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){u.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(!!e.touches){if(u.DomEvent.preventDefault(e),this._fireClick=!0,e.touches.length>1){this._fireClick=!1,clearTimeout(this._holdTimeout);return}var o=e.touches[0],h=o.target;this._startPos=this._newPos=new u.Point(o.clientX,o.clientY),h.tagName&&h.tagName.toLowerCase()==="a"&&u.DomUtil.addClass(h,"leaflet-active"),this._holdTimeout=setTimeout(u.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",o))},this),1e3),u.DomEvent.on(J,"touchmove",this._onMove,this).on(J,"touchend",this._onUp,this)}},_onUp:function(e){if(clearTimeout(this._holdTimeout),u.DomEvent.off(J,"touchmove",this._onMove,this).off(J,"touchend",this._onUp,this),this._fireClick&&e&&e.changedTouches){var o=e.changedTouches[0],h=o.target;h&&h.tagName&&h.tagName.toLowerCase()==="a"&&u.DomUtil.removeClass(h,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",o)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(e){var o=e.touches[0];this._newPos=new u.Point(o.clientX,o.clientY)},_simulateEvent:function(e,o){var h=J.createEvent("MouseEvents");h._simulated=!0,o.target._simulatedClick=!0,h.initMouseEvent(e,!0,!0,m,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),o.target.dispatchEvent(h)}}),u.Browser.touch&&!u.Browser.pointer&&u.Map.addInitHook("addHandler","tap",u.Map.Tap),u.Map.mergeOptions({boxZoom:!0}),u.Map.BoxZoom=u.Handler.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._moved=!1},addHooks:function(){u.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){u.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(e){if(this._moved=!1,!e.shiftKey||e.which!==1&&e.button!==1)return!1;u.DomUtil.disableTextSelection(),u.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(e),u.DomEvent.on(J,"mousemove",this._onMouseMove,this).on(J,"mouseup",this._onMouseUp,this).on(J,"keydown",this._onKeyDown,this)},_onMouseMove:function(e){this._moved||(this._box=u.DomUtil.create("div","leaflet-zoom-box",this._pane),u.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var o=this._startLayerPoint,h=this._box,_=this._map.mouseEventToLayerPoint(e),y=_.subtract(o),S=new u.Point(Math.min(_.x,o.x),Math.min(_.y,o.y));u.DomUtil.setPosition(h,S),this._moved=!0,h.style.width=Math.max(0,Math.abs(y.x)-4)+"px",h.style.height=Math.max(0,Math.abs(y.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),u.DomUtil.enableTextSelection(),u.DomUtil.enableImageDrag(),u.DomEvent.off(J,"mousemove",this._onMouseMove).off(J,"mouseup",this._onMouseUp).off(J,"keydown",this._onKeyDown)},_onMouseUp:function(e){this._finish();var o=this._map,h=o.mouseEventToLayerPoint(e);if(!this._startLayerPoint.equals(h)){var _=new u.LatLngBounds(o.layerPointToLatLng(this._startLayerPoint),o.layerPointToLatLng(h));o.fitBounds(_),o.fire("boxzoomend",{boxZoomBounds:_})}},_onKeyDown:function(e){e.keyCode===27&&this._finish()}}),u.Map.addInitHook("addHandler","boxZoom",u.Map.BoxZoom),u.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),u.Map.Keyboard=u.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(e){this._map=e,this._setPanOffset(e.options.keyboardPanOffset),this._setZoomOffset(e.options.keyboardZoomOffset)},addHooks:function(){var e=this._map._container;e.tabIndex===-1&&(e.tabIndex="0"),u.DomEvent.on(e,"focus",this._onFocus,this).on(e,"blur",this._onBlur,this).on(e,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var e=this._map._container;u.DomEvent.off(e,"focus",this._onFocus,this).off(e,"blur",this._onBlur,this).off(e,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var e=J.body,o=J.documentElement,h=e.scrollTop||o.scrollTop,_=e.scrollLeft||o.scrollLeft;this._map._container.focus(),m.scrollTo(_,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(e){var o=this._panKeys={},h=this.keyCodes,_,y;for(_=0,y=h.left.length;_<y;_++)o[h.left[_]]=[-1*e,0];for(_=0,y=h.right.length;_<y;_++)o[h.right[_]]=[e,0];for(_=0,y=h.down.length;_<y;_++)o[h.down[_]]=[0,e];for(_=0,y=h.up.length;_<y;_++)o[h.up[_]]=[0,-1*e]},_setZoomOffset:function(e){var o=this._zoomKeys={},h=this.keyCodes,_,y;for(_=0,y=h.zoomIn.length;_<y;_++)o[h.zoomIn[_]]=e;for(_=0,y=h.zoomOut.length;_<y;_++)o[h.zoomOut[_]]=-e},_addHooks:function(){u.DomEvent.on(J,"keydown",this._onKeyDown,this)},_removeHooks:function(){u.DomEvent.off(J,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){var o=e.keyCode,h=this._map;if(o in this._panKeys){if(h._panAnim&&h._panAnim._inProgress)return;h.panBy(this._panKeys[o]),h.options.maxBounds&&h.panInsideBounds(h.options.maxBounds)}else if(o in this._zoomKeys)h.setZoom(h.getZoom()+this._zoomKeys[o]);else return;u.DomEvent.stop(e)}}),u.Map.addInitHook("addHandler","keyboard",u.Map.Keyboard),u.Handler.MarkerDrag=u.Handler.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new u.Draggable(e,e)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),u.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),u.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var e=this._marker,o=e._shadow,h=u.DomUtil.getPosition(e._icon),_=e._map.layerPointToLatLng(h);o&&u.DomUtil.setPosition(o,h),e._latlng=_,e.fire("move",{latlng:_}).fire("drag")},_onDragEnd:function(e){this._marker.fire("moveend").fire("dragend",e)}}),u.Control=u.Class.extend({options:{position:"topright"},initialize:function(e){u.setOptions(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var o=this._map;return o&&o.removeControl(this),this.options.position=e,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this._map=e;var o=this._container=this.onAdd(e),h=this.getPosition(),_=e._controlCorners[h];return u.DomUtil.addClass(o,"leaflet-control"),h.indexOf("bottom")!==-1?_.insertBefore(o,_.firstChild):_.appendChild(o),this},removeFrom:function(e){var o=this.getPosition(),h=e._controlCorners[o];return h.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(e),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),u.control=function(e){return new u.Control(e)},u.Map.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.removeFrom(this),this},_initControlPos:function(){var e=this._controlCorners={},o="leaflet-",h=this._controlContainer=u.DomUtil.create("div",o+"control-container",this._container);function _(y,S){var T=o+y+" "+o+S;e[y+S]=u.DomUtil.create("div",T,h)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),u.Control.Zoom=u.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(e){var o="leaflet-control-zoom",h=u.DomUtil.create("div",o+" leaflet-bar");return this._map=e,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,o+"-in",h,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,o+"-out",h,this._zoomOut,this),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(e){this._map.zoomIn(e.shiftKey?3:1)},_zoomOut:function(e){this._map.zoomOut(e.shiftKey?3:1)},_createButton:function(e,o,h,_,y,S){var T=u.DomUtil.create("a",h,_);T.innerHTML=e,T.href="#",T.title=o;var U=u.DomEvent.stopPropagation;return u.DomEvent.on(T,"click",U).on(T,"mousedown",U).on(T,"dblclick",U).on(T,"click",u.DomEvent.preventDefault).on(T,"click",y,S).on(T,"click",this._refocusOnMap,S),T},_updateDisabled:function(){var e=this._map,o="leaflet-disabled";u.DomUtil.removeClass(this._zoomInButton,o),u.DomUtil.removeClass(this._zoomOutButton,o),e._zoom===e.getMinZoom()&&u.DomUtil.addClass(this._zoomOutButton,o),e._zoom===e.getMaxZoom()&&u.DomUtil.addClass(this._zoomInButton,o)}}),u.Map.mergeOptions({zoomControl:!0}),u.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new u.Control.Zoom,this.addControl(this.zoomControl))}),u.control.zoom=function(e){return new u.Control.Zoom(e)},u.Control.Attribution=u.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(e){u.setOptions(this,e),this._attributions={}},onAdd:function(e){this._container=u.DomUtil.create("div","leaflet-control-attribution"),u.DomEvent.disableClickPropagation(this._container);for(var o in e._layers)e._layers[o].getAttribution&&this.addAttribution(e._layers[o].getAttribution());return e.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(e){e.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){if(!!e)return this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this},removeAttribution:function(e){if(!!e)return this._attributions[e]&&(this._attributions[e]--,this._update()),this},_update:function(){if(!!this._map){var e=[];for(var o in this._attributions)this._attributions[o]&&e.push(o);var h=[];this.options.prefix&&h.push(this.options.prefix),e.length&&h.push(e.join(", ")),this._container.innerHTML=h.join(" | ")}},_onLayerAdd:function(e){e.layer.getAttribution&&this.addAttribution(e.layer.getAttribution())},_onLayerRemove:function(e){e.layer.getAttribution&&this.removeAttribution(e.layer.getAttribution())}}),u.Map.mergeOptions({attributionControl:!0}),u.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=new u.Control.Attribution().addTo(this))}),u.control.attribution=function(e){return new u.Control.Attribution(e)},u.Control.Scale=u.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(e){this._map=e;var o="leaflet-control-scale",h=u.DomUtil.create("div",o),_=this.options;return this._addScales(_,o,h),e.on(_.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),h},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,o,h){e.metric&&(this._mScale=u.DomUtil.create("div",o+"-line",h)),e.imperial&&(this._iScale=u.DomUtil.create("div",o+"-line",h))},_update:function(){var e=this._map.getBounds(),o=e.getCenter().lat,h=6378137*Math.PI*Math.cos(o*Math.PI/180),_=h*(e.getNorthEast().lng-e.getSouthWest().lng)/180,y=this._map.getSize(),S=this.options,T=0;y.x>0&&(T=_*(S.maxWidth/y.x)),this._updateScales(S,T)},_updateScales:function(e,o){e.metric&&o&&this._updateMetric(o),e.imperial&&o&&this._updateImperial(o)},_updateMetric:function(e){var o=this._getRoundNum(e);this._mScale.style.width=this._getScaleWidth(o/e)+"px",this._mScale.innerHTML=o<1e3?o+" m":o/1e3+" km"},_updateImperial:function(e){var o=e*3.2808399,h=this._iScale,_,y,S;o>5280?(_=o/5280,y=this._getRoundNum(_),h.style.width=this._getScaleWidth(y/_)+"px",h.innerHTML=y+" mi"):(S=this._getRoundNum(o),h.style.width=this._getScaleWidth(S/o)+"px",h.innerHTML=S+" ft")},_getScaleWidth:function(e){return Math.round(this.options.maxWidth*e)-10},_getRoundNum:function(e){var o=Math.pow(10,(Math.floor(e)+"").length-1),h=e/o;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,o*h}}),u.control.scale=function(e){return new u.Control.Scale(e)},u.Control.Layers=u.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(e,o,h){u.setOptions(this,h),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var _ in e)this._addLayer(e[_],_);for(_ in o)this._addLayer(o[_],_,!0)},onAdd:function(e){return this._initLayout(),this._update(),e.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(e){e.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(e,o){return this._addLayer(e,o),this._update(),this},addOverlay:function(e,o){return this._addLayer(e,o,!0),this._update(),this},removeLayer:function(e){var o=u.stamp(e);return delete this._layers[o],this._update(),this},_initLayout:function(){var e="leaflet-control-layers",o=this._container=u.DomUtil.create("div",e);o.setAttribute("aria-haspopup",!0),u.Browser.touch?u.DomEvent.on(o,"click",u.DomEvent.stopPropagation):u.DomEvent.disableClickPropagation(o).disableScrollPropagation(o);var h=this._form=u.DomUtil.create("form",e+"-list");if(this.options.collapsed){u.Browser.android||u.DomEvent.on(o,"mouseover",this._expand,this).on(o,"mouseout",this._collapse,this);var _=this._layersLink=u.DomUtil.create("a",e+"-toggle",o);_.href="#",_.title="Layers",u.Browser.touch?u.DomEvent.on(_,"click",u.DomEvent.stop).on(_,"click",this._expand,this):u.DomEvent.on(_,"focus",this._expand,this),u.DomEvent.on(h,"click",function(){setTimeout(u.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=u.DomUtil.create("div",e+"-base",h),this._separator=u.DomUtil.create("div",e+"-separator",h),this._overlaysList=u.DomUtil.create("div",e+"-overlays",h),o.appendChild(h)},_addLayer:function(e,o,h){var _=u.stamp(e);this._layers[_]={layer:e,name:o,overlay:h},this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex))},_update:function(){if(!!this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var e=!1,o=!1,h,_;for(h in this._layers)_=this._layers[h],this._addItem(_),o=o||_.overlay,e=e||!_.overlay;this._separator.style.display=o&&e?"":"none"}},_onLayerChange:function(e){var o=this._layers[u.stamp(e.layer)];if(!!o){this._handlingClick||this._update();var h=o.overlay?e.type==="layeradd"?"overlayadd":"overlayremove":e.type==="layeradd"?"baselayerchange":null;h&&this._map.fire(h,o)}},_createRadioElement:function(e,o){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"';o&&(h+=' checked="checked"'),h+="/>";var _=J.createElement("div");return _.innerHTML=h,_.firstChild},_addItem:function(e){var o=J.createElement("label"),h,_=this._map.hasLayer(e.layer);e.overlay?(h=J.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=_):h=this._createRadioElement("leaflet-base-layers",_),h.layerId=u.stamp(e.layer),u.DomEvent.on(h,"click",this._onInputClick,this);var y=J.createElement("span");y.innerHTML=" "+e.name,o.appendChild(h),o.appendChild(y);var S=e.overlay?this._overlaysList:this._baseLayersList;return S.appendChild(o),o},_onInputClick:function(){var e,o,h,_=this._form.getElementsByTagName("input"),y=_.length;for(this._handlingClick=!0,e=0;e<y;e++)o=_[e],h=this._layers[o.layerId],o.checked&&!this._map.hasLayer(h.layer)?this._map.addLayer(h.layer):!o.checked&&this._map.hasLayer(h.layer)&&this._map.removeLayer(h.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){u.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),u.control.layers=function(e,o,h){return new u.Control.Layers(e,o,h)},u.PosAnimation=u.Class.extend({includes:u.Mixin.Events,run:function(e,o,h,_){this.stop(),this._el=e,this._inProgress=!0,this._newPos=o,this.fire("start"),e.style[u.DomUtil.TRANSITION]="all "+(h||.25)+"s cubic-bezier(0,0,"+(_||.5)+",1)",u.DomEvent.on(e,u.DomUtil.TRANSITION_END,this._onTransitionEnd,this),u.DomUtil.setPosition(e,o),u.Util.falseFn(e.offsetWidth),this._stepTimer=setInterval(u.bind(this._onStep,this),50)},stop:function(){!this._inProgress||(u.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),u.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var e=this._getPos();if(!e){this._onTransitionEnd();return}this._el._leaflet_pos=e,this.fire("step")},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var e,o,h,_=this._el,y=m.getComputedStyle(_);if(u.Browser.any3d){if(h=y[u.DomUtil.TRANSFORM].match(this._transformRe),!h)return;e=parseFloat(h[1]),o=parseFloat(h[2])}else e=parseFloat(y.left),o=parseFloat(y.top);return new u.Point(e,o,!0)},_onTransitionEnd:function(){u.DomEvent.off(this._el,u.DomUtil.TRANSITION_END,this._onTransitionEnd,this),!!this._inProgress&&(this._inProgress=!1,this._el.style[u.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),u.Map.include({setView:function(e,o,h){if(o=o===nt?this._zoom:this._limitZoom(o),e=this._limitCenter(u.latLng(e),o,this.options.maxBounds),h=h||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==nt&&(h.zoom=u.extend({animate:h.animate},h.zoom),h.pan=u.extend({animate:h.animate},h.pan));var _=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,o,h.zoom):this._tryAnimatedPan(e,h.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(e,o),this},panBy:function(e,o){if(e=u.point(e).round(),o=o||{},!e.x&&!e.y)return this;if(this._panAnim||(this._panAnim=new u.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){u.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(e);this._panAnim.run(this._mapPane,h,o.duration||.25,o.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){u.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,o){var h=this._getCenterOffset(e)._floor();return(o&&o.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,o),!0)}}),u.PosAnimation=u.DomUtil.TRANSITION?u.PosAnimation:u.PosAnimation.extend({run:function(e,o,h,_){this.stop(),this._el=e,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=u.DomUtil.getPosition(e),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(),this._complete())},_animate:function(){this._animId=u.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var e=+new Date-this._startTime,o=this._duration*1e3;e<o?this._runFrame(this._easeOut(e/o)):(this._runFrame(1),this._complete())},_runFrame:function(e){var o=this._startPos.add(this._offset.multiplyBy(e));u.DomUtil.setPosition(this._el,o),this.fire("step")},_complete:function(){u.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),u.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),u.DomUtil.TRANSITION&&u.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&u.DomUtil.TRANSITION&&u.Browser.any3d&&!u.Browser.android23&&!u.Browser.mobileOpera,this._zoomAnimated&&u.DomEvent.on(this._mapPane,u.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),u.Map.include(u.DomUtil.TRANSITION?{_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,o,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(o),y=this._getCenterOffset(e)._divideBy(1-1/_),S=this._getCenterLayerPoint()._add(y);return h.animate!==!0&&!this.getSize().contains(y)?!1:(this.fire("movestart").fire("zoomstart"),this._animateZoom(e,o,S,_,null,!0),!0)},_animateZoom:function(e,o,h,_,y,S,T){T||(this._animatingZoom=!0),u.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=e,this._animateToZoom=o,u.Draggable&&(u.Draggable._disabled=!0),u.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:e,zoom:o,origin:h,scale:_,delta:y,backwards:S}),setTimeout(u.bind(this._onZoomTransitionEnd,this),250)},this)},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._animatingZoom=!1,u.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),u.Draggable&&(u.Draggable._disabled=!1))}}:{}),u.TileLayer.include({_animateZoom:function(e){this._animating||(this._animating=!0,this._prepareBgBuffer());var o=this._bgBuffer,h=u.DomUtil.TRANSFORM,_=e.delta?u.DomUtil.getTranslateString(e.delta):o.style[h],y=u.DomUtil.getScaleString(e.scale,e.origin);o.style[h]=e.backwards?y+" "+_:_+" "+y},_endZoomAnim:function(){var e=this._tileContainer,o=this._bgBuffer;e.style.visibility="",e.parentNode.appendChild(e),u.Util.falseFn(o.offsetWidth);var h=this._map.getZoom();(h>this.options.maxZoom||h<this.options.minZoom)&&this._clearBgBuffer(),this._animating=!1},_clearBgBuffer:function(){var e=this._map;e&&!e._animatingZoom&&!e.touchZoom._zooming&&(this._bgBuffer.innerHTML="",this._bgBuffer.style[u.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var e=this._tileContainer,o=this._bgBuffer,h=this._getLoadedTilesPercentage(o),_=this._getLoadedTilesPercentage(e);if(o&&h>.5&&_<.5){e.style.visibility="hidden",this._stopLoadingImages(e);return}o.style.visibility="hidden",o.style[u.DomUtil.TRANSFORM]="",this._tileContainer=o,o=this._bgBuffer=e,this._stopLoadingImages(o),clearTimeout(this._clearBgBufferTimer)},_getLoadedTilesPercentage:function(e){var o=e.getElementsByTagName("img"),h,_,y=0;for(h=0,_=o.length;h<_;h++)o[h].complete&&y++;return y/_},_stopLoadingImages:function(e){var o=Array.prototype.slice.call(e.getElementsByTagName("img")),h,_,y;for(h=0,_=o.length;h<_;h++)y=o[h],y.complete||(y.onload=u.Util.falseFn,y.onerror=u.Util.falseFn,y.src=u.Util.emptyImageUrl,y.parentNode.removeChild(y))}}),u.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(e){if(e=this._locateOptions=u.extend(this._defaultLocateOptions,e),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=u.bind(this._handleGeolocationResponse,this),h=u.bind(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,h,e):navigator.geolocation.getCurrentPosition(o,h,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){var o=e.code,h=e.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+h+"."})},_handleGeolocationResponse:function(e){var o=e.coords.latitude,h=e.coords.longitude,_=new u.LatLng(o,h),y=180*e.coords.accuracy/40075017,S=y/Math.cos(u.LatLng.DEG_TO_RAD*o),T=u.latLngBounds([o-y,h-S],[o+y,h+S]),U=this._locateOptions;if(U.setView){var O=Math.min(this.getBoundsZoom(T),U.maxZoom);this.setView(_,O)}var V={latlng:_,bounds:T,timestamp:e.timestamp};for(var q in e.coords)typeof e.coords[q]=="number"&&(V[q]=e.coords[q]);this.fire("locationfound",V)}})})(window,document)});var gs=ds((zh,si)=>{(function(){var m={version:"3.5.14"},J=[].slice,nt=function(t){return J.call(t)},lt=this.document;function u(t){return t&&(t.ownerDocument||t.document||t).documentElement}function ct(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(lt)try{nt(lt.documentElement.childNodes)[0].nodeType}catch(t){nt=function(n){for(var i=n.length,r=new Array(i);i--;)r[i]=n[i];return r}}if(Date.now||(Date.now=function(){return+new Date}),lt)try{lt.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var Nt=this.Element.prototype,e=Nt.setAttribute,o=Nt.setAttributeNS,h=this.CSSStyleDeclaration.prototype,_=h.setProperty;Nt.setAttribute=function(n,i){e.call(this,n,i+"")},Nt.setAttributeNS=function(n,i,r){o.call(this,n,i,r+"")},h.setProperty=function(n,i,r){_.call(this,n,i+"",r)}}m.ascending=y;function y(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}m.descending=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN},m.min=function(t,n){var i=-1,r=t.length,a,s;if(arguments.length===1){for(;++i<r;)if((s=t[i])!=null&&s>=s){a=s;break}for(;++i<r;)(s=t[i])!=null&&a>s&&(a=s)}else{for(;++i<r;)if((s=n.call(t,t[i],i))!=null&&s>=s){a=s;break}for(;++i<r;)(s=n.call(t,t[i],i))!=null&&a>s&&(a=s)}return a},m.max=function(t,n){var i=-1,r=t.length,a,s;if(arguments.length===1){for(;++i<r;)if((s=t[i])!=null&&s>=s){a=s;break}for(;++i<r;)(s=t[i])!=null&&s>a&&(a=s)}else{for(;++i<r;)if((s=n.call(t,t[i],i))!=null&&s>=s){a=s;break}for(;++i<r;)(s=n.call(t,t[i],i))!=null&&s>a&&(a=s)}return a},m.extent=function(t,n){var i=-1,r=t.length,a,s,f;if(arguments.length===1){for(;++i<r;)if((s=t[i])!=null&&s>=s){a=f=s;break}for(;++i<r;)(s=t[i])!=null&&(a>s&&(a=s),f<s&&(f=s))}else{for(;++i<r;)if((s=n.call(t,t[i],i))!=null&&s>=s){a=f=s;break}for(;++i<r;)(s=n.call(t,t[i],i))!=null&&(a>s&&(a=s),f<s&&(f=s))}return[a,f]};function S(t){return t===null?NaN:+t}function T(t){return!isNaN(t)}m.sum=function(t,n){var i=0,r=t.length,a,s=-1;if(arguments.length===1)for(;++s<r;)T(a=+t[s])&&(i+=a);else for(;++s<r;)T(a=+n.call(t,t[s],s))&&(i+=a);return i},m.mean=function(t,n){var i=0,r=t.length,a,s=-1,f=r;if(arguments.length===1)for(;++s<r;)T(a=S(t[s]))?i+=a:--f;else for(;++s<r;)T(a=S(n.call(t,t[s],s)))?i+=a:--f;if(f)return i/f},m.quantile=function(t,n){var i=(t.length-1)*n+1,r=Math.floor(i),a=+t[r-1],s=i-r;return s?a+s*(t[r]-a):a},m.median=function(t,n){var i=[],r=t.length,a,s=-1;if(arguments.length===1)for(;++s<r;)T(a=S(t[s]))&&i.push(a);else for(;++s<r;)T(a=S(n.call(t,t[s],s)))&&i.push(a);if(i.length)return m.quantile(i.sort(y),.5)},m.variance=function(t,n){var i=t.length,r=0,a,s,f=0,l=-1,c=0;if(arguments.length===1)for(;++l<i;)T(a=S(t[l]))&&(s=a-r,r+=s/++c,f+=s*(a-r));else for(;++l<i;)T(a=S(n.call(t,t[l],l)))&&(s=a-r,r+=s/++c,f+=s*(a-r));if(c>1)return f/(c-1)},m.deviation=function(){var t=m.variance.apply(this,arguments);return t&&Math.sqrt(t)};function U(t){return{left:function(n,i,r,a){for(arguments.length<3&&(r=0),arguments.length<4&&(a=n.length);r<a;){var s=r+a>>>1;t(n[s],i)<0?r=s+1:a=s}return r},right:function(n,i,r,a){for(arguments.length<3&&(r=0),arguments.length<4&&(a=n.length);r<a;){var s=r+a>>>1;t(n[s],i)>0?a=s:r=s+1}return r}}}var O=U(y);m.bisectLeft=O.left,m.bisect=m.bisectRight=O.right,m.bisector=function(t){return U(t.length===1?function(n,i){return y(t(n),i)}:t)},m.shuffle=function(t,n,i){(r=arguments.length)<3&&(i=t.length,r<2&&(n=0));for(var r=i-n,a,s;r;)s=Math.random()*r--|0,a=t[r+n],t[r+n]=t[s+n],t[s+n]=a;return t},m.permute=function(t,n){for(var i=n.length,r=new Array(i);i--;)r[i]=t[n[i]];return r},m.pairs=function(t){for(var n=0,i=t.length-1,r,a=t[0],s=new Array(i<0?0:i);n<i;)s[n]=[r=a,a=t[++n]];return s},m.zip=function(){if(!(a=arguments.length))return[];for(var t=-1,n=m.min(arguments,V),i=new Array(n);++t<n;)for(var r=-1,a,s=i[t]=new Array(a);++r<a;)s[r]=arguments[r][t];return i};function V(t){return t.length}m.transpose=function(t){return m.zip.apply(m,t)},m.keys=function(t){var n=[];for(var i in t)n.push(i);return n},m.values=function(t){var n=[];for(var i in t)n.push(t[i]);return n},m.entries=function(t){var n=[];for(var i in t)n.push({key:i,value:t[i]});return n},m.merge=function(t){for(var n=t.length,i,r=-1,a=0,s,f;++r<n;)a+=t[r].length;for(s=new Array(a);--n>=0;)for(f=t[n],i=f.length;--i>=0;)s[--a]=f[i];return s};var q=Math.abs;m.range=function(t,n,i){if(arguments.length<3&&(i=1,arguments.length<2&&(n=t,t=0)),(n-t)/i==1/0)throw new Error("infinite range");var r=[],a=ot(q(i)),s=-1,f;if(t*=a,n*=a,i*=a,i<0)for(;(f=t+i*++s)>n;)r.push(f/a);else for(;(f=t+i*++s)<n;)r.push(f/a);return r};function ot(t){for(var n=1;t*n%1;)n*=10;return n}function ht(t,n){for(var i in n)Object.defineProperty(t.prototype,i,{value:n[i],enumerable:!1})}m.map=function(t,n){var i=new ut;if(t instanceof ut)t.forEach(function(l,c){i.set(l,c)});else if(Array.isArray(t)){var r=-1,a=t.length,s;if(arguments.length===1)for(;++r<a;)i.set(r,t[r]);else for(;++r<a;)i.set(n.call(t,s=t[r],r),s)}else for(var f in t)i.set(f,t[f]);return i};function ut(){this._=Object.create(null)}var zt="__proto__",bt="\0";ht(ut,{has:ee,get:function(t){return this._[Mt(t)]},set:function(t,n){return this._[Mt(t)]=n},remove:on,keys:Dr,values:function(){var t=[];for(var n in this._)t.push(this._[n]);return t},entries:function(){var t=[];for(var n in this._)t.push({key:Lt(n),value:this._[n]});return t},size:kr,empty:Ar,forEach:function(t){for(var n in this._)t.call(this,Lt(n),this._[n])}});function Mt(t){return(t+="")===zt||t[0]===bt?bt+t:t}function Lt(t){return(t+="")[0]===bt?t.slice(1):t}function ee(t){return Mt(t)in this._}function on(t){return(t=Mt(t))in this._&&delete this._[t]}function Dr(){var t=[];for(var n in this._)t.push(Lt(n));return t}function kr(){var t=0;for(var n in this._)++t;return t}function Ar(){for(var t in this._)return!1;return!0}m.nest=function(){var t={},n=[],i=[],r,a;function s(l,c,d){if(d>=n.length)return a?a.call(t,c):r?c.sort(r):c;for(var p=-1,g=c.length,v=n[d++],M,C,x,P=new ut,w;++p<g;)(w=P.get(M=v(C=c[p])))?w.push(C):P.set(M,[C]);return l?(C=l(),x=function(b,L){C.set(b,s(l,L,d))}):(C={},x=function(b,L){C[b]=s(l,L,d)}),P.forEach(x),C}function f(l,c){if(c>=n.length)return l;var d=[],p=i[c++];return l.forEach(function(g,v){d.push({key:g,values:f(v,c)})}),p?d.sort(function(g,v){return p(g.key,v.key)}):d}return t.map=function(l,c){return s(c,l,0)},t.entries=function(l){return f(s(m.map,l,0),0)},t.key=function(l){return n.push(l),t},t.sortKeys=function(l){return i[n.length-1]=l,t},t.sortValues=function(l){return r=l,t},t.rollup=function(l){return a=l,t},t},m.set=function(t){var n=new li;if(t)for(var i=0,r=t.length;i<r;++i)n.add(t[i]);return n};function li(){this._=Object.create(null)}ht(li,{has:ee,add:function(t){return this._[Mt(t+="")]=!0,t},remove:on,values:Dr,size:kr,empty:Ar,forEach:function(t){for(var n in this._)t.call(this,Lt(n))}}),m.behavior={};function mt(t){return t}m.rebind=function(t,n){for(var i=1,r=arguments.length,a;++i<r;)t[a=arguments[i]]=Ps(t,n,n[a]);return t};function Ps(t,n,i){return function(){var r=i.apply(n,arguments);return r===n?t:r}}function hi(t,n){if(n in t)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var i=0,r=Nr.length;i<r;++i){var a=Nr[i]+n;if(a in t)return a}}var Nr=["webkit","ms","moz","Moz","o","O"];function _t(){}m.dispatch=function(){for(var t=new fi,n=-1,i=arguments.length;++n<i;)t[arguments[n]]=zr(t);return t};function fi(){}fi.prototype.on=function(t,n){var i=t.indexOf("."),r="";if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t)return arguments.length<2?this[t].on(r):this[t].on(r,n);if(arguments.length===2){if(n==null)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}};function zr(t){var n=[],i=new ut;function r(){for(var a=n,s=-1,f=a.length,l;++s<f;)(l=a[s].on)&&l.apply(this,arguments);return t}return r.on=function(a,s){var f=i.get(a),l;return arguments.length<2?f&&f.on:(f&&(f.on=null,n=n.slice(0,l=n.indexOf(f)).concat(n.slice(l+1)),i.remove(a)),s&&n.push(i.set(a,{on:s})),t)},r}m.event=null;function ne(){m.event.preventDefault()}function ci(){for(var t=m.event,n;n=t.sourceEvent;)t=n;return t}function di(t){for(var n=new fi,i=0,r=arguments.length;++i<r;)n[arguments[i]]=zr(n);return n.of=function(a,s){return function(f){try{var l=f.sourceEvent=m.event;f.target=t,m.event=f,n[f.type].apply(a,s)}finally{m.event=l}}},n}m.requote=function(t){return t.replace(Ls,"\\$&")};var Ls=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,an={}.__proto__?function(t,n){t.__proto__=n}:function(t,n){for(var i in n)t[i]=n[i]};function ie(t){return an(t,it),t}var pi=function(t,n){return n.querySelector(t)},_i=function(t,n){return n.querySelectorAll(t)},sn=function(t,n){var i=t.matches||t[hi(t,"matchesSelector")];return sn=function(r,a){return i.call(r,a)},sn(t,n)};typeof Sizzle=="function"&&(pi=function(t,n){return Sizzle(t,n)[0]||null},_i=Sizzle,sn=Sizzle.matchesSelector),m.selection=function(){return m.select(lt.documentElement)};var it=m.selection.prototype=[];it.select=function(t){var n=[],i,r,a,s;t=gi(t);for(var f=-1,l=this.length;++f<l;){n.push(i=[]),i.parentNode=(a=this[f]).parentNode;for(var c=-1,d=a.length;++c<d;)(s=a[c])?(i.push(r=t.call(s,s.__data__,c,f)),r&&"__data__"in s&&(r.__data__=s.__data__)):i.push(null)}return ie(n)};function gi(t){return typeof t=="function"?t:function(){return pi(t,this)}}it.selectAll=function(t){var n=[],i,r;t=Ir(t);for(var a=-1,s=this.length;++a<s;)for(var f=this[a],l=-1,c=f.length;++l<c;)(r=f[l])&&(n.push(i=nt(t.call(r,r.__data__,l,a))),i.parentNode=r);return ie(n)};function Ir(t){return typeof t=="function"?t:function(){return _i(t,this)}}var mi={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};m.ns={prefix:mi,qualify:function(t){var n=t.indexOf(":"),i=t;return n>=0&&(i=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),mi.hasOwnProperty(i)?{space:mi[i],local:t}:t}},it.attr=function(t,n){if(arguments.length<2){if(typeof t=="string"){var i=this.node();return t=m.ns.qualify(t),t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}for(n in t)this.each(Ur(n,t[n]));return this}return this.each(Ur(t,n))};function Ur(t,n){t=m.ns.qualify(t);function i(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function a(){this.setAttribute(t,n)}function s(){this.setAttributeNS(t.space,t.local,n)}function f(){var c=n.apply(this,arguments);c==null?this.removeAttribute(t):this.setAttribute(t,c)}function l(){var c=n.apply(this,arguments);c==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,c)}return n==null?t.local?r:i:typeof n=="function"?t.local?l:f:t.local?s:a}function Br(t){return t.trim().replace(/\s+/g," ")}it.classed=function(t,n){if(arguments.length<2){if(typeof t=="string"){var i=this.node(),r=(t=Or(t)).length,a=-1;if(n=i.classList){for(;++a<r;)if(!n.contains(t[a]))return!1}else for(n=i.getAttribute("class");++a<r;)if(!Rr(t[a]).test(n))return!1;return!0}for(n in t)this.each(Zr(n,t[n]));return this}return this.each(Zr(t,n))};function Rr(t){return new RegExp("(?:^|\\s+)"+m.requote(t)+"(?:\\s+|$)","g")}function Or(t){return(t+"").trim().split(/^|\s+/)}function Zr(t,n){t=Or(t).map(Es);var i=t.length;function r(){for(var s=-1;++s<i;)t[s](this,n)}function a(){for(var s=-1,f=n.apply(this,arguments);++s<i;)t[s](this,f)}return typeof n=="function"?a:r}function Es(t){var n=Rr(t);return function(i,r){if(a=i.classList)return r?a.add(t):a.remove(t);var a=i.getAttribute("class")||"";r?(n.lastIndex=0,n.test(a)||i.setAttribute("class",Br(a+" "+t))):i.setAttribute("class",Br(a.replace(n," ")))}}it.style=function(t,n,i){var r=arguments.length;if(r<3){if(typeof t!="string"){r<2&&(n="");for(i in t)this.each(Fr(i,t[i],n));return this}if(r<2){var a=this.node();return ct(a).getComputedStyle(a,null).getPropertyValue(t)}i=""}return this.each(Fr(t,n,i))};function Fr(t,n,i){function r(){this.style.removeProperty(t)}function a(){this.style.setProperty(t,n,i)}function s(){var f=n.apply(this,arguments);f==null?this.style.removeProperty(t):this.style.setProperty(t,f,i)}return n==null?r:typeof n=="function"?s:a}it.property=function(t,n){if(arguments.length<2){if(typeof t=="string")return this.node()[t];for(n in t)this.each(Hr(n,t[n]));return this}return this.each(Hr(t,n))};function Hr(t,n){function i(){delete this[t]}function r(){this[t]=n}function a(){var s=n.apply(this,arguments);s==null?delete this[t]:this[t]=s}return n==null?i:typeof n=="function"?a:r}it.text=function(t){return arguments.length?this.each(typeof t=="function"?function(){var n=t.apply(this,arguments);this.textContent=n??""}:t==null?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},it.html=function(t){return arguments.length?this.each(typeof t=="function"?function(){var n=t.apply(this,arguments);this.innerHTML=n??""}:t==null?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},it.append=function(t){return t=qr(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})};function qr(t){function n(){var r=this.ownerDocument,a=this.namespaceURI;return a&&a!==r.documentElement.namespaceURI?r.createElementNS(a,t):r.createElement(t)}function i(){return this.ownerDocument.createElementNS(t.space,t.local)}return typeof t=="function"?t:(t=m.ns.qualify(t)).local?i:n}it.insert=function(t,n){return t=qr(t),n=gi(n),this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})},it.remove=function(){return this.each(Ss)};function Ss(){var t=this.parentNode;t&&t.removeChild(this)}it.data=function(t,n){var i=-1,r=this.length,a,s;if(!arguments.length){for(t=new Array(r=(a=this[0]).length);++i<r;)(s=a[i])&&(t[i]=s.__data__);return t}function f(p,g){var v,M=p.length,C=g.length,x=Math.min(M,C),P=new Array(C),w=new Array(C),b=new Array(M),L,E;if(n){var N=new ut,k=new Array(M),A;for(v=-1;++v<M;)(L=p[v])&&(N.has(A=n.call(L,L.__data__,v))?b[v]=L:N.set(A,L),k[v]=A);for(v=-1;++v<C;)(L=N.get(A=n.call(g,E=g[v],v)))?L!==!0&&(P[v]=L,L.__data__=E):w[v]=vi(E),N.set(A,!0);for(v=-1;++v<M;)v in k&&N.get(k[v])!==!0&&(b[v]=p[v])}else{for(v=-1;++v<x;)L=p[v],E=g[v],L?(L.__data__=E,P[v]=L):w[v]=vi(E);for(;v<C;++v)w[v]=vi(g[v]);for(;v<M;++v)b[v]=p[v]}w.update=P,w.parentNode=P.parentNode=b.parentNode=p.parentNode,l.push(w),c.push(P),d.push(b)}var l=Vr([]),c=ie([]),d=ie([]);if(typeof t=="function")for(;++i<r;)f(a=this[i],t.call(a,a.parentNode.__data__,i));else for(;++i<r;)f(a=this[i],t);return c.enter=function(){return l},c.exit=function(){return d},c};function vi(t){return{__data__:t}}it.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},it.filter=function(t){var n=[],i,r,a;typeof t!="function"&&(t=Wr(t));for(var s=0,f=this.length;s<f;s++){n.push(i=[]),i.parentNode=(r=this[s]).parentNode;for(var l=0,c=r.length;l<c;l++)(a=r[l])&&t.call(a,a.__data__,l,s)&&i.push(a)}return ie(n)};function Wr(t){return function(){return sn(this,t)}}it.order=function(){for(var t=-1,n=this.length;++t<n;)for(var i=this[t],r=i.length-1,a=i[r],s;--r>=0;)(s=i[r])&&(a&&a!==s.nextSibling&&a.parentNode.insertBefore(s,a),a=s);return this},it.sort=function(t){t=bs.apply(this,arguments);for(var n=-1,i=this.length;++n<i;)this[n].sort(t);return this.order()};function bs(t){return arguments.length||(t=y),function(n,i){return n&&i?t(n.__data__,i.__data__):!n-!i}}it.each=function(t){return Xt(this,function(n,i,r){t.call(n,n.__data__,i,r)})};function Xt(t,n){for(var i=0,r=t.length;i<r;i++)for(var a=t[i],s=0,f=a.length,l;s<f;s++)(l=a[s])&&n(l,s,i);return t}it.call=function(t){var n=nt(arguments);return t.apply(n[0]=this,n),this},it.empty=function(){return!this.node()},it.node=function(){for(var t=0,n=this.length;t<n;t++)for(var i=this[t],r=0,a=i.length;r<a;r++){var s=i[r];if(s)return s}return null},it.size=function(){var t=0;return Xt(this,function(){++t}),t};function Vr(t){return an(t,Jt),t}var Jt=[];m.selection.enter=Vr,m.selection.enter.prototype=Jt,Jt.append=it.append,Jt.empty=it.empty,Jt.node=it.node,Jt.call=it.call,Jt.size=it.size,Jt.select=function(t){for(var n=[],i,r,a,s,f,l=-1,c=this.length;++l<c;){a=(s=this[l]).update,n.push(i=[]),i.parentNode=s.parentNode;for(var d=-1,p=s.length;++d<p;)(f=s[d])?(i.push(a[d]=r=t.call(s.parentNode,f.__data__,d,l)),r.__data__=f.__data__):i.push(null)}return ie(n)},Jt.insert=function(t,n){return arguments.length<2&&(n=Cs(this)),it.insert.call(this,t,n)};function Cs(t){var n,i;return function(r,a,s){var f=t[s].update,l=f.length,c;for(s!=i&&(i=s,n=0),a>=n&&(n=a+1);!(c=f[n])&&++n<l;);return c}}m.select=function(t){var n;return typeof t=="string"?(n=[pi(t,lt)],n.parentNode=lt.documentElement):(n=[t],n.parentNode=u(t)),ie([n])},m.selectAll=function(t){var n;return typeof t=="string"?(n=nt(_i(t,lt)),n.parentNode=lt.documentElement):(n=nt(t),n.parentNode=null),ie([n])},it.on=function(t,n,i){var r=arguments.length;if(r<3){if(typeof t!="string"){r<2&&(n=!1);for(i in t)this.each(Gr(i,t[i],n));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;i=!1}return this.each(Gr(t,n,i))};function Gr(t,n,i){var r="__on"+t,a=t.indexOf("."),s=Yr;a>0&&(t=t.slice(0,a));var f=yi.get(t);f&&(t=f,s=Ts);function l(){var p=this[r];p&&(this.removeEventListener(t,p,p.$),delete this[r])}function c(){var p=s(n,nt(arguments));l.call(this),this.addEventListener(t,this[r]=p,p.$=i),p._=n}function d(){var p=new RegExp("^__on([^.]+)"+m.requote(t)+"$"),g;for(var v in this)if(g=v.match(p)){var M=this[v];this.removeEventListener(g[1],M,M.$),delete this[v]}}return a?n?c:l:n?_t:d}var yi=m.map({mouseenter:"mouseover",mouseleave:"mouseout"});lt&&yi.forEach(function(t){"on"+t in lt&&yi.remove(t)});function Yr(t,n){return function(i){var r=m.event;m.event=i,n[0]=this.__data__;try{t.apply(this,n)}finally{m.event=r}}}function Ts(t,n){var i=Yr(t,n);return function(r){var a=this,s=r.relatedTarget;(!s||s!==a&&!(s.compareDocumentPosition(a)&8))&&i.call(a,r)}}var ce,Ds=0;function un(t){var n=".dragsuppress-"+ ++Ds,i="click"+n,r=m.select(ct(t)).on("touchmove"+n,ne).on("dragstart"+n,ne).on("selectstart"+n,ne);if(ce==null&&(ce="onselectstart"in t?!1:hi(t.style,"userSelect")),ce){var a=u(t).style,s=a[ce];a[ce]="none"}return function(f){if(r.on(n,null),ce&&(a[ce]=s),f){var l=function(){r.on(i,null)};r.on(i,function(){ne(),l()},!0),setTimeout(l,0)}}}m.mouse=function(t){return Mi(t,ci())};var xi=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Mi(t,n){n.changedTouches&&(n=n.changedTouches[0]);var i=t.ownerSVGElement||t;if(i.createSVGPoint){var r=i.createSVGPoint();if(xi<0){var a=ct(t);if(a.scrollX||a.scrollY){i=m.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var s=i[0][0].getScreenCTM();xi=!(s.f||s.e),i.remove()}}return xi?(r.x=n.pageX,r.y=n.pageY):(r.x=n.clientX,r.y=n.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var f=t.getBoundingClientRect();return[n.clientX-f.left-t.clientLeft,n.clientY-f.top-t.clientTop]}m.touch=function(t,n,i){if(arguments.length<3&&(i=n,n=ci().changedTouches),n){for(var r=0,a=n.length,s;r<a;++r)if((s=n[r]).identifier===i)return Mi(t,s)}},m.behavior.drag=function(){var t=di(a,"drag","dragstart","dragend"),n=null,i=s(_t,m.mouse,ct,"mousemove","mouseup"),r=s(ks,m.touch,mt,"touchmove","touchend");function a(){this.on("mousedown.drag",i).on("touchstart.drag",r)}function s(f,l,c,d,p){return function(){var g=this,v=m.event.target,M=g.parentNode,C=t.of(g,arguments),x=0,P=f(),w=".drag"+(P==null?"":"-"+P),b,L=m.select(c(v)).on(d+w,k).on(p+w,A),E=un(v),N=l(M,P);n?(b=n.apply(g,arguments),b=[b.x-N[0],b.y-N[1]]):b=[0,0],C({type:"dragstart"});function k(){var D=l(M,P),B,Z;!D||(B=D[0]-N[0],Z=D[1]-N[1],x|=B|Z,N=D,C({type:"drag",x:D[0]+b[0],y:D[1]+b[1],dx:B,dy:Z}))}function A(){!l(M,P)||(L.on(d+w,null).on(p+w,null),E(x),C({type:"dragend"}))}}}return a.origin=function(f){return arguments.length?(n=f,a):n},m.rebind(a,t,"on")};function ks(){return m.event.changedTouches[0].identifier}m.touches=function(t,n){return arguments.length<2&&(n=ci().touches),n?nt(n).map(function(i){var r=Mi(t,i);return r.identifier=i.identifier,r}):[]};var X=1e-6,ln=X*X,tt=Math.PI,kt=2*tt,As=kt-X,dt=tt/2,Q=tt/180,ft=180/tt;function Xr(t){return t>0?1:t<0?-1:0}function wi(t,n,i){return(n[0]-t[0])*(i[1]-t[1])-(n[1]-t[1])*(i[0]-t[0])}function Jr(t){return t>1?0:t<-1?tt:Math.acos(t)}function re(t){return t>1?dt:t<-1?-dt:Math.asin(t)}function Ns(t){return((t=Math.exp(t))-1/t)/2}function jr(t){return((t=Math.exp(t))+1/t)/2}function zs(t){return((t=Math.exp(2*t))-1)/(t+1)}function Kr(t){return(t=Math.sin(t/2))*t}var Fe=Math.SQRT2,Pi=2,$r=4;m.interpolateZoom=function(t,n){var i=t[0],r=t[1],a=t[2],s=n[0],f=n[1],l=n[2],c=s-i,d=f-r,p=c*c+d*d,g,v;if(p<ln)v=Math.log(l/a)/Fe,g=function(b){return[i+b*c,r+b*d,a*Math.exp(Fe*b*v)]};else{var M=Math.sqrt(p),C=(l*l-a*a+$r*p)/(2*a*Pi*M),x=(l*l-a*a-$r*p)/(2*l*Pi*M),P=Math.log(Math.sqrt(C*C+1)-C),w=Math.log(Math.sqrt(x*x+1)-x);v=(w-P)/Fe,g=function(b){var L=b*v,E=jr(P),N=a/(Pi*M)*(E*zs(Fe*L+P)-Ns(P));return[i+N*c,r+N*d,a*E/jr(Fe*L+P)]}}return g.duration=v*1e3,g},m.behavior.zoom=function(){var t={x:0,y:0,k:1},n,i,r,a=[960,500],s=Qr,f=250,l=0,c="mousedown.zoom",d="mousemove.zoom",p="mouseup.zoom",g,v="touchstart.zoom",M,C=di(L,"zoomstart","zoom","zoomend"),x,P,w,b;Li||(Li="onwheel"in lt?(hn=function(){return-m.event.deltaY*(m.event.deltaMode?120:1)},"wheel"):"onmousewheel"in lt?(hn=function(){return m.event.wheelDelta},"mousewheel"):(hn=function(){return-m.event.detail},"MozMousePixelScroll"));function L(I){I.on(c,G).on(Li+".zoom",R).on("dblclick.zoom",H).on(v,z)}L.event=function(I){I.each(function(){var F=C.of(this,arguments),j=t;we?m.select(this).transition().each("start.zoom",function(){t=this.__chart__||{x:0,y:0,k:1},Z(F)}).tween("zoom:zoom",function(){var $=a[0],et=a[1],rt=i?i[0]:$/2,st=i?i[1]:et/2,wt=m.interpolateZoom([(rt-t.x)/t.k,(st-t.y)/t.k,$/t.k],[(rt-j.x)/j.k,(st-j.y)/j.k,$/j.k]);return function(St){var Pt=wt(St),Tt=$/Pt[2];this.__chart__=t={x:rt-Pt[0]*Tt,y:st-Pt[1]*Tt,k:Tt},Y(F)}}).each("interrupt.zoom",function(){W(F)}).each("end.zoom",function(){W(F)}):(this.__chart__=t,Z(F),Y(F),W(F))})},L.translate=function(I){return arguments.length?(t={x:+I[0],y:+I[1],k:t.k},B(),L):[t.x,t.y]},L.scale=function(I){return arguments.length?(t={x:t.x,y:t.y,k:null},k(+I),B(),L):t.k},L.scaleExtent=function(I){return arguments.length?(s=I==null?Qr:[+I[0],+I[1]],L):s},L.center=function(I){return arguments.length?(r=I&&[+I[0],+I[1]],L):r},L.size=function(I){return arguments.length?(a=I&&[+I[0],+I[1]],L):a},L.duration=function(I){return arguments.length?(f=+I,L):f},L.x=function(I){return arguments.length?(P=I,x=I.copy(),t={x:0,y:0,k:1},L):P},L.y=function(I){return arguments.length?(b=I,w=I.copy(),t={x:0,y:0,k:1},L):b};function E(I){return[(I[0]-t.x)/t.k,(I[1]-t.y)/t.k]}function N(I){return[I[0]*t.k+t.x,I[1]*t.k+t.y]}function k(I){t.k=Math.max(s[0],Math.min(s[1],I))}function A(I,F){F=N(F),t.x+=I[0]-F[0],t.y+=I[1]-F[1]}function D(I,F,j,$){I.__chart__={x:t.x,y:t.y,k:t.k},k(Math.pow(2,$)),A(i=F,j),I=m.select(I),f>0&&(I=I.transition().duration(f)),I.call(L.event)}function B(){P&&P.domain(x.range().map(function(I){return(I-t.x)/t.k}).map(x.invert)),b&&b.domain(w.range().map(function(I){return(I-t.y)/t.k}).map(w.invert))}function Z(I){l++||I({type:"zoomstart"})}function Y(I){B(),I({type:"zoom",scale:t.k,translate:[t.x,t.y]})}function W(I){--l||(I({type:"zoomend"}),i=null)}function G(){var I=this,F=C.of(I,arguments),j=0,$=m.select(ct(I)).on(d,st).on(p,wt),et=E(m.mouse(I)),rt=un(I);ei.call(I),Z(F);function st(){j=1,A(m.mouse(I),et),Y(F)}function wt(){$.on(d,null).on(p,null),rt(j),W(F)}}function z(){var I=this,F=C.of(I,arguments),j={},$=0,et,rt=".zoom-"+m.event.changedTouches[0].identifier,st="touchmove"+rt,wt="touchend"+rt,St=[],Pt=m.select(I),Tt=un(I);Dt(),Z(F),Pt.on(c,null).on(v,Dt);function xt(){var qt=m.touches(I);return et=t.k,qt.forEach(function(vt){vt.identifier in j&&(j[vt.identifier]=E(vt))}),qt}function Dt(){var qt=m.event.target;m.select(qt).on(st,Le).on(wt,wh),St.push(qt);for(var vt=m.event.changedTouches,Ut=0,Yt=vt.length;Ut<Yt;++Ut)j[vt[Ut].identifier]=null;var Bt=xt(),Ze=Date.now();if(Bt.length===1){if(Ze-M<500){var Ee=Bt[0];D(I,Ee,j[Ee.identifier],Math.floor(Math.log(t.k)/Math.LN2)+1),ne()}M=Ze}else if(Bt.length>1){var Ee=Bt[0],fe=Bt[1],oi=Ee[0]-fe[0],cs=Ee[1]-fe[1];$=oi*oi+cs*cs}}function Le(){var qt=m.touches(I),vt,Ut,Yt,Bt;ei.call(I);for(var Ze=0,Ee=qt.length;Ze<Ee;++Ze,Bt=null)if(Yt=qt[Ze],Bt=j[Yt.identifier]){if(Ut)break;vt=Yt,Ut=Bt}if(Bt){var fe=(fe=Yt[0]-vt[0])*fe+(fe=Yt[1]-vt[1])*fe,oi=$&&Math.sqrt(fe/$);vt=[(vt[0]+Yt[0])/2,(vt[1]+Yt[1])/2],Ut=[(Ut[0]+Bt[0])/2,(Ut[1]+Bt[1])/2],k(oi*et)}M=null,A(vt,Ut),Y(F)}function wh(){if(m.event.touches.length){for(var qt=m.event.changedTouches,vt=0,Ut=qt.length;vt<Ut;++vt)delete j[qt[vt].identifier];for(var Yt in j)return void xt()}m.selectAll(St).on(rt,null),Pt.on(c,G).on(v,z),Tt(),W(F)}}function R(){var I=C.of(this,arguments);g?clearTimeout(g):(ei.call(this),n=E(i=r||m.mouse(this)),Z(I)),g=setTimeout(function(){g=null,W(I)},50),ne(),k(Math.pow(2,hn()*.002)*t.k),A(i,n),Y(I)}function H(){var I=m.mouse(this),F=Math.log(t.k)/Math.LN2;D(this,I,E(I),m.event.shiftKey?Math.ceil(F)-1:Math.floor(F)+1)}return m.rebind(L,C,"on")};var Qr=[0,1/0],hn,Li;m.color=de;function de(){}de.prototype.toString=function(){return this.rgb()+""},m.hsl=Wt;function Wt(t,n,i){return this instanceof Wt?(this.h=+t,this.s=+n,void(this.l=+i)):arguments.length<2?t instanceof Wt?new Wt(t.h,t.s,t.l):ao(""+t,so,Wt):new Wt(t,n,i)}var Ei=Wt.prototype=new de;Ei.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Wt(this.h,this.s,this.l/t)},Ei.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Wt(this.h,this.s,t*this.l)},Ei.rgb=function(){return Si(this.h,this.s,this.l)};function Si(t,n,i){var r,a;t=isNaN(t)?0:(t%=360)<0?t+360:t,n=isNaN(n)||n<0?0:n>1?1:n,i=i<0?0:i>1?1:i,a=i<=.5?i*(1+n):i+n-i*n,r=2*i-a;function s(l){return l>360?l-=360:l<0&&(l+=360),l<60?r+(a-r)*l/60:l<180?a:l<240?r+(a-r)*(240-l)/60:r}function f(l){return Math.round(s(l)*255)}return new Ct(f(t+120),f(t),f(t-120))}m.hcl=Rt;function Rt(t,n,i){return this instanceof Rt?(this.h=+t,this.c=+n,void(this.l=+i)):arguments.length<2?t instanceof Rt?new Rt(t.h,t.c,t.l):t instanceof Ot?ro(t.l,t.a,t.b):ro((t=uo((t=m.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Rt(t,n,i)}var bi=Rt.prototype=new de;bi.brighter=function(t){return new Rt(this.h,this.c,Math.min(100,this.l+fn*(arguments.length?t:1)))},bi.darker=function(t){return new Rt(this.h,this.c,Math.max(0,this.l-fn*(arguments.length?t:1)))},bi.rgb=function(){return Ci(this.h,this.c,this.l).rgb()};function Ci(t,n,i){return isNaN(t)&&(t=0),isNaN(n)&&(n=0),new Ot(i,Math.cos(t*=Q)*n,Math.sin(t)*n)}m.lab=Ot;function Ot(t,n,i){return this instanceof Ot?(this.l=+t,this.a=+n,void(this.b=+i)):arguments.length<2?t instanceof Ot?new Ot(t.l,t.a,t.b):t instanceof Rt?Ci(t.h,t.c,t.l):uo((t=Ct(t)).r,t.g,t.b):new Ot(t,n,i)}var fn=18,to=.95047,eo=1,no=1.08883,Ti=Ot.prototype=new de;Ti.brighter=function(t){return new Ot(Math.min(100,this.l+fn*(arguments.length?t:1)),this.a,this.b)},Ti.darker=function(t){return new Ot(Math.max(0,this.l-fn*(arguments.length?t:1)),this.a,this.b)},Ti.rgb=function(){return io(this.l,this.a,this.b)};function io(t,n,i){var r=(t+16)/116,a=r+n/500,s=r-i/200;return a=Di(a)*to,r=Di(r)*eo,s=Di(s)*no,new Ct(Ai(3.2404542*a-1.5371385*r-.4985314*s),Ai(-.969266*a+1.8760108*r+.041556*s),Ai(.0556434*a-.2040259*r+1.0572252*s))}function ro(t,n,i){return t>0?new Rt(Math.atan2(i,n)*ft,Math.sqrt(n*n+i*i),t):new Rt(NaN,NaN,t)}function Di(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ki(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function Ai(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}m.rgb=Ct;function Ct(t,n,i){return this instanceof Ct?(this.r=~~t,this.g=~~n,void(this.b=~~i)):arguments.length<2?t instanceof Ct?new Ct(t.r,t.g,t.b):ao(""+t,Ct,Si):new Ct(t,n,i)}function oo(t){return new Ct(t>>16,t>>8&255,t&255)}function cn(t){return oo(t)+""}var dn=Ct.prototype=new de;dn.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var n=this.r,i=this.g,r=this.b,a=30;return!n&&!i&&!r?new Ct(a,a,a):(n&&n<a&&(n=a),i&&i<a&&(i=a),r&&r<a&&(r=a),new Ct(Math.min(255,n/t),Math.min(255,i/t),Math.min(255,r/t)))},dn.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Ct(t*this.r,t*this.g,t*this.b)},dn.hsl=function(){return so(this.r,this.g,this.b)},dn.toString=function(){return"#"+be(this.r)+be(this.g)+be(this.b)};function be(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function ao(t,n,i){var r=0,a=0,s=0,f,l,c;if(f=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()),f)switch(l=f[2].split(","),f[1]){case"hsl":return i(parseFloat(l[0]),parseFloat(l[1])/100,parseFloat(l[2])/100);case"rgb":return n(zi(l[0]),zi(l[1]),zi(l[2]))}return(c=pn.get(t))?n(c.r,c.g,c.b):(t!=null&&t.charAt(0)==="#"&&!isNaN(c=parseInt(t.slice(1),16))&&(t.length===4?(r=(c&3840)>>4,r=r>>4|r,a=c&240,a=a>>4|a,s=c&15,s=s<<4|s):t.length===7&&(r=(c&16711680)>>16,a=(c&65280)>>8,s=c&255)),n(r,a,s))}function so(t,n,i){var r=Math.min(t/=255,n/=255,i/=255),a=Math.max(t,n,i),s=a-r,f,l,c=(a+r)/2;return s?(l=c<.5?s/(a+r):s/(2-a-r),t==a?f=(n-i)/s+(n<i?6:0):n==a?f=(i-t)/s+2:f=(t-n)/s+4,f*=60):(f=NaN,l=c>0&&c<1?0:f),new Wt(f,l,c)}function uo(t,n,i){t=Ni(t),n=Ni(n),i=Ni(i);var r=ki((.4124564*t+.3575761*n+.1804375*i)/to),a=ki((.2126729*t+.7151522*n+.072175*i)/eo),s=ki((.0193339*t+.119192*n+.9503041*i)/no);return Ot(116*a-16,500*(r-a),200*(a-s))}function Ni(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function zi(t){var n=parseFloat(t);return t.charAt(t.length-1)==="%"?Math.round(n*2.55):n}var pn=m.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});pn.forEach(function(t,n){pn.set(t,oo(n))});function at(t){return typeof t=="function"?t:function(){return t}}m.functor=at,m.xhr=Ii(mt);function Ii(t){return function(n,i,r){return arguments.length===2&&typeof i=="function"&&(r=i,i=null),_n(n,i,t,r)}}function _n(t,n,i,r){var a={},s=m.dispatch("beforesend","progress","load","error"),f={},l=new XMLHttpRequest,c=null;this.XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(t)&&(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=d:l.onreadystatechange=function(){l.readyState>3&&d()};function d(){var p=l.status,g;if(!p&&Us(l)||p>=200&&p<300||p===304){try{g=i.call(a,l)}catch(v){s.error.call(a,v);return}s.load.call(a,g)}else s.error.call(a,l)}return l.onprogress=function(p){var g=m.event;m.event=p;try{s.progress.call(a,l)}finally{m.event=g}},a.header=function(p,g){return p=(p+"").toLowerCase(),arguments.length<2?f[p]:(g==null?delete f[p]:f[p]=g+"",a)},a.mimeType=function(p){return arguments.length?(n=p==null?null:p+"",a):n},a.responseType=function(p){return arguments.length?(c=p,a):c},a.response=function(p){return i=p,a},["get","post"].forEach(function(p){a[p]=function(){return a.send.apply(a,[p].concat(nt(arguments)))}}),a.send=function(p,g,v){if(arguments.length===2&&typeof g=="function"&&(v=g,g=null),l.open(p,t,!0),n!=null&&!("accept"in f)&&(f.accept=n+",*/*"),l.setRequestHeader)for(var M in f)l.setRequestHeader(M,f[M]);return n!=null&&l.overrideMimeType&&l.overrideMimeType(n),c!=null&&(l.responseType=c),v!=null&&a.on("error",v).on("load",function(C){v(null,C)}),s.beforesend.call(a,l),l.send(g??null),a},a.abort=function(){return l.abort(),a},m.rebind(a,s,"on"),r==null?a:a.get(Is(r))}function Is(t){return t.length===1?function(n,i){t(n==null?i:null)}:t}function Us(t){var n=t.responseType;return n&&n!=="text"?t.response:t.responseText}m.dsv=function(t,n){var i=new RegExp('["'+t+`
]`),r=t.charCodeAt(0);function a(d,p,g){arguments.length<3&&(g=p,p=null);var v=_n(d,n,p==null?s:f(p),g);return v.row=function(M){return arguments.length?v.response((p=M)==null?s:f(M)):p},v}function s(d){return a.parse(d.responseText)}function f(d){return function(p){return a.parse(p.responseText,d)}}a.parse=function(d,p){var g;return a.parseRows(d,function(v,M){if(g)return g(v,M-1);var C=new Function("d","return {"+v.map(function(x,P){return JSON.stringify(x)+": d["+P+"]"}).join(",")+"}");g=p?function(x,P){return p(C(x),P)}:C})},a.parseRows=function(d,p){var g={},v={},M=[],C=d.length,x=0,P=0,w,b;function L(){if(x>=C)return v;if(b)return b=!1,g;var N=x;if(d.charCodeAt(N)===34){for(var k=N;k++<C;)if(d.charCodeAt(k)===34){if(d.charCodeAt(k+1)!==34)break;++k}x=k+2;var A=d.charCodeAt(k+1);return A===13?(b=!0,d.charCodeAt(k+2)===10&&++x):A===10&&(b=!0),d.slice(N+1,k).replace(/""/g,'"')}for(;x<C;){var A=d.charCodeAt(x++),D=1;if(A===10)b=!0;else if(A===13)b=!0,d.charCodeAt(x)===10&&(++x,++D);else if(A!==r)continue;return d.slice(N,x-D)}return d.slice(N)}for(;(w=L())!==v;){for(var E=[];w!==g&&w!==v;)E.push(w),w=L();p&&(E=p(E,P++))==null||M.push(E)}return M},a.format=function(d){if(Array.isArray(d[0]))return a.formatRows(d);var p=new li,g=[];return d.forEach(function(v){for(var M in v)p.has(M)||g.push(p.add(M))}),[g.map(c).join(t)].concat(d.map(function(v){return g.map(function(M){return c(v[M])}).join(t)})).join(`
`)},a.formatRows=function(d){return d.map(l).join(`
`)};function l(d){return d.map(c).join(t)}function c(d){return i.test(d)?'"'+d.replace(/\"/g,'""')+'"':d}return a},m.csv=m.dsv(",","text/csv"),m.tsv=m.dsv("	","text/tab-separated-values");var gn,mn,vn,yn,lo=this[hi(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};m.timer=function(){xn.apply(this,arguments)};function xn(t,n,i){var r=arguments.length;r<2&&(n=0),r<3&&(i=Date.now());var a=i+n,s={c:t,t:a,n:null};return mn?mn.n=s:gn=s,mn=s,vn||(yn=clearTimeout(yn),vn=1,lo(Ui)),s}function Ui(){var t=ho(),n=fo()-t;n>24?(isFinite(n)&&(clearTimeout(yn),yn=setTimeout(Ui,n)),vn=0):(vn=1,lo(Ui))}m.timer.flush=function(){ho(),fo()};function ho(){for(var t=Date.now(),n=gn;n;)t>=n.t&&n.c(t-n.t)&&(n.c=null),n=n.n;return t}function fo(){for(var t,n=gn,i=1/0;n;)n.c?(n.t<i&&(i=n.t),n=(t=n).n):n=t?t.n=n.n:gn=n.n;return mn=t,i}function Bi(t,n){return n-(t?Math.ceil(Math.log(t)/Math.LN10):1)}m.round=function(t,n){return n?Math.round(t*(n=Math.pow(10,n)))/n:Math.round(t)};var Bs=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"].map(Rs);m.formatPrefix=function(t,n){var i=0;return(t=+t)&&(t<0&&(t*=-1),n&&(t=m.round(t,Bi(t,n))),i=1+Math.floor(1e-12+Math.log(t)/Math.LN10),i=Math.max(-24,Math.min(24,Math.floor((i-1)/3)*3))),Bs[8+i/3]};function Rs(t,n){var i=Math.pow(10,q(8-n)*3);return{scale:n>8?function(r){return r/i}:function(r){return r*i},symbol:t}}function Os(t){var n=t.decimal,i=t.thousands,r=t.grouping,a=t.currency,s=r&&i?function(f,l){for(var c=f.length,d=[],p=0,g=r[0],v=0;c>0&&g>0&&(v+g+1>l&&(g=Math.max(1,l-v)),d.push(f.substring(c-=g,c+g)),!((v+=g+1)>l));)g=r[p=(p+1)%r.length];return d.reverse().join(i)}:mt;return function(f){var l=co.exec(f),c=l[1]||" ",d=l[2]||">",p=l[3]||"-",g=l[4]||"",v=l[5],M=+l[6],C=l[7],x=l[8],P=l[9],w=1,b="",L="",E=!1,N=!0;switch(x&&(x=+x.substring(1)),(v||c==="0"&&d==="=")&&(v=c="0",d="="),P){case"n":C=!0,P="g";break;case"%":w=100,L="%",P="f";break;case"p":w=100,L="%",P="r";break;case"b":case"o":case"x":case"X":g==="#"&&(b="0"+P.toLowerCase());case"c":N=!1;case"d":E=!0,x=0;break;case"s":w=-1,P="r";break}g==="$"&&(b=a[0],L=a[1]),P=="r"&&!x&&(P="g"),x!=null&&(P=="g"?x=Math.max(1,Math.min(21,x)):(P=="e"||P=="f")&&(x=Math.max(0,Math.min(20,x)))),P=Zs.get(P)||Fs;var k=v&&C;return function(A){var D=L;if(E&&A%1)return"";var B=A<0||A===0&&1/A<0?(A=-A,"-"):p==="-"?"":p;if(w<0){var Z=m.formatPrefix(A,x);A=Z.scale(A),D=Z.symbol+L}else A*=w;A=P(A,x);var Y=A.lastIndexOf("."),W,G;if(Y<0){var z=N?A.lastIndexOf("e"):-1;z<0?(W=A,G=""):(W=A.substring(0,z),G=A.substring(z))}else W=A.substring(0,Y),G=n+A.substring(Y+1);!v&&C&&(W=s(W,1/0));var R=b.length+W.length+G.length+(k?0:B.length),H=R<M?new Array(R=M-R+1).join(c):"";return k&&(W=s(H+W,H.length?M-G.length:1/0)),B+=b,A=W+G,(d==="<"?B+A+H:d===">"?H+B+A:d==="^"?H.substring(0,R>>=1)+B+A+H.substring(R):B+(k?A:H+A))+D}}}var co=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Zs=m.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,n){return t.toPrecision(n)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},r:function(t,n){return(t=m.round(t,Bi(t,n))).toFixed(Math.max(0,Math.min(20,Bi(t*(1+1e-15),n))))}});function Fs(t){return t+""}var K=m.time={},yt=Date;function jt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}jt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Kt.setUTCDate.apply(this._,arguments)},setDay:function(){Kt.setUTCDay.apply(this._,arguments)},setFullYear:function(){Kt.setUTCFullYear.apply(this._,arguments)},setHours:function(){Kt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Kt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Kt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Kt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Kt.setUTCSeconds.apply(this._,arguments)},setTime:function(){Kt.setTime.apply(this._,arguments)}};var Kt=Date.prototype;function pe(t,n,i){function r(d){var p=t(d),g=s(p,1);return d-p<g-d?p:g}function a(d){return n(d=t(new yt(d-1)),1),d}function s(d,p){return n(d=new yt(+d),p),d}function f(d,p,g){var v=a(d),M=[];if(g>1)for(;v<p;)i(v)%g||M.push(new Date(+v)),n(v,1);else for(;v<p;)M.push(new Date(+v)),n(v,1);return M}function l(d,p,g){try{yt=jt;var v=new jt;return v._=d,f(v,p,g)}finally{yt=Date}}t.floor=t,t.round=r,t.ceil=a,t.offset=s,t.range=f;var c=t.utc=Mn(t);return c.floor=c,c.round=Mn(r),c.ceil=Mn(a),c.offset=Mn(s),c.range=l,t}function Mn(t){return function(n,i){try{yt=jt;var r=new jt;return r._=n,t(r,i)._}finally{yt=Date}}}K.year=pe(function(t){return t=K.day(t),t.setMonth(0,1),t},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t){return t.getFullYear()}),K.years=K.year.range,K.years.utc=K.year.utc.range,K.day=pe(function(t){var n=new yt(2e3,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n},function(t,n){t.setDate(t.getDate()+n)},function(t){return t.getDate()-1}),K.days=K.day.range,K.days.utc=K.day.utc.range,K.dayOfYear=function(t){var n=K.year(t);return Math.floor((t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*6e4)/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var i=K[t]=pe(function(r){return(r=K.day(r)).setDate(r.getDate()-(r.getDay()+n)%7),r},function(r,a){r.setDate(r.getDate()+Math.floor(a)*7)},function(r){var a=K.year(r).getDay();return Math.floor((K.dayOfYear(r)+(a+n)%7)/7)-(a!==n)});K[t+"s"]=i.range,K[t+"s"].utc=i.utc.range,K[t+"OfYear"]=function(r){var a=K.year(r).getDay();return Math.floor((K.dayOfYear(r)+(a+n)%7)/7)}}),K.week=K.sunday,K.weeks=K.sunday.range,K.weeks.utc=K.sunday.utc.range,K.weekOfYear=K.sundayOfYear;function Hs(t){var n=t.dateTime,i=t.date,r=t.time,a=t.periods,s=t.days,f=t.shortDays,l=t.months,c=t.shortMonths;function d(z){var R=z.length;function H(I){for(var F=[],j=-1,$=0,et,rt,st;++j<R;)z.charCodeAt(j)===37&&(F.push(z.slice($,j)),(rt=po[et=z.charAt(++j)])!=null&&(et=z.charAt(++j)),(st=E[et])&&(et=st(I,rt??(et==="e"?" ":"0"))),F.push(et),$=j+1);return F.push(z.slice($,j)),F.join("")}return H.parse=function(I){var F={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},j=p(F,z,I,0);if(j!=I.length)return null;"p"in F&&(F.H=F.H%12+F.p*12);var $=F.Z!=null&&yt!==jt,et=new($?jt:yt);return"j"in F?et.setFullYear(F.y,0,F.j):"W"in F||"U"in F?("w"in F||(F.w="W"in F?1:0),et.setFullYear(F.y,0,1),et.setFullYear(F.y,0,"W"in F?(F.w+6)%7+F.W*7-(et.getDay()+5)%7:F.w+F.U*7-(et.getDay()+6)%7)):et.setFullYear(F.y,F.m,F.d),et.setHours(F.H+(F.Z/100|0),F.M+F.Z%100,F.S,F.L),$?et._:et},H.toString=function(){return z},H}function p(z,R,H,I){for(var F,j,$,et=0,rt=R.length,st=H.length;et<rt;){if(I>=st)return-1;if(F=R.charCodeAt(et++),F===37){if($=R.charAt(et++),j=N[$ in po?R.charAt(et++):$],!j||(I=j(z,H,I))<0)return-1}else if(F!=H.charCodeAt(I++))return-1}return I}d.utc=function(z){var R=d(z);function H(I){try{yt=jt;var F=new yt;return F._=I,R(F)}finally{yt=Date}}return H.parse=function(I){try{yt=jt;var F=R.parse(I);return F&&F._}finally{yt=Date}},H.toString=R.toString,H},d.multi=d.utc.multi=iu;var g=m.map(),v=wn(s),M=Pn(s),C=wn(f),x=Pn(f),P=wn(l),w=Pn(l),b=wn(c),L=Pn(c);a.forEach(function(z,R){g.set(z.toLowerCase(),R)});var E={a:function(z){return f[z.getDay()]},A:function(z){return s[z.getDay()]},b:function(z){return c[z.getMonth()]},B:function(z){return l[z.getMonth()]},c:d(n),d:function(z,R){return Et(z.getDate(),R,2)},e:function(z,R){return Et(z.getDate(),R,2)},H:function(z,R){return Et(z.getHours(),R,2)},I:function(z,R){return Et(z.getHours()%12||12,R,2)},j:function(z,R){return Et(1+K.dayOfYear(z),R,3)},L:function(z,R){return Et(z.getMilliseconds(),R,3)},m:function(z,R){return Et(z.getMonth()+1,R,2)},M:function(z,R){return Et(z.getMinutes(),R,2)},p:function(z){return a[+(z.getHours()>=12)]},S:function(z,R){return Et(z.getSeconds(),R,2)},U:function(z,R){return Et(K.sundayOfYear(z),R,2)},w:function(z){return z.getDay()},W:function(z,R){return Et(K.mondayOfYear(z),R,2)},x:d(i),X:d(r),y:function(z,R){return Et(z.getFullYear()%100,R,2)},Y:function(z,R){return Et(z.getFullYear()%1e4,R,4)},Z:eu,"%":function(){return"%"}},N={a:k,A,b:D,B,c:Z,d:go,e:go,H:mo,I:mo,j:Ks,L:tu,m:js,M:$s,p:G,S:Qs,U:Ws,w:qs,W:Vs,x:Y,X:W,y:Ys,Y:Gs,Z:Xs,"%":nu};function k(z,R,H){C.lastIndex=0;var I=C.exec(R.slice(H));return I?(z.w=x.get(I[0].toLowerCase()),H+I[0].length):-1}function A(z,R,H){v.lastIndex=0;var I=v.exec(R.slice(H));return I?(z.w=M.get(I[0].toLowerCase()),H+I[0].length):-1}function D(z,R,H){b.lastIndex=0;var I=b.exec(R.slice(H));return I?(z.m=L.get(I[0].toLowerCase()),H+I[0].length):-1}function B(z,R,H){P.lastIndex=0;var I=P.exec(R.slice(H));return I?(z.m=w.get(I[0].toLowerCase()),H+I[0].length):-1}function Z(z,R,H){return p(z,E.c.toString(),R,H)}function Y(z,R,H){return p(z,E.x.toString(),R,H)}function W(z,R,H){return p(z,E.X.toString(),R,H)}function G(z,R,H){var I=g.get(R.slice(H,H+=2).toLowerCase());return I==null?-1:(z.p=I,H)}return d}var po={"-":"",_:" ","0":"0"},pt=/^\s*\d+/,_o=/^%/;function Et(t,n,i){var r=t<0?"-":"",a=(r?-t:t)+"",s=a.length;return r+(s<i?new Array(i-s+1).join(n)+a:a)}function wn(t){return new RegExp("^(?:"+t.map(m.requote).join("|")+")","i")}function Pn(t){for(var n=new ut,i=-1,r=t.length;++i<r;)n.set(t[i].toLowerCase(),i);return n}function qs(t,n,i){pt.lastIndex=0;var r=pt.exec(n.slice(i,i+1));return r?(t.w=+r[0],i+r[0].length):-1}function Ws(t,n,i){pt.lastIndex=0;var r=pt.exec(n.slice(i));return r?(t.U=+r[0],i+r[0].length):-1}function Vs(t,n,i){pt.lastIndex=0;var r=pt.exec(n.slice(i));return r?(t.W=+r[0],i+r[0].length):-1}function Gs(t,n,i){pt.lastIndex=0;var r=pt.exec(n.slice(i,i+4));return r?(t.y=+r[0],i+r[0].length):-1}function Ys(t,n,i){pt.lastIndex=0;var r=pt.exec(n.slice(i,i+2));return r?(t.y=Js(+r[0]),i+r[0].length):-1}function Xs(t,n,i){return/^[+-]\d{4}$/.test(n=n.slice(i,i+5))?(t.Z=-n,i+5):-1}function Js(t){return t+(t>68?1900:2e3)}function js(t,n,i){pt.lastIndex=0;var r=pt.exec(n.slice(i,i+2));return r?(t.m=r[0]-1,i+r[0].length):-1}function go(t,n,i){pt.lastIndex=0;var r=pt.exec(n.slice(i,i+2));return r?(t.d=+r[0],i+r[0].length):-1}function Ks(t,n,i){pt.lastIndex=0;var r=pt.exec(n.slice(i,i+3));return r?(t.j=+r[0],i+r[0].length):-1}function mo(t,n,i){pt.lastIndex=0;var r=pt.exec(n.slice(i,i+2));return r?(t.H=+r[0],i+r[0].length):-1}function $s(t,n,i){pt.lastIndex=0;var r=pt.exec(n.slice(i,i+2));return r?(t.M=+r[0],i+r[0].length):-1}function Qs(t,n,i){pt.lastIndex=0;var r=pt.exec(n.slice(i,i+2));return r?(t.S=+r[0],i+r[0].length):-1}function tu(t,n,i){pt.lastIndex=0;var r=pt.exec(n.slice(i,i+3));return r?(t.L=+r[0],i+r[0].length):-1}function eu(t){var n=t.getTimezoneOffset(),i=n>0?"-":"+",r=q(n)/60|0,a=q(n)%60;return i+Et(r,"0",2)+Et(a,"0",2)}function nu(t,n,i){_o.lastIndex=0;var r=_o.exec(n.slice(i,i+1));return r?i+r[0].length:-1}function iu(t){for(var n=t.length,i=-1;++i<n;)t[i][0]=this(t[i][0]);return function(r){for(var a=0,s=t[a];!s[1](r);)s=t[++a];return s[0](r)}}m.locale=function(t){return{numberFormat:Os(t),timeFormat:Hs(t)}};var vo=m.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});m.format=vo.numberFormat,m.geo={};function Ri(){}Ri.prototype={s:0,t:0,add:function(t){yo(t,this.t,Ln),yo(Ln.s,this.s,this),this.s?this.t+=Ln.t:this.s=Ln.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Ln=new Ri;function yo(t,n,i){var r=i.s=t+n,a=r-t,s=r-a;i.t=t-s+(n-a)}m.geo.stream=function(t,n){t&&xo.hasOwnProperty(t.type)?xo[t.type](t,n):En(t,n)};function En(t,n){t&&Mo.hasOwnProperty(t.type)&&Mo[t.type](t,n)}var xo={Feature:function(t,n){En(t.geometry,n)},FeatureCollection:function(t,n){for(var i=t.features,r=-1,a=i.length;++r<a;)En(i[r].geometry,n)}},Mo={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var i=t.coordinates,r=-1,a=i.length;++r<a;)t=i[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){Oi(t.coordinates,n,0)},MultiLineString:function(t,n){for(var i=t.coordinates,r=-1,a=i.length;++r<a;)Oi(i[r],n,0)},Polygon:function(t,n){wo(t.coordinates,n)},MultiPolygon:function(t,n){for(var i=t.coordinates,r=-1,a=i.length;++r<a;)wo(i[r],n)},GeometryCollection:function(t,n){for(var i=t.geometries,r=-1,a=i.length;++r<a;)En(i[r],n)}};function Oi(t,n,i){var r=-1,a=t.length-i,s;for(n.lineStart();++r<a;)s=t[r],n.point(s[0],s[1],s[2]);n.lineEnd()}function wo(t,n){var i=-1,r=t.length;for(n.polygonStart();++i<r;)Oi(t[i],n,1);n.polygonEnd()}m.geo.area=function(t){return Sn=0,m.geo.stream(t,At),Sn};var Sn,_e=new Ri,At={sphere:function(){Sn+=4*tt},point:_t,lineStart:_t,lineEnd:_t,polygonStart:function(){_e.reset(),At.lineStart=ru},polygonEnd:function(){var t=2*_e;Sn+=t<0?4*tt+t:t,At.lineStart=At.lineEnd=At.point=_t}};function ru(){var t,n,i,r,a;At.point=function(f,l){At.point=s,i=(t=f)*Q,r=Math.cos(l=(n=l)*Q/2+tt/4),a=Math.sin(l)};function s(f,l){f*=Q,l=l*Q/2+tt/4;var c=f-i,d=c>=0?1:-1,p=d*c,g=Math.cos(l),v=Math.sin(l),M=a*v,C=r*g+M*Math.cos(p),x=M*d*Math.sin(p);_e.add(Math.atan2(x,C)),i=f,r=g,a=v}At.lineEnd=function(){s(t,n)}}function ge(t){var n=t[0],i=t[1],r=Math.cos(i);return[r*Math.cos(n),r*Math.sin(n),Math.sin(i)]}function bn(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Ce(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Zi(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Cn(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Tn(t){var n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function Dn(t){return[Math.atan2(t[1],t[0]),re(t[2])]}function kn(t,n){return q(t[0]-n[0])<X&&q(t[1]-n[1])<X}m.geo.bounds=function(){var t,n,i,r,a,s,f,l,c,d,p,g={point:v,lineStart:C,lineEnd:x,polygonStart:function(){g.point=P,g.lineStart=w,g.lineEnd=b,c=0,At.polygonStart()},polygonEnd:function(){At.polygonEnd(),g.point=v,g.lineStart=C,g.lineEnd=x,_e<0?(t=-(i=180),n=-(r=90)):c>X?r=90:c<-X&&(n=-90),p[0]=t,p[1]=i}};function v(k,A){d.push(p=[t=k,i=k]),A<n&&(n=A),A>r&&(r=A)}function M(k,A){var D=ge([k*Q,A*Q]);if(l){var B=Ce(l,D),Z=[B[1],-B[0],0],Y=Ce(Z,B);Tn(Y),Y=Dn(Y);var W=k-a,G=W>0?1:-1,z=Y[0]*ft*G,R=q(W)>180;if(R^(G*a<z&&z<G*k)){var H=Y[1]*ft;H>r&&(r=H)}else if(z=(z+360)%360-180,R^(G*a<z&&z<G*k)){var H=-Y[1]*ft;H<n&&(n=H)}else A<n&&(n=A),A>r&&(r=A);R?k<a?L(t,k)>L(t,i)&&(i=k):L(k,i)>L(t,i)&&(t=k):i>=t?(k<t&&(t=k),k>i&&(i=k)):k>a?L(t,k)>L(t,i)&&(i=k):L(k,i)>L(t,i)&&(t=k)}else v(k,A);l=D,a=k}function C(){g.point=M}function x(){p[0]=t,p[1]=i,g.point=v,l=null}function P(k,A){if(l){var D=k-a;c+=q(D)>180?D+(D>0?360:-360):D}else s=k,f=A;At.point(k,A),M(k,A)}function w(){At.lineStart()}function b(){P(s,f),At.lineEnd(),q(c)>X&&(t=-(i=180)),p[0]=t,p[1]=i,l=null}function L(k,A){return(A-=k)<0?A+360:A}function E(k,A){return k[0]-A[0]}function N(k,A){return A[0]<=A[1]?A[0]<=k&&k<=A[1]:k<A[0]||A[1]<k}return function(k){r=i=-(t=n=1/0),d=[],m.geo.stream(k,g);var A=d.length;if(A){d.sort(E);for(var D=1,B=d[0],Z,Y=[B];D<A;++D)Z=d[D],N(Z[0],B)||N(Z[1],B)?(L(B[0],Z[1])>L(B[0],B[1])&&(B[1]=Z[1]),L(Z[0],B[1])>L(B[0],B[1])&&(B[0]=Z[0])):Y.push(B=Z);for(var W=-1/0,G,A=Y.length-1,D=0,B=Y[A],Z;D<=A;B=Z,++D)Z=Y[D],(G=L(B[1],Z[0]))>W&&(W=G,t=Z[0],i=B[1])}return d=p=null,t===1/0||n===1/0?[[NaN,NaN],[NaN,NaN]]:[[t,n],[i,r]]}}(),m.geo.centroid=function(t){He=An=me=ve=$t=oe=ae=Vt=Te=De=se=0,m.geo.stream(t,Zt);var n=Te,i=De,r=se,a=n*n+i*i+r*r;return a<ln&&(n=oe,i=ae,r=Vt,An<X&&(n=me,i=ve,r=$t),a=n*n+i*i+r*r,a<ln)?[NaN,NaN]:[Math.atan2(i,n)*ft,re(r/Math.sqrt(a))*ft]};var He,An,me,ve,$t,oe,ae,Vt,Te,De,se,Zt={sphere:_t,point:Fi,lineStart:Po,lineEnd:Lo,polygonStart:function(){Zt.lineStart=ou},polygonEnd:function(){Zt.lineStart=Po}};function Fi(t,n){t*=Q;var i=Math.cos(n*=Q);qe(i*Math.cos(t),i*Math.sin(t),Math.sin(n))}function qe(t,n,i){++He,me+=(t-me)/He,ve+=(n-ve)/He,$t+=(i-$t)/He}function Po(){var t,n,i;Zt.point=function(a,s){a*=Q;var f=Math.cos(s*=Q);t=f*Math.cos(a),n=f*Math.sin(a),i=Math.sin(s),Zt.point=r,qe(t,n,i)};function r(a,s){a*=Q;var f=Math.cos(s*=Q),l=f*Math.cos(a),c=f*Math.sin(a),d=Math.sin(s),p=Math.atan2(Math.sqrt((p=n*d-i*c)*p+(p=i*l-t*d)*p+(p=t*c-n*l)*p),t*l+n*c+i*d);An+=p,oe+=p*(t+(t=l)),ae+=p*(n+(n=c)),Vt+=p*(i+(i=d)),qe(t,n,i)}}function Lo(){Zt.point=Fi}function ou(){var t,n,i,r,a;Zt.point=function(f,l){t=f,n=l,Zt.point=s,f*=Q;var c=Math.cos(l*=Q);i=c*Math.cos(f),r=c*Math.sin(f),a=Math.sin(l),qe(i,r,a)},Zt.lineEnd=function(){s(t,n),Zt.lineEnd=Lo,Zt.point=Fi};function s(f,l){f*=Q;var c=Math.cos(l*=Q),d=c*Math.cos(f),p=c*Math.sin(f),g=Math.sin(l),v=r*g-a*p,M=a*d-i*g,C=i*p-r*d,x=Math.sqrt(v*v+M*M+C*C),P=i*d+r*p+a*g,w=x&&-Jr(P)/x,b=Math.atan2(x,P);Te+=w*v,De+=w*M,se+=w*C,An+=b,oe+=b*(i+(i=d)),ae+=b*(r+(r=p)),Vt+=b*(a+(a=g)),qe(i,r,a)}}function Eo(t,n){function i(r,a){return r=t(r,a),n(r[0],r[1])}return t.invert&&n.invert&&(i.invert=function(r,a){return r=n.invert(r,a),r&&t.invert(r[0],r[1])}),i}function We(){return!0}function So(t,n,i,r,a){var s=[],f=[];if(t.forEach(function(x){if(!((P=x.length-1)<=0)){var P,w=x[0],b=x[P];if(kn(w,b)){a.lineStart();for(var L=0;L<P;++L)a.point((w=x[L])[0],w[1]);a.lineEnd();return}var E=new Nn(w,x,null,!0),N=new Nn(w,null,E,!1);E.o=N,s.push(E),f.push(N),E=new Nn(b,x,null,!1),N=new Nn(b,null,E,!0),E.o=N,s.push(E),f.push(N)}}),f.sort(n),bo(s),bo(f),!!s.length){for(var l=0,c=i,d=f.length;l<d;++l)f[l].e=c=!c;for(var p=s[0],g,v;;){for(var M=p,C=!0;M.v;)if((M=M.n)===p)return;g=M.z,a.lineStart();do{if(M.v=M.o.v=!0,M.e){if(C)for(var l=0,d=g.length;l<d;++l)a.point((v=g[l])[0],v[1]);else r(M.x,M.n.x,1,a);M=M.n}else{if(C){g=M.p.z;for(var l=g.length-1;l>=0;--l)a.point((v=g[l])[0],v[1])}else r(M.x,M.p.x,-1,a);M=M.p}M=M.o,g=M.z,C=!C}while(!M.v);a.lineEnd()}}}function bo(t){if(!!(n=t.length)){for(var n,i=0,r=t[0],a;++i<n;)r.n=a=t[i],a.p=r,r=a;r.n=a=t[0],a.p=r}}function Nn(t,n,i,r){this.x=t,this.z=n,this.o=i,this.e=r,this.v=!1,this.n=this.p=null}function Co(t,n,i,r){return function(a,s){var f=n(s),l=a.invert(r[0],r[1]),c={point:d,lineStart:g,lineEnd:v,polygonStart:function(){c.point=L,c.lineStart=E,c.lineEnd=N,M=[],w=[]},polygonEnd:function(){c.point=d,c.lineStart=g,c.lineEnd=v,M=m.merge(M);var k=fu(l,w);M.length?(P||(s.polygonStart(),P=!0),So(M,su,k,i,s)):k&&(P||(s.polygonStart(),P=!0),s.lineStart(),i(null,null,1,s),s.lineEnd()),P&&(s.polygonEnd(),P=!1),M=w=null},sphere:function(){s.polygonStart(),s.lineStart(),i(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function d(k,A){var D=a(k,A);t(k=D[0],A=D[1])&&s.point(k,A)}function p(k,A){var D=a(k,A);f.point(D[0],D[1])}function g(){c.point=p,f.lineStart()}function v(){c.point=d,f.lineEnd()}var M,C=To(),x=n(C),P=!1,w,b;function L(k,A){b.push([k,A]);var D=a(k,A);x.point(D[0],D[1])}function E(){x.lineStart(),b=[]}function N(){L(b[0][0],b[0][1]),x.lineEnd();var k=x.clean(),A=C.buffer(),D,B=A.length;if(b.pop(),w.push(b),b=null,!!B){if(k&1){D=A[0];var B=D.length-1,Z=-1,Y;if(B>0){for(P||(s.polygonStart(),P=!0),s.lineStart();++Z<B;)s.point((Y=D[Z])[0],Y[1]);s.lineEnd()}return}B>1&&k&2&&A.push(A.pop().concat(A.shift())),M.push(A.filter(au))}}return c}}function au(t){return t.length>1}function To(){var t=[],n;return{lineStart:function(){t.push(n=[])},point:function(i,r){n.push([i,r])},lineEnd:_t,buffer:function(){var i=t;return t=[],n=null,i},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function su(t,n){return((t=t.x)[0]<0?t[1]-dt-X:dt-t[1])-((n=n.x)[0]<0?n[1]-dt-X:dt-n[1])}var Do=Co(We,uu,hu,[-tt,-tt/2]);function uu(t){var n=NaN,i=NaN,r=NaN,a;return{lineStart:function(){t.lineStart(),a=1},point:function(s,f){var l=s>0?tt:-tt,c=q(s-n);q(c-tt)<X?(t.point(n,i=(i+f)/2>0?dt:-dt),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(l,i),t.point(s,i),a=0):r!==l&&c>=tt&&(q(n-r)<X&&(n-=r*X),q(s-l)<X&&(s-=l*X),i=lu(n,i,s,f),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(l,i),a=0),t.point(n=s,i=f),r=l},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-a}}}function lu(t,n,i,r){var a,s,f=Math.sin(t-i);return q(f)>X?Math.atan((Math.sin(n)*(s=Math.cos(r))*Math.sin(i)-Math.sin(r)*(a=Math.cos(n))*Math.sin(t))/(a*s*f)):(n+r)/2}function hu(t,n,i,r){var a;if(t==null)a=i*dt,r.point(-tt,a),r.point(0,a),r.point(tt,a),r.point(tt,0),r.point(tt,-a),r.point(0,-a),r.point(-tt,-a),r.point(-tt,0),r.point(-tt,a);else if(q(t[0]-n[0])>X){var s=t[0]<n[0]?tt:-tt;a=i*s/2,r.point(-s,a),r.point(0,a),r.point(s,a)}else r.point(n[0],n[1])}function fu(t,n){var i=t[0],r=t[1],a=[Math.sin(i),-Math.cos(i),0],s=0,f=0;_e.reset();for(var l=0,c=n.length;l<c;++l){var d=n[l],p=d.length;if(!!p)for(var g=d[0],v=g[0],M=g[1]/2+tt/4,C=Math.sin(M),x=Math.cos(M),P=1;;){P===p&&(P=0),t=d[P];var w=t[0],b=t[1]/2+tt/4,L=Math.sin(b),E=Math.cos(b),N=w-v,k=N>=0?1:-1,A=k*N,D=A>tt,B=C*L;if(_e.add(Math.atan2(B*k*Math.sin(A),x*E+B*Math.cos(A))),s+=D?N+k*kt:N,D^v>=i^w>=i){var Z=Ce(ge(g),ge(t));Tn(Z);var Y=Ce(a,Z);Tn(Y);var W=(D^N>=0?-1:1)*re(Y[2]);(r>W||r===W&&(Z[0]||Z[1]))&&(f+=D^N>=0?1:-1)}if(!P++)break;v=w,C=L,x=E,g=t}}return(s<-X||s<X&&_e<0)^f&1}function cu(t){var n=Math.cos(t),i=n>0,r=q(n)>X,a=Yi(t,6*Q);return Co(s,f,a,i?[0,-t]:[-tt,t-tt]);function s(d,p){return Math.cos(d)*Math.cos(p)>n}function f(d){var p,g,v,M,C;return{lineStart:function(){M=v=!1,C=1},point:function(x,P){var w=[x,P],b,L=s(x,P),E=i?L?0:c(x,P):L?c(x+(x<0?tt:-tt),P):0;if(!p&&(M=v=L)&&d.lineStart(),L!==v&&(b=l(p,w),(kn(p,b)||kn(w,b))&&(w[0]+=X,w[1]+=X,L=s(w[0],w[1]))),L!==v)C=0,L?(d.lineStart(),b=l(w,p),d.point(b[0],b[1])):(b=l(p,w),d.point(b[0],b[1]),d.lineEnd()),p=b;else if(r&&p&&i^L){var N;!(E&g)&&(N=l(w,p,!0))&&(C=0,i?(d.lineStart(),d.point(N[0][0],N[0][1]),d.point(N[1][0],N[1][1]),d.lineEnd()):(d.point(N[1][0],N[1][1]),d.lineEnd(),d.lineStart(),d.point(N[0][0],N[0][1])))}L&&(!p||!kn(p,w))&&d.point(w[0],w[1]),p=w,v=L,g=E},lineEnd:function(){v&&d.lineEnd(),p=null},clean:function(){return C|(M&&v)<<1}}}function l(d,p,g){var v=ge(d),M=ge(p),C=[1,0,0],x=Ce(v,M),P=bn(x,x),w=x[0],b=P-w*w;if(!b)return!g&&d;var L=n*P/b,E=-n*w/b,N=Ce(C,x),k=Cn(C,L),A=Cn(x,E);Zi(k,A);var D=N,B=bn(k,D),Z=bn(D,D),Y=B*B-Z*(bn(k,k)-1);if(!(Y<0)){var W=Math.sqrt(Y),G=Cn(D,(-B-W)/Z);if(Zi(G,k),G=Dn(G),!g)return G;var z=d[0],R=p[0],H=d[1],I=p[1],F;R<z&&(F=z,z=R,R=F);var j=R-z,$=q(j-tt)<X,et=$||j<X;if(!$&&I<H&&(F=H,H=I,I=F),et?$?H+I>0^G[1]<(q(G[0]-z)<X?H:I):H<=G[1]&&G[1]<=I:j>tt^(z<=G[0]&&G[0]<=R)){var rt=Cn(D,(-B+W)/Z);return Zi(rt,k),[G,Dn(rt)]}}}function c(d,p){var g=i?t:tt-t,v=0;return d<-g?v|=1:d>g&&(v|=2),p<-g?v|=4:p>g&&(v|=8),v}}function ko(t,n,i,r){return function(a){var s=a.a,f=a.b,l=s.x,c=s.y,d=f.x,p=f.y,g=0,v=1,M=d-l,C=p-c,x;if(x=t-l,!(!M&&x>0)){if(x/=M,M<0){if(x<g)return;x<v&&(v=x)}else if(M>0){if(x>v)return;x>g&&(g=x)}if(x=i-l,!(!M&&x<0)){if(x/=M,M<0){if(x>v)return;x>g&&(g=x)}else if(M>0){if(x<g)return;x<v&&(v=x)}if(x=n-c,!(!C&&x>0)){if(x/=C,C<0){if(x<g)return;x<v&&(v=x)}else if(C>0){if(x>v)return;x>g&&(g=x)}if(x=r-c,!(!C&&x<0)){if(x/=C,C<0){if(x>v)return;x>g&&(g=x)}else if(C>0){if(x<g)return;x<v&&(v=x)}return g>0&&(a.a={x:l+g*M,y:c+g*C}),v<1&&(a.b={x:l+v*M,y:c+v*C}),a}}}}}}var zn=1e9;m.geo.clipExtent=function(){var t,n,i,r,a,s,f={stream:function(l){return a&&(a.valid=!1),a=s(l),a.valid=!0,a},extent:function(l){return arguments.length?(s=Ao(t=+l[0][0],n=+l[0][1],i=+l[1][0],r=+l[1][1]),a&&(a.valid=!1,a=null),f):[[t,n],[i,r]]}};return f.extent([[0,0],[960,500]])};function Ao(t,n,i,r){return function(l){var c=l,d=To(),p=ko(t,n,i,r),g,v,M,C={point:b,lineStart:Y,lineEnd:W,polygonStart:function(){l=d,g=[],v=[],Z=!0},polygonEnd:function(){l=c,g=m.merge(g);var z=x([t,r]),R=Z&&z,H=g.length;(R||H)&&(l.polygonStart(),R&&(l.lineStart(),P(null,null,1,l),l.lineEnd()),H&&So(g,s,z,P,l),l.polygonEnd()),g=v=M=null}};function x(z){for(var R=0,H=v.length,I=z[1],F=0;F<H;++F)for(var j=1,$=v[F],et=$.length,rt=$[0],st;j<et;++j)st=$[j],rt[1]<=I?st[1]>I&&wi(rt,st,z)>0&&++R:st[1]<=I&&wi(rt,st,z)<0&&--R,rt=st;return R!==0}function P(z,R,H,I){var F=0,j=0;if(z==null||(F=a(z,H))!==(j=a(R,H))||f(z,R)<0^H>0)do I.point(F===0||F===3?t:i,F>1?r:n);while((F=(F+H+4)%4)!==j);else I.point(R[0],R[1])}function w(z,R){return t<=z&&z<=i&&n<=R&&R<=r}function b(z,R){w(z,R)&&l.point(z,R)}var L,E,N,k,A,D,B,Z;function Y(){C.point=G,v&&v.push(M=[]),B=!0,D=!1,k=A=NaN}function W(){g&&(G(L,E),N&&D&&d.rejoin(),g.push(d.buffer())),C.point=b,D&&l.lineEnd()}function G(z,R){z=Math.max(-zn,Math.min(zn,z)),R=Math.max(-zn,Math.min(zn,R));var H=w(z,R);if(v&&M.push([z,R]),B)L=z,E=R,N=H,B=!1,H&&(l.lineStart(),l.point(z,R));else if(H&&D)l.point(z,R);else{var I={a:{x:k,y:A},b:{x:z,y:R}};p(I)?(D||(l.lineStart(),l.point(I.a.x,I.a.y)),l.point(I.b.x,I.b.y),H||l.lineEnd(),Z=!1):H&&(l.lineStart(),l.point(z,R),Z=!1)}k=z,A=R,D=H}return C};function a(l,c){return q(l[0]-t)<X?c>0?0:3:q(l[0]-i)<X?c>0?2:1:q(l[1]-n)<X?c>0?1:0:c>0?3:2}function s(l,c){return f(l.x,c.x)}function f(l,c){var d=a(l,1),p=a(c,1);return d!==p?d-p:d===0?c[1]-l[1]:d===1?l[0]-c[0]:d===2?l[1]-c[1]:c[0]-l[0]}}function Hi(t){var n=0,i=tt/3,r=Vi(t),a=r(n,i);return a.parallels=function(s){return arguments.length?r(n=s[0]*tt/180,i=s[1]*tt/180):[n/tt*180,i/tt*180]},a}function No(t,n){var i=Math.sin(t),r=(i+Math.sin(n))/2,a=1+i*(2*r-i),s=Math.sqrt(a)/r;function f(l,c){var d=Math.sqrt(a-2*r*Math.sin(c))/r;return[d*Math.sin(l*=r),s-d*Math.cos(l)]}return f.invert=function(l,c){var d=s-c;return[Math.atan2(l,d)/r,re((a-(l*l+d*d)*r*r)/(2*r))]},f}(m.geo.conicEqualArea=function(){return Hi(No)}).raw=No,m.geo.albers=function(){return m.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},m.geo.albersUsa=function(){var t=m.geo.albers(),n=m.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),i=m.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),r,a={point:function(d,p){r=[d,p]}},s,f,l;function c(d){var p=d[0],g=d[1];return r=null,s(p,g),r||(f(p,g),r)||l(p,g),r}return c.invert=function(d){var p=t.scale(),g=t.translate(),v=(d[0]-g[0])/p,M=(d[1]-g[1])/p;return(M>=.12&&M<.234&&v>=-.425&&v<-.214?n:M>=.166&&M<.234&&v>=-.214&&v<-.115?i:t).invert(d)},c.stream=function(d){var p=t.stream(d),g=n.stream(d),v=i.stream(d);return{point:function(M,C){p.point(M,C),g.point(M,C),v.point(M,C)},sphere:function(){p.sphere(),g.sphere(),v.sphere()},lineStart:function(){p.lineStart(),g.lineStart(),v.lineStart()},lineEnd:function(){p.lineEnd(),g.lineEnd(),v.lineEnd()},polygonStart:function(){p.polygonStart(),g.polygonStart(),v.polygonStart()},polygonEnd:function(){p.polygonEnd(),g.polygonEnd(),v.polygonEnd()}}},c.precision=function(d){return arguments.length?(t.precision(d),n.precision(d),i.precision(d),c):t.precision()},c.scale=function(d){return arguments.length?(t.scale(d),n.scale(d*.35),i.scale(d),c.translate(t.translate())):t.scale()},c.translate=function(d){if(!arguments.length)return t.translate();var p=t.scale(),g=+d[0],v=+d[1];return s=t.translate(d).clipExtent([[g-.455*p,v-.238*p],[g+.455*p,v+.238*p]]).stream(a).point,f=n.translate([g-.307*p,v+.201*p]).clipExtent([[g-.425*p+X,v+.12*p+X],[g-.214*p-X,v+.234*p-X]]).stream(a).point,l=i.translate([g-.205*p,v+.212*p]).clipExtent([[g-.214*p+X,v+.166*p+X],[g-.115*p-X,v+.234*p-X]]).stream(a).point,c},c.scale(1070)};var qi,Wi,ue={point:_t,lineStart:_t,lineEnd:_t,polygonStart:function(){Wi=0,ue.lineStart=du},polygonEnd:function(){ue.lineStart=ue.lineEnd=ue.point=_t,qi+=q(Wi/2)}};function du(){var t,n,i,r;ue.point=function(s,f){ue.point=a,t=i=s,n=r=f};function a(s,f){Wi+=r*s-i*f,i=s,r=f}ue.lineEnd=function(){a(t,n)}}var In,Un,Bn,Rn,pu={point:_u,lineStart:_t,lineEnd:_t,polygonStart:_t,polygonEnd:_t};function _u(t,n){t<In&&(In=t),t>Bn&&(Bn=t),n<Un&&(Un=n),n>Rn&&(Rn=n)}function gu(){var t=zo(4.5),n=[],i={point:r,lineStart:function(){i.point=a},lineEnd:f,polygonStart:function(){i.lineEnd=l},polygonEnd:function(){i.lineEnd=f,i.point=r},pointRadius:function(c){return t=zo(c),i},result:function(){if(n.length){var c=n.join("");return n=[],c}}};function r(c,d){n.push("M",c,",",d,t)}function a(c,d){n.push("M",c,",",d),i.point=s}function s(c,d){n.push("L",c,",",d)}function f(){i.point=r}function l(){n.push("Z")}return i}function zo(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var Ft={point:ye,lineStart:Io,lineEnd:Uo,polygonStart:function(){Ft.lineStart=mu},polygonEnd:function(){Ft.point=ye,Ft.lineStart=Io,Ft.lineEnd=Uo}};function ye(t,n){me+=t,ve+=n,++$t}function Io(){var t,n;Ft.point=function(r,a){Ft.point=i,ye(t=r,n=a)};function i(r,a){var s=r-t,f=a-n,l=Math.sqrt(s*s+f*f);oe+=l*(t+r)/2,ae+=l*(n+a)/2,Vt+=l,ye(t=r,n=a)}}function Uo(){Ft.point=ye}function mu(){var t,n,i,r;Ft.point=function(s,f){Ft.point=a,ye(t=i=s,n=r=f)};function a(s,f){var l=s-i,c=f-r,d=Math.sqrt(l*l+c*c);oe+=d*(i+s)/2,ae+=d*(r+f)/2,Vt+=d,d=r*s-i*f,Te+=d*(i+s),De+=d*(r+f),se+=d*3,ye(i=s,r=f)}Ft.lineEnd=function(){a(t,n)}}function vu(t){var n=4.5,i={point:r,lineStart:function(){i.point=a},lineEnd:f,polygonStart:function(){i.lineEnd=l},polygonEnd:function(){i.lineEnd=f,i.point=r},pointRadius:function(c){return n=c,i},result:_t};function r(c,d){t.moveTo(c+n,d),t.arc(c,d,n,0,kt)}function a(c,d){t.moveTo(c,d),i.point=s}function s(c,d){t.lineTo(c,d)}function f(){i.point=r}function l(){t.closePath()}return i}function Bo(t){var n=.5,i=Math.cos(30*Q),r=16;function a(c){return(r?f:s)(c)}function s(c){return Oo(c,function(d,p){d=t(d,p),c.point(d[0],d[1])})}function f(c){var d,p,g,v,M,C,x,P,w,b,L,E,N,k={point:A,lineStart:D,lineEnd:Z,polygonStart:function(){c.polygonStart(),k.lineStart=Y},polygonEnd:function(){c.polygonEnd(),k.lineStart=D}};function A(z,R){z=t(z,R),c.point(z[0],z[1])}function D(){w=NaN,k.point=B,c.lineStart()}function B(z,R){var H=ge([z,R]),I=t(z,R);l(w,b,P,L,E,N,w=I[0],b=I[1],P=z,L=H[0],E=H[1],N=H[2],r,c),c.point(w,b)}function Z(){k.point=A,c.lineEnd()}function Y(){D(),k.point=W,k.lineEnd=G}function W(z,R){B(d=z,p=R),g=w,v=b,M=L,C=E,x=N,k.point=B}function G(){l(w,b,P,L,E,N,g,v,d,M,C,x,r,c),k.lineEnd=Z,Z()}return k}function l(c,d,p,g,v,M,C,x,P,w,b,L,E,N){var k=C-c,A=x-d,D=k*k+A*A;if(D>4*n&&E--){var B=g+w,Z=v+b,Y=M+L,W=Math.sqrt(B*B+Z*Z+Y*Y),G=Math.asin(Y/=W),z=q(q(Y)-1)<X||q(p-P)<X?(p+P)/2:Math.atan2(Z,B),R=t(z,G),H=R[0],I=R[1],F=H-c,j=I-d,$=A*F-k*j;($*$/D>n||q((k*F+A*j)/D-.5)>.3||g*w+v*b+M*L<i)&&(l(c,d,p,g,v,M,H,I,z,B/=W,Z/=W,Y,E,N),N.point(H,I),l(H,I,z,B,Z,Y,C,x,P,w,b,L,E,N))}}return a.precision=function(c){return arguments.length?(r=(n=c*c)>0&&16,a):Math.sqrt(n)},a}m.geo.path=function(){var t=4.5,n,i,r,a,s;function f(c){return c&&(typeof t=="function"&&a.pointRadius(+t.apply(this,arguments)),(!s||!s.valid)&&(s=r(a)),m.geo.stream(c,s)),a.result()}f.area=function(c){return qi=0,m.geo.stream(c,r(ue)),qi},f.centroid=function(c){return me=ve=$t=oe=ae=Vt=Te=De=se=0,m.geo.stream(c,r(Ft)),se?[Te/se,De/se]:Vt?[oe/Vt,ae/Vt]:$t?[me/$t,ve/$t]:[NaN,NaN]},f.bounds=function(c){return Bn=Rn=-(In=Un=1/0),m.geo.stream(c,r(pu)),[[In,Un],[Bn,Rn]]},f.projection=function(c){return arguments.length?(r=(n=c)?c.stream||yu(c):mt,l()):n},f.context=function(c){return arguments.length?(a=(i=c)==null?new gu:new vu(c),typeof t!="function"&&a.pointRadius(t),l()):i},f.pointRadius=function(c){return arguments.length?(t=typeof c=="function"?c:(a.pointRadius(+c),+c),f):t};function l(){return s=null,f}return f.projection(m.geo.albersUsa()).context(null)};function yu(t){var n=Bo(function(i,r){return t([i*ft,r*ft])});return function(i){return Zo(n(i))}}m.geo.transform=function(t){return{stream:function(n){var i=new Ro(n);for(var r in t)i[r]=t[r];return i}}};function Ro(t){this.stream=t}Ro.prototype={point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Oo(t,n){return{point:n,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}m.geo.projection=le,m.geo.projectionMutator=Vi;function le(t){return Vi(function(){return t})()}function Vi(t){var n,i,r,a=Bo(function(D,B){return D=n(D,B),[D[0]*s+M,C-D[1]*s]}),s=150,f=480,l=250,c=0,d=0,p=0,g=0,v=0,M,C,x=Do,P=mt,w=null,b=null,L;function E(D){return D=r(D[0]*Q,D[1]*Q),[D[0]*s+M,C-D[1]*s]}function N(D){return D=r.invert((D[0]-M)/s,(C-D[1])/s),D&&[D[0]*ft,D[1]*ft]}E.stream=function(D){return L&&(L.valid=!1),L=Zo(x(i,a(P(D)))),L.valid=!0,L},E.clipAngle=function(D){return arguments.length?(x=D==null?(w=D,Do):cu((w=+D)*Q),A()):w},E.clipExtent=function(D){return arguments.length?(b=D,P=D?Ao(D[0][0],D[0][1],D[1][0],D[1][1]):mt,A()):b},E.scale=function(D){return arguments.length?(s=+D,k()):s},E.translate=function(D){return arguments.length?(f=+D[0],l=+D[1],k()):[f,l]},E.center=function(D){return arguments.length?(c=D[0]%360*Q,d=D[1]%360*Q,k()):[c*ft,d*ft]},E.rotate=function(D){return arguments.length?(p=D[0]%360*Q,g=D[1]%360*Q,v=D.length>2?D[2]%360*Q:0,k()):[p*ft,g*ft,v*ft]},m.rebind(E,a,"precision");function k(){r=Eo(i=Gi(p,g,v),n);var D=n(c,d);return M=f-D[0]*s,C=l+D[1]*s,A()}function A(){return L&&(L.valid=!1,L=null),E}return function(){return n=t.apply(this,arguments),E.invert=n.invert&&N,k()}}function Zo(t){return Oo(t,function(n,i){t.point(n*Q,i*Q)})}function Ve(t,n){return[t,n]}(m.geo.equirectangular=function(){return le(Ve)}).raw=Ve.invert=Ve,m.geo.rotation=function(t){t=Gi(t[0]%360*Q,t[1]*Q,t.length>2?t[2]*Q:0);function n(i){return i=t(i[0]*Q,i[1]*Q),i[0]*=ft,i[1]*=ft,i}return n.invert=function(i){return i=t.invert(i[0]*Q,i[1]*Q),i[0]*=ft,i[1]*=ft,i},n};function Fo(t,n){return[t>tt?t-kt:t<-tt?t+kt:t,n]}Fo.invert=Ve;function Gi(t,n,i){return t?n||i?Eo(qo(t),Wo(n,i)):qo(t):n||i?Wo(n,i):Fo}function Ho(t){return function(n,i){return n+=t,[n>tt?n-kt:n<-tt?n+kt:n,i]}}function qo(t){var n=Ho(t);return n.invert=Ho(-t),n}function Wo(t,n){var i=Math.cos(t),r=Math.sin(t),a=Math.cos(n),s=Math.sin(n);function f(l,c){var d=Math.cos(c),p=Math.cos(l)*d,g=Math.sin(l)*d,v=Math.sin(c),M=v*i+p*r;return[Math.atan2(g*a-M*s,p*i-v*r),re(M*a+g*s)]}return f.invert=function(l,c){var d=Math.cos(c),p=Math.cos(l)*d,g=Math.sin(l)*d,v=Math.sin(c),M=v*a-g*s;return[Math.atan2(g*a+v*s,p*i+M*r),re(M*i-p*r)]},f}m.geo.circle=function(){var t=[0,0],n,i=6,r;function a(){var s=typeof t=="function"?t.apply(this,arguments):t,f=Gi(-s[0]*Q,-s[1]*Q,0).invert,l=[];return r(null,null,1,{point:function(c,d){l.push(c=f(c,d)),c[0]*=ft,c[1]*=ft}}),{type:"Polygon",coordinates:[l]}}return a.origin=function(s){return arguments.length?(t=s,a):t},a.angle=function(s){return arguments.length?(r=Yi((n=+s)*Q,i*Q),a):n},a.precision=function(s){return arguments.length?(r=Yi(n*Q,(i=+s)*Q),a):i},a.angle(90)};function Yi(t,n){var i=Math.cos(t),r=Math.sin(t);return function(a,s,f,l){var c=f*n;a!=null?(a=Vo(i,a),s=Vo(i,s),(f>0?a<s:a>s)&&(a+=f*kt)):(a=t+f*kt,s=t-.5*c);for(var d,p=a;f>0?p>s:p<s;p-=c)l.point((d=Dn([i,-r*Math.cos(p),-r*Math.sin(p)]))[0],d[1])}}function Vo(t,n){var i=ge(n);i[0]-=t,Tn(i);var r=Jr(-i[1]);return((-i[2]<0?-r:r)+2*Math.PI-X)%(2*Math.PI)}m.geo.distance=function(t,n){var i=(n[0]-t[0])*Q,r=t[1]*Q,a=n[1]*Q,s=Math.sin(i),f=Math.cos(i),l=Math.sin(r),c=Math.cos(r),d=Math.sin(a),p=Math.cos(a),g;return Math.atan2(Math.sqrt((g=p*s)*g+(g=c*d-l*p*f)*g),l*d+c*p*f)},m.geo.graticule=function(){var t,n,i,r,a,s,f,l,c=10,d=c,p=90,g=360,v,M,C,x,P=2.5;function w(){return{type:"MultiLineString",coordinates:b()}}function b(){return m.range(Math.ceil(r/p)*p,i,p).map(C).concat(m.range(Math.ceil(l/g)*g,f,g).map(x)).concat(m.range(Math.ceil(n/c)*c,t,c).filter(function(L){return q(L%p)>X}).map(v)).concat(m.range(Math.ceil(s/d)*d,a,d).filter(function(L){return q(L%g)>X}).map(M))}return w.lines=function(){return b().map(function(L){return{type:"LineString",coordinates:L}})},w.outline=function(){return{type:"Polygon",coordinates:[C(r).concat(x(f).slice(1),C(i).reverse().slice(1),x(l).reverse().slice(1))]}},w.extent=function(L){return arguments.length?w.majorExtent(L).minorExtent(L):w.minorExtent()},w.majorExtent=function(L){return arguments.length?(r=+L[0][0],i=+L[1][0],l=+L[0][1],f=+L[1][1],r>i&&(L=r,r=i,i=L),l>f&&(L=l,l=f,f=L),w.precision(P)):[[r,l],[i,f]]},w.minorExtent=function(L){return arguments.length?(n=+L[0][0],t=+L[1][0],s=+L[0][1],a=+L[1][1],n>t&&(L=n,n=t,t=L),s>a&&(L=s,s=a,a=L),w.precision(P)):[[n,s],[t,a]]},w.step=function(L){return arguments.length?w.majorStep(L).minorStep(L):w.minorStep()},w.majorStep=function(L){return arguments.length?(p=+L[0],g=+L[1],w):[p,g]},w.minorStep=function(L){return arguments.length?(c=+L[0],d=+L[1],w):[c,d]},w.precision=function(L){return arguments.length?(P=+L,v=Go(s,a,90),M=Yo(n,t,P),C=Go(l,f,90),x=Yo(r,i,P),w):P},w.majorExtent([[-180,-90+X],[180,90-X]]).minorExtent([[-180,-80-X],[180,80+X]])};function Go(t,n,i){var r=m.range(t,n-X,i).concat(n);return function(a){return r.map(function(s){return[a,s]})}}function Yo(t,n,i){var r=m.range(t,n-X,i).concat(n);return function(a){return r.map(function(s){return[s,a]})}}function Xi(t){return t.source}function Ji(t){return t.target}m.geo.greatArc=function(){var t=Xi,n,i=Ji,r;function a(){return{type:"LineString",coordinates:[n||t.apply(this,arguments),r||i.apply(this,arguments)]}}return a.distance=function(){return m.geo.distance(n||t.apply(this,arguments),r||i.apply(this,arguments))},a.source=function(s){return arguments.length?(t=s,n=typeof s=="function"?null:s,a):t},a.target=function(s){return arguments.length?(i=s,r=typeof s=="function"?null:s,a):i},a.precision=function(){return arguments.length?a:0},a},m.geo.interpolate=function(t,n){return xu(t[0]*Q,t[1]*Q,n[0]*Q,n[1]*Q)};function xu(t,n,i,r){var a=Math.cos(n),s=Math.sin(n),f=Math.cos(r),l=Math.sin(r),c=a*Math.cos(t),d=a*Math.sin(t),p=f*Math.cos(i),g=f*Math.sin(i),v=2*Math.asin(Math.sqrt(Kr(r-n)+a*f*Kr(i-t))),M=1/Math.sin(v),C=v?function(x){var P=Math.sin(x*=v)*M,w=Math.sin(v-x)*M,b=w*c+P*p,L=w*d+P*g,E=w*s+P*l;return[Math.atan2(L,b)*ft,Math.atan2(E,Math.sqrt(b*b+L*L))*ft]}:function(){return[t*ft,n*ft]};return C.distance=v,C}m.geo.length=function(t){return ji=0,m.geo.stream(t,ke),ji};var ji,ke={sphere:_t,point:_t,lineStart:Mu,lineEnd:_t,polygonStart:_t,polygonEnd:_t};function Mu(){var t,n,i;ke.point=function(a,s){t=a*Q,n=Math.sin(s*=Q),i=Math.cos(s),ke.point=r},ke.lineEnd=function(){ke.point=ke.lineEnd=_t};function r(a,s){var f=Math.sin(s*=Q),l=Math.cos(s),c=q((a*=Q)-t),d=Math.cos(c);ji+=Math.atan2(Math.sqrt((c=l*Math.sin(c))*c+(c=i*f-n*l*d)*c),n*f+i*l*d),t=a,n=f,i=l}}function Ge(t,n){function i(r,a){var s=Math.cos(r),f=Math.cos(a),l=t(s*f);return[l*f*Math.sin(r),l*Math.sin(a)]}return i.invert=function(r,a){var s=Math.sqrt(r*r+a*a),f=n(s),l=Math.sin(f),c=Math.cos(f);return[Math.atan2(r*l,s*c),Math.asin(s&&a*l/s)]},i}var Xo=Ge(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(m.geo.azimuthalEqualArea=function(){return le(Xo)}).raw=Xo;var Jo=Ge(function(t){var n=Math.acos(t);return n&&n/Math.sin(n)},mt);(m.geo.azimuthalEquidistant=function(){return le(Jo)}).raw=Jo;function jo(t,n){var i=Math.cos(t),r=function(l){return Math.tan(tt/4+l/2)},a=t===n?Math.sin(t):Math.log(i/Math.cos(n))/Math.log(r(n)/r(t)),s=i*Math.pow(r(t),a)/a;if(!a)return On;function f(l,c){s>0?c<-dt+X&&(c=-dt+X):c>dt-X&&(c=dt-X);var d=s/Math.pow(r(c),a);return[d*Math.sin(a*l),s-d*Math.cos(a*l)]}return f.invert=function(l,c){var d=s-c,p=Xr(a)*Math.sqrt(l*l+d*d);return[Math.atan2(l,d)/a,2*Math.atan(Math.pow(s/p,1/a))-dt]},f}(m.geo.conicConformal=function(){return Hi(jo)}).raw=jo;function Ko(t,n){var i=Math.cos(t),r=t===n?Math.sin(t):(i-Math.cos(n))/(n-t),a=i/r+t;if(q(r)<X)return Ve;function s(f,l){var c=a-l;return[c*Math.sin(r*f),a-c*Math.cos(r*f)]}return s.invert=function(f,l){var c=a-l;return[Math.atan2(f,c)/r,a-Xr(r)*Math.sqrt(f*f+c*c)]},s}(m.geo.conicEquidistant=function(){return Hi(Ko)}).raw=Ko;var $o=Ge(function(t){return 1/t},Math.atan);(m.geo.gnomonic=function(){return le($o)}).raw=$o;function On(t,n){return[t,Math.log(Math.tan(tt/4+n/2))]}On.invert=function(t,n){return[t,2*Math.atan(Math.exp(n))-dt]};function Qo(t){var n=le(t),i=n.scale,r=n.translate,a=n.clipExtent,s;return n.scale=function(){var f=i.apply(n,arguments);return f===n?s?n.clipExtent(null):n:f},n.translate=function(){var f=r.apply(n,arguments);return f===n?s?n.clipExtent(null):n:f},n.clipExtent=function(f){var l=a.apply(n,arguments);if(l===n){if(s=f==null){var c=tt*i(),d=r();a([[d[0]-c,d[1]-c],[d[0]+c,d[1]+c]])}}else s&&(l=null);return l},n.clipExtent(null)}(m.geo.mercator=function(){return Qo(On)}).raw=On;var ta=Ge(function(){return 1},Math.asin);(m.geo.orthographic=function(){return le(ta)}).raw=ta;var ea=Ge(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(m.geo.stereographic=function(){return le(ea)}).raw=ea;function Ki(t,n){return[Math.log(Math.tan(tt/4+n/2)),-t]}Ki.invert=function(t,n){return[-n,2*Math.atan(Math.exp(t))-dt]},(m.geo.transverseMercator=function(){var t=Qo(Ki),n=t.center,i=t.rotate;return t.center=function(r){return r?n([-r[1],r[0]]):(r=n(),[r[1],-r[0]])},t.rotate=function(r){return r?i([r[0],r[1],r.length>2?r[2]+90:90]):(r=i(),[r[0],r[1],r[2]-90])},i([0,0,90])}).raw=Ki,m.geom={};function Ae(t){return t[0]}function Ye(t){return t[1]}m.geom.hull=function(t){var n=Ae,i=Ye;if(arguments.length)return r(t);function r(a){if(a.length<3)return[];var s=at(n),f=at(i),l,c=a.length,d=[],p=[];for(l=0;l<c;l++)d.push([+s.call(this,a[l],l),+f.call(this,a[l],l),l]);for(d.sort(wu),l=0;l<c;l++)p.push([d[l][0],-d[l][1]]);var g=na(d),v=na(p),M=v[0]===g[0],C=v[v.length-1]===g[g.length-1],x=[];for(l=g.length-1;l>=0;--l)x.push(a[d[g[l]][2]]);for(l=+M;l<v.length-C;++l)x.push(a[d[v[l]][2]]);return x}return r.x=function(a){return arguments.length?(n=a,r):n},r.y=function(a){return arguments.length?(i=a,r):i},r};function na(t){for(var n=t.length,i=[0,1],r=2,a=2;a<n;a++){for(;r>1&&wi(t[i[r-2]],t[i[r-1]],t[a])<=0;)--r;i[r++]=a}return i.slice(0,r)}function wu(t,n){return t[0]-n[0]||t[1]-n[1]}m.geom.polygon=function(t){return an(t,Zn),t};var Zn=m.geom.polygon.prototype=[];Zn.area=function(){for(var t=-1,n=this.length,i,r=this[n-1],a=0;++t<n;)i=r,r=this[t],a+=i[1]*r[0]-i[0]*r[1];return a*.5},Zn.centroid=function(t){var n=-1,i=this.length,r=0,a=0,s,f=this[i-1],l;for(arguments.length||(t=-1/(6*this.area()));++n<i;)s=f,f=this[n],l=s[0]*f[1]-f[0]*s[1],r+=(s[0]+f[0])*l,a+=(s[1]+f[1])*l;return[r*t,a*t]},Zn.clip=function(t){for(var n,i=ia(t),r=-1,a=this.length-ia(this),s,f,l=this[a-1],c,d,p;++r<a;){for(n=t.slice(),t.length=0,c=this[r],d=n[(f=n.length-i)-1],s=-1;++s<f;)p=n[s],$i(p,l,c)?($i(d,l,c)||t.push(Qi(d,p,l,c)),t.push(p)):$i(d,l,c)&&t.push(Qi(d,p,l,c)),d=p;i&&t.push(t[0]),l=c}return t};function $i(t,n,i){return(i[0]-n[0])*(t[1]-n[1])<(i[1]-n[1])*(t[0]-n[0])}function Qi(t,n,i,r){var a=t[0],s=i[0],f=n[0]-a,l=r[0]-s,c=t[1],d=i[1],p=n[1]-c,g=r[1]-d,v=(l*(c-d)-g*(a-s))/(g*f-l*p);return[a+v*f,c+v*p]}function ia(t){var n=t[0],i=t[t.length-1];return!(n[0]-i[0]||n[1]-i[1])}var Ne,xe,ze,ra=[],tr,Xe,oa=[];function Pu(){qn(this),this.edge=this.site=this.circle=null}function aa(t){var n=ra.pop()||new Pu;return n.site=t,n}function er(t){Ue(t),ze.remove(t),ra.push(t),qn(t)}function Lu(t){var n=t.circle,i=n.x,r=n.cy,a={x:i,y:r},s=t.P,f=t.N,l=[t];er(t);for(var c=s;c.circle&&q(i-c.circle.x)<X&&q(r-c.circle.cy)<X;)s=c.P,l.unshift(c),er(c),c=s;l.unshift(c),Ue(c);for(var d=f;d.circle&&q(i-d.circle.x)<X&&q(r-d.circle.cy)<X;)f=d.N,l.push(d),er(d),d=f;l.push(d),Ue(d);var p=l.length,g;for(g=1;g<p;++g)d=l[g],c=l[g-1],Fn(d.edge,c.site,d.site,a);c=l[0],d=l[p-1],d.edge=Je(c.site,d.site,null,a),Ie(c),Ie(d)}function Eu(t){for(var n=t.x,i=t.y,r,a,s,f,l=ze._;l;)if(s=sa(l,i)-n,s>X)l=l.L;else if(f=n-Su(l,i),f>X){if(!l.R){r=l;break}l=l.R}else{s>-X?(r=l.P,a=l):f>-X?(r=l,a=l.N):r=a=l;break}var c=aa(t);if(ze.insert(r,c),!(!r&&!a)){if(r===a){Ue(r),a=aa(r.site),ze.insert(c,a),c.edge=a.edge=Je(r.site,c.site),Ie(r),Ie(a);return}if(!a){c.edge=Je(r.site,c.site);return}Ue(r),Ue(a);var d=r.site,p=d.x,g=d.y,v=t.x-p,M=t.y-g,C=a.site,x=C.x-p,P=C.y-g,w=2*(v*P-M*x),b=v*v+M*M,L=x*x+P*P,E={x:(P*b-M*L)/w+p,y:(v*L-x*b)/w+g};Fn(a.edge,d,C,E),c.edge=Je(d,t,null,E),a.edge=Je(t,C,null,E),Ie(r),Ie(a)}}function sa(t,n){var i=t.site,r=i.x,a=i.y,s=a-n;if(!s)return r;var f=t.P;if(!f)return-1/0;i=f.site;var l=i.x,c=i.y,d=c-n;if(!d)return l;var p=l-r,g=1/s-1/d,v=p/d;return g?(-v+Math.sqrt(v*v-2*g*(p*p/(-2*d)-c+d/2+a-s/2)))/g+r:(r+l)/2}function Su(t,n){var i=t.N;if(i)return sa(i,n);var r=t.site;return r.y===n?r.x:1/0}function ua(t){this.site=t,this.edges=[]}ua.prototype.prepare=function(){for(var t=this.edges,n=t.length,i;n--;)i=t[n].edge,(!i.b||!i.a)&&t.splice(n,1);return t.sort(la),t.length};function bu(t){for(var n=t[0][0],i=t[1][0],r=t[0][1],a=t[1][1],s,f,l,c,d=xe,p=d.length,g,v,M,C,x,P;p--;)if(g=d[p],!(!g||!g.prepare()))for(M=g.edges,C=M.length,v=0;v<C;)P=M[v].end(),l=P.x,c=P.y,x=M[++v%C].start(),s=x.x,f=x.y,(q(l-s)>X||q(c-f)>X)&&(M.splice(v,0,new Hn(ku(g.site,P,q(l-n)<X&&a-c>X?{x:n,y:q(s-n)<X?f:a}:q(c-a)<X&&i-l>X?{x:q(f-a)<X?s:i,y:a}:q(l-i)<X&&c-r>X?{x:i,y:q(s-i)<X?f:r}:q(c-r)<X&&l-n>X?{x:q(f-r)<X?s:n,y:r}:null),g.site,null)),++C)}function la(t,n){return n.angle-t.angle}function Cu(){qn(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ie(t){var n=t.P,i=t.N;if(!(!n||!i)){var r=n.site,a=t.site,s=i.site;if(r!==s){var f=a.x,l=a.y,c=r.x-f,d=r.y-l,p=s.x-f,g=s.y-l,v=2*(c*g-d*p);if(!(v>=-ln)){var M=c*c+d*d,C=p*p+g*g,x=(g*M-d*C)/v,P=(c*C-p*M)/v,g=P+l,w=oa.pop()||new Cu;w.arc=t,w.site=a,w.x=x+f,w.y=g+Math.sqrt(x*x+P*P),w.cy=g,t.circle=w;for(var b=null,L=Xe._;L;)if(w.y<L.y||w.y===L.y&&w.x<=L.x)if(L.L)L=L.L;else{b=L.P;break}else if(L.R)L=L.R;else{b=L;break}Xe.insert(b,w),b||(tr=w)}}}}function Ue(t){var n=t.circle;n&&(n.P||(tr=n.N),Xe.remove(n),oa.push(n),qn(n),t.circle=null)}function Tu(t){for(var n=Ne,i=ko(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length,a;r--;)a=n[r],(!Du(a,t)||!i(a)||q(a.a.x-a.b.x)<X&&q(a.a.y-a.b.y)<X)&&(a.a=a.b=null,n.splice(r,1))}function Du(t,n){var i=t.b;if(i)return!0;var r=t.a,a=n[0][0],s=n[1][0],f=n[0][1],l=n[1][1],c=t.l,d=t.r,p=c.x,g=c.y,v=d.x,M=d.y,C=(p+v)/2,x=(g+M)/2,P,w;if(M===g){if(C<a||C>=s)return;if(p>v){if(!r)r={x:C,y:f};else if(r.y>=l)return;i={x:C,y:l}}else{if(!r)r={x:C,y:l};else if(r.y<f)return;i={x:C,y:f}}}else if(P=(p-v)/(M-g),w=x-P*C,P<-1||P>1)if(p>v){if(!r)r={x:(f-w)/P,y:f};else if(r.y>=l)return;i={x:(l-w)/P,y:l}}else{if(!r)r={x:(l-w)/P,y:l};else if(r.y<f)return;i={x:(f-w)/P,y:f}}else if(g<M){if(!r)r={x:a,y:P*a+w};else if(r.x>=s)return;i={x:s,y:P*s+w}}else{if(!r)r={x:s,y:P*s+w};else if(r.x<a)return;i={x:a,y:P*a+w}}return t.a=r,t.b=i,!0}function ha(t,n){this.l=t,this.r=n,this.a=this.b=null}function Je(t,n,i,r){var a=new ha(t,n);return Ne.push(a),i&&Fn(a,t,n,i),r&&Fn(a,n,t,r),xe[t.i].edges.push(new Hn(a,t,n)),xe[n.i].edges.push(new Hn(a,n,t)),a}function ku(t,n,i){var r=new ha(t,null);return r.a=n,r.b=i,Ne.push(r),r}function Fn(t,n,i,r){!t.a&&!t.b?(t.a=r,t.l=n,t.r=i):t.l===i?t.b=r:t.a=r}function Hn(t,n,i){var r=t.a,a=t.b;this.edge=t,this.site=n,this.angle=i?Math.atan2(i.y-n.y,i.x-n.x):t.l===n?Math.atan2(a.x-r.x,r.y-a.y):Math.atan2(r.x-a.x,a.y-r.y)}Hn.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function nr(){this._=null}function qn(t){t.U=t.C=t.L=t.R=t.P=t.N=null}nr.prototype={insert:function(t,n){var i,r,a;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;i=t}else this._?(t=fa(this._),n.P=null,n.N=t,t.P=t.L=n,i=t):(n.P=n.N=null,this._=n,i=null);for(n.L=n.R=null,n.U=i,n.C=!0,t=n;i&&i.C;)r=i.U,i===r.L?(a=r.R,a&&a.C?(i.C=a.C=!1,r.C=!0,t=r):(t===i.R&&(je(this,i),t=i,i=t.U),i.C=!1,r.C=!0,Ke(this,r))):(a=r.L,a&&a.C?(i.C=a.C=!1,r.C=!0,t=r):(t===i.L&&(Ke(this,i),t=i,i=t.U),i.C=!1,r.C=!0,je(this,r))),i=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n=t.U,i,r=t.L,a=t.R,s,f;if(r?a?s=fa(a):s=r:s=a,n?n.L===t?n.L=s:n.R=s:this._=s,r&&a?(f=s.C,s.C=t.C,s.L=r,r.U=s,s!==a?(n=s.U,s.U=t.U,t=s.R,n.L=t,s.R=a,a.U=s):(s.U=n,n=s,t=s.R)):(f=t.C,t=s),t&&(t.U=n),!f){if(t&&t.C){t.C=!1;return}do{if(t===this._)break;if(t===n.L){if(i=n.R,i.C&&(i.C=!1,n.C=!0,je(this,n),i=n.R),i.L&&i.L.C||i.R&&i.R.C){(!i.R||!i.R.C)&&(i.L.C=!1,i.C=!0,Ke(this,i),i=n.R),i.C=n.C,n.C=i.R.C=!1,je(this,n),t=this._;break}}else if(i=n.L,i.C&&(i.C=!1,n.C=!0,Ke(this,n),i=n.L),i.L&&i.L.C||i.R&&i.R.C){(!i.L||!i.L.C)&&(i.R.C=!1,i.C=!0,je(this,i),i=n.L),i.C=n.C,n.C=i.L.C=!1,Ke(this,n),t=this._;break}i.C=!0,t=n,n=n.U}while(!t.C);t&&(t.C=!1)}}};function je(t,n){var i=n,r=n.R,a=i.U;a?a.L===i?a.L=r:a.R=r:t._=r,r.U=a,i.U=r,i.R=r.L,i.R&&(i.R.U=i),r.L=i}function Ke(t,n){var i=n,r=n.L,a=i.U;a?a.L===i?a.L=r:a.R=r:t._=r,r.U=a,i.U=r,i.L=r.R,i.L&&(i.L.U=i),r.R=i}function fa(t){for(;t.L;)t=t.L;return t}function ir(t,n){var i=t.sort(Au).pop(),r,a,s;for(Ne=[],xe=new Array(t.length),ze=new nr,Xe=new nr;;)if(s=tr,i&&(!s||i.y<s.y||i.y===s.y&&i.x<s.x))(i.x!==r||i.y!==a)&&(xe[i.i]=new ua(i),Eu(i),r=i.x,a=i.y),i=t.pop();else if(s)Lu(s.arc);else break;n&&(Tu(n),bu(n));var f={cells:xe,edges:Ne};return ze=Xe=Ne=xe=null,f}function Au(t,n){return n.y-t.y||n.x-t.x}m.geom.voronoi=function(t){var n=Ae,i=Ye,r=n,a=i,s=Wn;if(t)return f(t);function f(c){var d=new Array(c.length),p=s[0][0],g=s[0][1],v=s[1][0],M=s[1][1];return ir(l(c),s).cells.forEach(function(C,x){var P=C.edges,w=C.site,b=d[x]=P.length?P.map(function(L){var E=L.start();return[E.x,E.y]}):w.x>=p&&w.x<=v&&w.y>=g&&w.y<=M?[[p,M],[v,M],[v,g],[p,g]]:[];b.point=c[x]}),d}function l(c){return c.map(function(d,p){return{x:Math.round(r(d,p)/X)*X,y:Math.round(a(d,p)/X)*X,i:p}})}return f.links=function(c){return ir(l(c)).edges.filter(function(d){return d.l&&d.r}).map(function(d){return{source:c[d.l.i],target:c[d.r.i]}})},f.triangles=function(c){var d=[];return ir(l(c)).cells.forEach(function(p,g){for(var v=p.site,M=p.edges.sort(la),C=-1,x=M.length,P,w,b=M[x-1].edge,L=b.l===v?b.r:b.l;++C<x;)P=b,w=L,b=M[C].edge,L=b.l===v?b.r:b.l,g<w.i&&g<L.i&&Nu(v,w,L)<0&&d.push([c[g],c[w.i],c[L.i]])}),d},f.x=function(c){return arguments.length?(r=at(n=c),f):n},f.y=function(c){return arguments.length?(a=at(i=c),f):i},f.clipExtent=function(c){return arguments.length?(s=c??Wn,f):s===Wn?null:s},f.size=function(c){return arguments.length?f.clipExtent(c&&[[0,0],c]):s===Wn?null:s&&s[1]},f};var Wn=[[-1e6,-1e6],[1e6,1e6]];function Nu(t,n,i){return(t.x-i.x)*(n.y-t.y)-(t.x-n.x)*(i.y-t.y)}m.geom.delaunay=function(t){return m.geom.voronoi().triangles(t)},m.geom.quadtree=function(t,n,i,r,a){var s=Ae,f=Ye,l;if(l=arguments.length)return s=zu,f=Iu,l===3&&(a=i,r=n,i=n=0),c(t);function c(d){var p,g=at(s),v=at(f),M,C,x,P,w,b,L,E;if(n!=null)w=n,b=i,L=r,E=a;else if(L=E=-(w=b=1/0),M=[],C=[],P=d.length,l)for(x=0;x<P;++x)p=d[x],p.x<w&&(w=p.x),p.y<b&&(b=p.y),p.x>L&&(L=p.x),p.y>E&&(E=p.y),M.push(p.x),C.push(p.y);else for(x=0;x<P;++x){var N=+g(p=d[x],x),k=+v(p,x);N<w&&(w=N),k<b&&(b=k),N>L&&(L=N),k>E&&(E=k),M.push(N),C.push(k)}var A=L-w,D=E-b;A>D?E=b+A:L=w+D;function B(W,G,z,R,H,I,F,j){if(!(isNaN(z)||isNaN(R)))if(W.leaf){var $=W.x,et=W.y;if($!=null)if(q($-z)+q(et-R)<.01)Z(W,G,z,R,H,I,F,j);else{var rt=W.point;W.x=W.y=W.point=null,Z(W,rt,$,et,H,I,F,j),Z(W,G,z,R,H,I,F,j)}else W.x=z,W.y=R,W.point=G}else Z(W,G,z,R,H,I,F,j)}function Z(W,G,z,R,H,I,F,j){var $=(H+F)*.5,et=(I+j)*.5,rt=z>=$,st=R>=et,wt=st<<1|rt;W.leaf=!1,W=W.nodes[wt]||(W.nodes[wt]=ca()),rt?H=$:F=$,st?I=et:j=et,B(W,G,z,R,H,I,F,j)}var Y=ca();if(Y.add=function(W){B(Y,W,+g(W,++x),+v(W,x),w,b,L,E)},Y.visit=function(W){$e(W,Y,w,b,L,E)},Y.find=function(W){return Uu(Y,W[0],W[1],w,b,L,E)},x=-1,n==null){for(;++x<P;)B(Y,d[x],M[x],C[x],w,b,L,E);--x}else d.forEach(Y.add);return M=C=d=p=null,Y}return c.x=function(d){return arguments.length?(s=d,c):s},c.y=function(d){return arguments.length?(f=d,c):f},c.extent=function(d){return arguments.length?(d==null?n=i=r=a=null:(n=+d[0][0],i=+d[0][1],r=+d[1][0],a=+d[1][1]),c):n==null?null:[[n,i],[r,a]]},c.size=function(d){return arguments.length?(d==null?n=i=r=a=null:(n=i=0,r=+d[0],a=+d[1]),c):n==null?null:[r-n,a-i]},c};function zu(t){return t.x}function Iu(t){return t.y}function ca(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function $e(t,n,i,r,a,s){if(!t(n,i,r,a,s)){var f=(i+a)*.5,l=(r+s)*.5,c=n.nodes;c[0]&&$e(t,c[0],i,r,f,l),c[1]&&$e(t,c[1],f,r,a,l),c[2]&&$e(t,c[2],i,l,f,s),c[3]&&$e(t,c[3],f,l,a,s)}}function Uu(t,n,i,r,a,s,f){var l=1/0,c;return function d(p,g,v,M,C){if(!(g>s||v>f||M<r||C<a)){if(x=p.point){var x,P=n-p.x,w=i-p.y,b=P*P+w*w;if(b<l){var L=Math.sqrt(l=b);r=n-L,a=i-L,s=n+L,f=i+L,c=x}}for(var E=p.nodes,N=(g+M)*.5,k=(v+C)*.5,A=n>=N,D=i>=k,B=D<<1|A,Z=B+4;B<Z;++B)if(p=E[B&3])switch(B&3){case 0:d(p,g,v,N,k);break;case 1:d(p,N,v,M,k);break;case 2:d(p,g,k,N,C);break;case 3:d(p,N,k,M,C);break}}}(t,r,a,s,f),c}m.interpolateRgb=rr;function rr(t,n){t=m.rgb(t),n=m.rgb(n);var i=t.r,r=t.g,a=t.b,s=n.r-i,f=n.g-r,l=n.b-a;return function(c){return"#"+be(Math.round(i+s*c))+be(Math.round(r+f*c))+be(Math.round(a+l*c))}}m.interpolateObject=da;function da(t,n){var i={},r={},a;for(a in t)a in n?i[a]=Me(t[a],n[a]):r[a]=t[a];for(a in n)a in t||(r[a]=n[a]);return function(s){for(a in i)r[a]=i[a](s);return r}}m.interpolateNumber=Qt;function Qt(t,n){return t=+t,n=+n,function(i){return t*(1-i)+n*i}}m.interpolateString=pa;function pa(t,n){var i=or.lastIndex=ar.lastIndex=0,r,a,s,f=-1,l=[],c=[];for(t=t+"",n=n+"";(r=or.exec(t))&&(a=ar.exec(n));)(s=a.index)>i&&(s=n.slice(i,s),l[f]?l[f]+=s:l[++f]=s),(r=r[0])===(a=a[0])?l[f]?l[f]+=a:l[++f]=a:(l[++f]=null,c.push({i:f,x:Qt(r,a)})),i=ar.lastIndex;return i<n.length&&(s=n.slice(i),l[f]?l[f]+=s:l[++f]=s),l.length<2?c[0]?(n=c[0].x,function(d){return n(d)+""}):function(){return n}:(n=c.length,function(d){for(var p=0,g;p<n;++p)l[(g=c[p]).i]=g.x(d);return l.join("")})}var or=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ar=new RegExp(or.source,"g");m.interpolate=Me;function Me(t,n){for(var i=m.interpolators.length,r;--i>=0&&!(r=m.interpolators[i](t,n)););return r}m.interpolators=[function(t,n){var i=typeof n;return(i==="string"?pn.has(n.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(n)?rr:pa:n instanceof de?rr:Array.isArray(n)?Vn:i==="object"&&isNaN(n)?da:Qt)(t,n)}],m.interpolateArray=Vn;function Vn(t,n){var i=[],r=[],a=t.length,s=n.length,f=Math.min(t.length,n.length),l;for(l=0;l<f;++l)i.push(Me(t[l],n[l]));for(;l<a;++l)r[l]=t[l];for(;l<s;++l)r[l]=n[l];return function(c){for(l=0;l<f;++l)r[l]=i[l](c);return r}}var _a=function(){return mt},Bu=m.map({linear:_a,poly:qu,quad:function(){return Zu},cubic:function(){return Fu},sin:function(){return Wu},exp:function(){return Vu},circle:function(){return Gu},elastic:Yu,back:Xu,bounce:function(){return Ju}}),Ru=m.map({in:mt,out:ga,"in-out":ma,"out-in":function(t){return ma(ga(t))}});m.ease=function(t){var n=t.indexOf("-"),i=n>=0?t.slice(0,n):t,r=n>=0?t.slice(n+1):"in";return i=Bu.get(i)||_a,r=Ru.get(r)||mt,Ou(r(i.apply(null,J.call(arguments,1))))};function Ou(t){return function(n){return n<=0?0:n>=1?1:t(n)}}function ga(t){return function(n){return 1-t(1-n)}}function ma(t){return function(n){return .5*(n<.5?t(2*n):2-t(2-2*n))}}function Zu(t){return t*t}function Fu(t){return t*t*t}function Hu(t){if(t<=0)return 0;if(t>=1)return 1;var n=t*t,i=n*t;return 4*(t<.5?i:3*(t-n)+i-.75)}function qu(t){return function(n){return Math.pow(n,t)}}function Wu(t){return 1-Math.cos(t*dt)}function Vu(t){return Math.pow(2,10*(t-1))}function Gu(t){return 1-Math.sqrt(1-t*t)}function Yu(t,n){var i;return arguments.length<2&&(n=.45),arguments.length?i=n/kt*Math.asin(1/t):(t=1,i=n/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-i)*kt/n)}}function Xu(t){return t||(t=1.70158),function(n){return n*n*((t+1)*n-t)}}function Ju(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}m.interpolateHcl=ju;function ju(t,n){t=m.hcl(t),n=m.hcl(n);var i=t.h,r=t.c,a=t.l,s=n.h-i,f=n.c-r,l=n.l-a;return isNaN(f)&&(f=0,r=isNaN(r)?n.c:r),isNaN(s)?(s=0,i=isNaN(i)?n.h:i):s>180?s-=360:s<-180&&(s+=360),function(c){return Ci(i+s*c,r+f*c,a+l*c)+""}}m.interpolateHsl=Ku;function Ku(t,n){t=m.hsl(t),n=m.hsl(n);var i=t.h,r=t.s,a=t.l,s=n.h-i,f=n.s-r,l=n.l-a;return isNaN(f)&&(f=0,r=isNaN(r)?n.s:r),isNaN(s)?(s=0,i=isNaN(i)?n.h:i):s>180?s-=360:s<-180&&(s+=360),function(c){return Si(i+s*c,r+f*c,a+l*c)+""}}m.interpolateLab=$u;function $u(t,n){t=m.lab(t),n=m.lab(n);var i=t.l,r=t.a,a=t.b,s=n.l-i,f=n.a-r,l=n.b-a;return function(c){return io(i+s*c,r+f*c,a+l*c)+""}}m.interpolateRound=va;function va(t,n){return n-=t,function(i){return Math.round(t+n*i)}}m.transform=function(t){var n=lt.createElementNS(m.ns.prefix.svg,"g");return(m.transform=function(i){if(i!=null){n.setAttribute("transform",i);var r=n.transform.baseVal.consolidate()}return new ya(r?r.matrix:tl)})(t)};function ya(t){var n=[t.a,t.b],i=[t.c,t.d],r=Ma(n),a=xa(n,i),s=Ma(Qu(i,n,-a))||0;n[0]*i[1]<i[0]*n[1]&&(n[0]*=-1,n[1]*=-1,r*=-1,a*=-1),this.rotate=(r?Math.atan2(n[1],n[0]):Math.atan2(-i[0],i[1]))*ft,this.translate=[t.e,t.f],this.scale=[r,s],this.skew=s?Math.atan2(a,s)*ft:0}ya.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function xa(t,n){return t[0]*n[0]+t[1]*n[1]}function Ma(t){var n=Math.sqrt(xa(t,t));return n&&(t[0]/=n,t[1]/=n),n}function Qu(t,n,i){return t[0]+=i*n[0],t[1]+=i*n[1],t}var tl={a:1,b:0,c:0,d:1,e:0,f:0};m.interpolateTransform=wa;function Be(t){return t.length?t.pop()+",":""}function el(t,n,i,r){if(t[0]!==n[0]||t[1]!==n[1]){var a=i.push("translate(",null,",",null,")");r.push({i:a-4,x:Qt(t[0],n[0])},{i:a-2,x:Qt(t[1],n[1])})}else(n[0]||n[1])&&i.push("translate("+n+")")}function nl(t,n,i,r){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),r.push({i:i.push(Be(i)+"rotate(",null,")")-2,x:Qt(t,n)})):n&&i.push(Be(i)+"rotate("+n+")")}function il(t,n,i,r){t!==n?r.push({i:i.push(Be(i)+"skewX(",null,")")-2,x:Qt(t,n)}):n&&i.push(Be(i)+"skewX("+n+")")}function rl(t,n,i,r){if(t[0]!==n[0]||t[1]!==n[1]){var a=i.push(Be(i)+"scale(",null,",",null,")");r.push({i:a-4,x:Qt(t[0],n[0])},{i:a-2,x:Qt(t[1],n[1])})}else(n[0]!==1||n[1]!==1)&&i.push(Be(i)+"scale("+n+")")}function wa(t,n){var i=[],r=[];return t=m.transform(t),n=m.transform(n),el(t.translate,n.translate,i,r),nl(t.rotate,n.rotate,i,r),il(t.skew,n.skew,i,r),rl(t.scale,n.scale,i,r),t=n=null,function(a){for(var s=-1,f=r.length,l;++s<f;)i[(l=r[s]).i]=l.x(a);return i.join("")}}function ol(t,n){return n=(n-=t=+t)||1/n,function(i){return(i-t)/n}}function al(t,n){return n=(n-=t=+t)||1/n,function(i){return Math.max(0,Math.min(1,(i-t)/n))}}m.layout={},m.layout.bundle=function(){return function(t){for(var n=[],i=-1,r=t.length;++i<r;)n.push(sl(t[i]));return n}};function sl(t){for(var n=t.source,i=t.target,r=ul(n,i),a=[n];n!==r;)n=n.parent,a.push(n);for(var s=a.length;i!==r;)a.splice(s,0,i),i=i.parent;return a}function Pa(t){for(var n=[],i=t.parent;i!=null;)n.push(t),t=i,i=i.parent;return n.push(t),n}function ul(t,n){if(t===n)return t;for(var i=Pa(t),r=Pa(n),a=i.pop(),s=r.pop(),f=null;a===s;)f=a,a=i.pop(),s=r.pop();return f}m.layout.chord=function(){var t={},n,i,r,a,s=0,f,l,c;function d(){var g={},v=[],M=m.range(a),C=[],x,P,w,b,L;for(n=[],i=[],x=0,b=-1;++b<a;){for(P=0,L=-1;++L<a;)P+=r[b][L];v.push(P),C.push(m.range(a)),x+=P}for(f&&M.sort(function(Y,W){return f(v[Y],v[W])}),l&&C.forEach(function(Y,W){Y.sort(function(G,z){return l(r[W][G],r[W][z])})}),x=(kt-s*a)/x,P=0,b=-1;++b<a;){for(w=P,L=-1;++L<a;){var E=M[b],N=C[E][L],k=r[E][N],A=P,D=P+=k*x;g[E+"-"+N]={index:E,subindex:N,startAngle:A,endAngle:D,value:k}}i[E]={index:E,startAngle:w,endAngle:P,value:v[E]},P+=s}for(b=-1;++b<a;)for(L=b-1;++L<a;){var B=g[b+"-"+L],Z=g[L+"-"+b];(B.value||Z.value)&&n.push(B.value<Z.value?{source:Z,target:B}:{source:B,target:Z})}c&&p()}function p(){n.sort(function(g,v){return c((g.source.value+g.target.value)/2,(v.source.value+v.target.value)/2)})}return t.matrix=function(g){return arguments.length?(a=(r=g)&&r.length,n=i=null,t):r},t.padding=function(g){return arguments.length?(s=g,n=i=null,t):s},t.sortGroups=function(g){return arguments.length?(f=g,n=i=null,t):f},t.sortSubgroups=function(g){return arguments.length?(l=g,n=null,t):l},t.sortChords=function(g){return arguments.length?(c=g,n&&p(),t):c},t.chords=function(){return n||d(),n},t.groups=function(){return i||d(),i},t},m.layout.force=function(){var t={},n=m.dispatch("start","tick","end"),i,r=[1,1],a,s,f=.9,l=dl,c=pl,d=-30,p=_l,g=.1,v=.64,M=[],C=[],x,P,w;function b(E){return function(N,k,A,D){if(N.point!==E){var B=N.cx-E.x,Z=N.cy-E.y,Y=D-k,W=B*B+Z*Z;if(Y*Y/v<W){if(W<p){var G=N.charge/W;E.px-=B*G,E.py-=Z*G}return!0}if(N.point&&W&&W<p){var G=N.pointCharge/W;E.px-=B*G,E.py-=Z*G}}return!N.charge}}t.tick=function(){if((s*=.99)<.005)return i=null,n.end({type:"end",alpha:s=0}),!0;var E=M.length,N=C.length,k,A,D,B,Z,Y,W,G,z;for(A=0;A<N;++A)D=C[A],B=D.source,Z=D.target,G=Z.x-B.x,z=Z.y-B.y,(Y=G*G+z*z)&&(Y=s*P[A]*((Y=Math.sqrt(Y))-x[A])/Y,G*=Y,z*=Y,Z.x-=G*(W=B.weight+Z.weight?B.weight/(B.weight+Z.weight):.5),Z.y-=z*W,B.x+=G*(W=1-W),B.y+=z*W);if((W=s*g)&&(G=r[0]/2,z=r[1]/2,A=-1,W))for(;++A<E;)D=M[A],D.x+=(G-D.x)*W,D.y+=(z-D.y)*W;if(d)for(La(k=m.geom.quadtree(M),s,w),A=-1;++A<E;)(D=M[A]).fixed||k.visit(b(D));for(A=-1;++A<E;)D=M[A],D.fixed?(D.x=D.px,D.y=D.py):(D.x-=(D.px-(D.px=D.x))*f,D.y-=(D.py-(D.py=D.y))*f);n.tick({type:"tick",alpha:s})},t.nodes=function(E){return arguments.length?(M=E,t):M},t.links=function(E){return arguments.length?(C=E,t):C},t.size=function(E){return arguments.length?(r=E,t):r},t.linkDistance=function(E){return arguments.length?(l=typeof E=="function"?E:+E,t):l},t.distance=t.linkDistance,t.linkStrength=function(E){return arguments.length?(c=typeof E=="function"?E:+E,t):c},t.friction=function(E){return arguments.length?(f=+E,t):f},t.charge=function(E){return arguments.length?(d=typeof E=="function"?E:+E,t):d},t.chargeDistance=function(E){return arguments.length?(p=E*E,t):Math.sqrt(p)},t.gravity=function(E){return arguments.length?(g=+E,t):g},t.theta=function(E){return arguments.length?(v=E*E,t):Math.sqrt(v)},t.alpha=function(E){return arguments.length?(E=+E,s?E>0?s=E:(i.c=null,i.t=NaN,i=null,n.end({type:"end",alpha:s=0})):E>0&&(n.start({type:"start",alpha:s=E}),i=xn(t.tick)),t):s},t.start=function(){var E,N=M.length,k=C.length,A=r[0],D=r[1],B,Z;for(E=0;E<N;++E)(Z=M[E]).index=E,Z.weight=0;for(E=0;E<k;++E)Z=C[E],typeof Z.source=="number"&&(Z.source=M[Z.source]),typeof Z.target=="number"&&(Z.target=M[Z.target]),++Z.source.weight,++Z.target.weight;for(E=0;E<N;++E)Z=M[E],isNaN(Z.x)&&(Z.x=Y("x",A)),isNaN(Z.y)&&(Z.y=Y("y",D)),isNaN(Z.px)&&(Z.px=Z.x),isNaN(Z.py)&&(Z.py=Z.y);if(x=[],typeof l=="function")for(E=0;E<k;++E)x[E]=+l.call(this,C[E],E);else for(E=0;E<k;++E)x[E]=l;if(P=[],typeof c=="function")for(E=0;E<k;++E)P[E]=+c.call(this,C[E],E);else for(E=0;E<k;++E)P[E]=c;if(w=[],typeof d=="function")for(E=0;E<N;++E)w[E]=+d.call(this,M[E],E);else for(E=0;E<N;++E)w[E]=d;function Y(W,G){if(!B){for(B=new Array(N),H=0;H<N;++H)B[H]=[];for(H=0;H<k;++H){var z=C[H];B[z.source.index].push(z.target),B[z.target.index].push(z.source)}}for(var R=B[E],H=-1,I=R.length,F;++H<I;)if(!isNaN(F=R[H][W]))return F;return Math.random()*G}return t.resume()},t.resume=function(){return t.alpha(.1)},t.stop=function(){return t.alpha(0)},t.drag=function(){if(a||(a=m.behavior.drag().origin(mt).on("dragstart.force",ll).on("drag.force",L).on("dragend.force",hl)),!arguments.length)return a;this.on("mouseover.force",fl).on("mouseout.force",cl).call(a)};function L(E){E.px=m.event.x,E.py=m.event.y,t.resume()}return m.rebind(t,n,"on")};function ll(t){t.fixed|=2}function hl(t){t.fixed&=~6}function fl(t){t.fixed|=4,t.px=t.x,t.py=t.y}function cl(t){t.fixed&=~4}function La(t,n,i){var r=0,a=0;if(t.charge=0,!t.leaf)for(var s=t.nodes,f=s.length,l=-1,c;++l<f;)c=s[l],c!=null&&(La(c,n,i),t.charge+=c.charge,r+=c.charge*c.cx,a+=c.charge*c.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var d=n*i[t.point.index];t.charge+=t.pointCharge=d,r+=d*t.point.x,a+=d*t.point.y}t.cx=r/t.charge,t.cy=a/t.charge}var dl=20,pl=1,_l=1/0;m.layout.hierarchy=function(){var t=vl,n=gl,i=ml;function r(a){var s=[a],f=[],l;for(a.depth=0;(l=s.pop())!=null;)if(f.push(l),(d=n.call(r,l,l.depth))&&(c=d.length)){for(var c,d,p;--c>=0;)s.push(p=d[c]),p.parent=l,p.depth=l.depth+1;i&&(l.value=0),l.children=d}else i&&(l.value=+i.call(r,l,l.depth)||0),delete l.children;return Gt(a,function(g){var v,M;t&&(v=g.children)&&v.sort(t),i&&(M=g.parent)&&(M.value+=g.value)}),f}return r.sort=function(a){return arguments.length?(t=a,r):t},r.children=function(a){return arguments.length?(n=a,r):n},r.value=function(a){return arguments.length?(i=a,r):i},r.revalue=function(a){return i&&(tn(a,function(s){s.children&&(s.value=0)}),Gt(a,function(s){var f;s.children||(s.value=+i.call(r,s,s.depth)||0),(f=s.parent)&&(f.value+=s.value)})),a},r};function Qe(t,n){return m.rebind(t,n,"sort","children","value"),t.nodes=t,t.links=yl,t}function tn(t,n){for(var i=[t];(t=i.pop())!=null;)if(n(t),(a=t.children)&&(r=a.length))for(var r,a;--r>=0;)i.push(a[r])}function Gt(t,n){for(var i=[t],r=[];(t=i.pop())!=null;)if(r.push(t),(f=t.children)&&(s=f.length))for(var a=-1,s,f;++a<s;)i.push(f[a]);for(;(t=r.pop())!=null;)n(t)}function gl(t){return t.children}function ml(t){return t.value}function vl(t,n){return n.value-t.value}function yl(t){return m.merge(t.map(function(n){return(n.children||[]).map(function(i){return{source:n,target:i}})}))}m.layout.partition=function(){var t=m.layout.hierarchy(),n=[1,1];function i(s,f,l,c){var d=s.children;if(s.x=f,s.y=s.depth*c,s.dx=l,s.dy=c,d&&(g=d.length)){var p=-1,g,v,M;for(l=s.value?l/s.value:0;++p<g;)i(v=d[p],f,M=v.value*l,c),f+=M}}function r(s){var f=s.children,l=0;if(f&&(d=f.length))for(var c=-1,d;++c<d;)l=Math.max(l,r(f[c]));return 1+l}function a(s,f){var l=t.call(this,s,f);return i(l[0],0,n[0],n[1]/r(l[0])),l}return a.size=function(s){return arguments.length?(n=s,a):n},Qe(a,t)},m.layout.pie=function(){var t=Number,n=Ea,i=0,r=kt,a=0;function s(f){var l=f.length,c=f.map(function(b,L){return+t.call(s,b,L)}),d=+(typeof i=="function"?i.apply(this,arguments):i),p=(typeof r=="function"?r.apply(this,arguments):r)-d,g=Math.min(Math.abs(p)/l,+(typeof a=="function"?a.apply(this,arguments):a)),v=g*(p<0?-1:1),M=m.sum(c),C=M?(p-l*v)/M:0,x=m.range(l),P=[],w;return n!=null&&x.sort(n===Ea?function(b,L){return c[L]-c[b]}:function(b,L){return n(f[b],f[L])}),x.forEach(function(b){P[b]={data:f[b],value:w=c[b],startAngle:d,endAngle:d+=w*C+v,padAngle:g}}),P}return s.value=function(f){return arguments.length?(t=f,s):t},s.sort=function(f){return arguments.length?(n=f,s):n},s.startAngle=function(f){return arguments.length?(i=f,s):i},s.endAngle=function(f){return arguments.length?(r=f,s):r},s.padAngle=function(f){return arguments.length?(a=f,s):a},s};var Ea={};m.layout.stack=function(){var t=mt,n=sr,i=ur,r=wl,a=xl,s=Ml;function f(l,c){if(!(C=l.length))return l;var d=l.map(function(b,L){return t.call(f,b,L)}),p=d.map(function(b){return b.map(function(L,E){return[a.call(f,L,E),s.call(f,L,E)]})}),g=n.call(f,p,c);d=m.permute(d,g),p=m.permute(p,g);var v=i.call(f,p,c),M=d[0].length,C,x,P,w;for(P=0;P<M;++P)for(r.call(f,d[0][P],w=v[P],p[0][P][1]),x=1;x<C;++x)r.call(f,d[x][P],w+=p[x-1][P][1],p[x][P][1]);return l}return f.values=function(l){return arguments.length?(t=l,f):t},f.order=function(l){return arguments.length?(n=typeof l=="function"?l:Pl.get(l)||sr,f):n},f.offset=function(l){return arguments.length?(i=typeof l=="function"?l:Ll.get(l)||ur,f):i},f.x=function(l){return arguments.length?(a=l,f):a},f.y=function(l){return arguments.length?(s=l,f):s},f.out=function(l){return arguments.length?(r=l,f):r},f};function xl(t){return t.x}function Ml(t){return t.y}function wl(t,n,i){t.y0=n,t.y=i}var Pl=m.map({"inside-out":function(t){var n=t.length,i,r,a=t.map(El),s=t.map(Sl),f=m.range(n).sort(function(g,v){return a[g]-a[v]}),l=0,c=0,d=[],p=[];for(i=0;i<n;++i)r=f[i],l<c?(l+=s[r],d.push(r)):(c+=s[r],p.push(r));return p.reverse().concat(d)},reverse:function(t){return m.range(t.length).reverse()},default:sr}),Ll=m.map({silhouette:function(t){var n=t.length,i=t[0].length,r=[],a=0,s,f,l,c=[];for(f=0;f<i;++f){for(s=0,l=0;s<n;s++)l+=t[s][f][1];l>a&&(a=l),r.push(l)}for(f=0;f<i;++f)c[f]=(a-r[f])/2;return c},wiggle:function(t){var n=t.length,i=t[0],r=i.length,a,s,f,l,c,d,p,g,v,M=[];for(M[0]=g=v=0,s=1;s<r;++s){for(a=0,l=0;a<n;++a)l+=t[a][s][1];for(a=0,c=0,p=i[s][0]-i[s-1][0];a<n;++a){for(f=0,d=(t[a][s][1]-t[a][s-1][1])/(2*p);f<a;++f)d+=(t[f][s][1]-t[f][s-1][1])/p;c+=d*t[a][s][1]}M[s]=g-=l?c/l*p:0,g<v&&(v=g)}for(s=0;s<r;++s)M[s]-=v;return M},expand:function(t){var n=t.length,i=t[0].length,r=1/n,a,s,f,l=[];for(s=0;s<i;++s){for(a=0,f=0;a<n;a++)f+=t[a][s][1];if(f)for(a=0;a<n;a++)t[a][s][1]/=f;else for(a=0;a<n;a++)t[a][s][1]=r}for(s=0;s<i;++s)l[s]=0;return l},zero:ur});function sr(t){return m.range(t.length)}function ur(t){for(var n=-1,i=t[0].length,r=[];++n<i;)r[n]=0;return r}function El(t){for(var n=1,i=0,r=t[0][1],a,s=t.length;n<s;++n)(a=t[n][1])>r&&(i=n,r=a);return i}function Sl(t){return t.reduce(bl,0)}function bl(t,n){return t+n[1]}m.layout.histogram=function(){var t=!0,n=Number,i=Tl,r=Cl;function a(s,f){for(var l=[],c=s.map(n,this),d=i.call(this,c,f),p=r.call(this,d,c,f),g,f=-1,v=c.length,M=p.length-1,C=t?1:1/v,x;++f<M;)g=l[f]=[],g.dx=p[f+1]-(g.x=p[f]),g.y=0;if(M>0)for(f=-1;++f<v;)x=c[f],x>=d[0]&&x<=d[1]&&(g=l[m.bisect(p,x,1,M)-1],g.y+=C,g.push(s[f]));return l}return a.value=function(s){return arguments.length?(n=s,a):n},a.range=function(s){return arguments.length?(i=at(s),a):i},a.bins=function(s){return arguments.length?(r=typeof s=="number"?function(f){return Sa(f,s)}:at(s),a):r},a.frequency=function(s){return arguments.length?(t=!!s,a):t},a};function Cl(t,n){return Sa(t,Math.ceil(Math.log(n.length)/Math.LN2+1))}function Sa(t,n){for(var i=-1,r=+t[0],a=(t[1]-r)/n,s=[];++i<=n;)s[i]=a*i+r;return s}function Tl(t){return[m.min(t),m.max(t)]}m.layout.pack=function(){var t=m.layout.hierarchy().sort(Dl),n=0,i=[1,1],r;function a(s,f){var l=t.call(this,s,f),c=l[0],d=i[0],p=i[1],g=r==null?Math.sqrt:typeof r=="function"?r:function(){return r};if(c.x=c.y=0,Gt(c,function(M){M.r=+g(M.value)}),Gt(c,Ta),n){var v=n*(r?1:Math.max(2*c.r/d,2*c.r/p))/2;Gt(c,function(M){M.r+=v}),Gt(c,Ta),Gt(c,function(M){M.r-=v})}return Da(c,d/2,p/2,r?1:1/Math.max(2*c.r/d,2*c.r/p)),l}return a.size=function(s){return arguments.length?(i=s,a):i},a.radius=function(s){return arguments.length?(r=s==null||typeof s=="function"?s:+s,a):r},a.padding=function(s){return arguments.length?(n=+s,a):n},Qe(a,t)};function Dl(t,n){return t.value-n.value}function lr(t,n){var i=t._pack_next;t._pack_next=n,n._pack_prev=t,n._pack_next=i,i._pack_prev=n}function ba(t,n){t._pack_next=n,n._pack_prev=t}function Ca(t,n){var i=n.x-t.x,r=n.y-t.y,a=t.r+n.r;return .999*a*a>i*i+r*r}function Ta(t){if(!(n=t.children)||!(v=n.length))return;var n,i=1/0,r=-1/0,a=1/0,s=-1/0,f,l,c,d,p,g,v;function M(E){i=Math.min(E.x-E.r,i),r=Math.max(E.x+E.r,r),a=Math.min(E.y-E.r,a),s=Math.max(E.y+E.r,s)}if(n.forEach(kl),f=n[0],f.x=-f.r,f.y=0,M(f),v>1&&(l=n[1],l.x=l.r,l.y=0,M(l),v>2))for(c=n[2],ka(f,l,c),M(c),lr(f,c),f._pack_prev=c,lr(c,l),l=f._pack_next,d=3;d<v;d++){ka(f,l,c=n[d]);var C=0,x=1,P=1;for(p=l._pack_next;p!==l;p=p._pack_next,x++)if(Ca(p,c)){C=1;break}if(C==1)for(g=f._pack_prev;g!==p._pack_prev&&!Ca(g,c);g=g._pack_prev,P++);C?(x<P||x==P&&l.r<f.r?ba(f,l=p):ba(f=g,l),d--):(lr(f,c),l=c,M(c))}var w=(i+r)/2,b=(a+s)/2,L=0;for(d=0;d<v;d++)c=n[d],c.x-=w,c.y-=b,L=Math.max(L,c.r+Math.sqrt(c.x*c.x+c.y*c.y));t.r=L,n.forEach(Al)}function kl(t){t._pack_next=t._pack_prev=t}function Al(t){delete t._pack_next,delete t._pack_prev}function Da(t,n,i,r){var a=t.children;if(t.x=n+=r*t.x,t.y=i+=r*t.y,t.r*=r,a)for(var s=-1,f=a.length;++s<f;)Da(a[s],n,i,r)}function ka(t,n,i){var r=t.r+i.r,a=n.x-t.x,s=n.y-t.y;if(r&&(a||s)){var f=n.r+i.r,l=a*a+s*s;f*=f,r*=r;var c=.5+(r-f)/(2*l),d=Math.sqrt(Math.max(0,2*f*(r+l)-(r-=l)*r-f*f))/(2*l);i.x=t.x+c*a+d*s,i.y=t.y+c*s-d*a}else i.x=t.x+r,i.y=t.y}m.layout.tree=function(){var t=m.layout.hierarchy().sort(null).value(null),n=Aa,i=[1,1],r=null;function a(p,g){var v=t.call(this,p,g),M=v[0],C=s(M);if(Gt(C,f),C.parent.m=-C.z,tn(C,l),r)tn(M,d);else{var x=M,P=M,w=M;tn(M,function(N){N.x<x.x&&(x=N),N.x>P.x&&(P=N),N.depth>w.depth&&(w=N)});var b=n(x,P)/2-x.x,L=i[0]/(P.x+n(P,x)/2+b),E=i[1]/(w.depth||1);tn(M,function(N){N.x=(N.x+b)*L,N.y=N.depth*E})}return v}function s(p){for(var g={A:null,children:[p]},v=[g],M;(M=v.pop())!=null;)for(var C=M.children,x,P=0,w=C.length;P<w;++P)v.push((C[P]=x={_:C[P],parent:M,children:(x=C[P].children)&&x.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:P}).a=x);return g.children[0]}function f(p){var g=p.children,v=p.parent.children,M=p.i?v[p.i-1]:null;if(g.length){zl(p);var C=(g[0].z+g[g.length-1].z)/2;M?(p.z=M.z+n(p._,M._),p.m=p.z-C):p.z=C}else M&&(p.z=M.z+n(p._,M._));p.parent.A=c(p,M,p.parent.A||v[0])}function l(p){p._.x=p.z+p.parent.m,p.m+=p.parent.m}function c(p,g,v){if(g){for(var M=p,C=p,x=g,P=M.parent.children[0],w=M.m,b=C.m,L=x.m,E=P.m,N;x=fr(x),M=hr(M),x&&M;)P=hr(P),C=fr(C),C.a=p,N=x.z+L-M.z-w+n(x._,M._),N>0&&(Nl(Il(x,p,v),p,N),w+=N,b+=N),L+=x.m,w+=M.m,E+=P.m,b+=C.m;x&&!fr(C)&&(C.t=x,C.m+=L-b),M&&!hr(P)&&(P.t=M,P.m+=w-E,v=p)}return v}function d(p){p.x*=i[0],p.y=p.depth*i[1]}return a.separation=function(p){return arguments.length?(n=p,a):n},a.size=function(p){return arguments.length?(r=(i=p)==null?d:null,a):r?null:i},a.nodeSize=function(p){return arguments.length?(r=(i=p)==null?null:d,a):r?i:null},Qe(a,t)};function Aa(t,n){return t.parent==n.parent?1:2}function hr(t){var n=t.children;return n.length?n[0]:t.t}function fr(t){var n=t.children,i;return(i=n.length)?n[i-1]:t.t}function Nl(t,n,i){var r=i/(n.i-t.i);n.c-=r,n.s+=i,t.c+=r,n.z+=i,n.m+=i}function zl(t){for(var n=0,i=0,r=t.children,a=r.length,s;--a>=0;)s=r[a],s.z+=n,s.m+=n,n+=s.s+(i+=s.c)}function Il(t,n,i){return t.a.parent===n.parent?t.a:i}m.layout.cluster=function(){var t=m.layout.hierarchy().sort(null).value(null),n=Aa,i=[1,1],r=!1;function a(s,f){var l=t.call(this,s,f),c=l[0],d,p=0;Gt(c,function(x){var P=x.children;P&&P.length?(x.x=Bl(P),x.y=Ul(P)):(x.x=d?p+=n(x,d):0,x.y=0,d=x)});var g=Na(c),v=za(c),M=g.x-n(g,v)/2,C=v.x+n(v,g)/2;return Gt(c,r?function(x){x.x=(x.x-c.x)*i[0],x.y=(c.y-x.y)*i[1]}:function(x){x.x=(x.x-M)/(C-M)*i[0],x.y=(1-(c.y?x.y/c.y:1))*i[1]}),l}return a.separation=function(s){return arguments.length?(n=s,a):n},a.size=function(s){return arguments.length?(r=(i=s)==null,a):r?null:i},a.nodeSize=function(s){return arguments.length?(r=(i=s)!=null,a):r?i:null},Qe(a,t)};function Ul(t){return 1+m.max(t,function(n){return n.y})}function Bl(t){return t.reduce(function(n,i){return n+i.x},0)/t.length}function Na(t){var n=t.children;return n&&n.length?Na(n[0]):t}function za(t){var n=t.children,i;return n&&(i=n.length)?za(n[i-1]):t}m.layout.treemap=function(){var t=m.layout.hierarchy(),n=Math.round,i=[1,1],r=null,a=cr,s=!1,f,l="squarify",c=.5*(1+Math.sqrt(5));function d(x,P){for(var w=-1,b=x.length,L,E;++w<b;)E=(L=x[w]).value*(P<0?0:P),L.area=isNaN(E)||E<=0?0:E}function p(x){var P=x.children;if(P&&P.length){var w=a(x),b=[],L=P.slice(),E,N=1/0,k,A=l==="slice"?w.dx:l==="dice"?w.dy:l==="slice-dice"?x.depth&1?w.dy:w.dx:Math.min(w.dx,w.dy),D;for(d(L,w.dx*w.dy/x.value),b.area=0;(D=L.length)>0;)b.push(E=L[D-1]),b.area+=E.area,l!=="squarify"||(k=v(b,A))<=N?(L.pop(),N=k):(b.area-=b.pop().area,M(b,A,w,!1),A=Math.min(w.dx,w.dy),b.length=b.area=0,N=1/0);b.length&&(M(b,A,w,!0),b.length=b.area=0),P.forEach(p)}}function g(x){var P=x.children;if(P&&P.length){var w=a(x),b=P.slice(),L,E=[];for(d(b,w.dx*w.dy/x.value),E.area=0;L=b.pop();)E.push(L),E.area+=L.area,L.z!=null&&(M(E,L.z?w.dx:w.dy,w,!b.length),E.length=E.area=0);P.forEach(g)}}function v(x,P){for(var w=x.area,b,L=0,E=1/0,N=-1,k=x.length;++N<k;)!(b=x[N].area)||(b<E&&(E=b),b>L&&(L=b));return w*=w,P*=P,w?Math.max(P*L*c/w,w/(P*E*c)):1/0}function M(x,P,w,b){var L=-1,E=x.length,N=w.x,k=w.y,A=P?n(x.area/P):0,D;if(P==w.dx){for((b||A>w.dy)&&(A=w.dy);++L<E;)D=x[L],D.x=N,D.y=k,D.dy=A,N+=D.dx=Math.min(w.x+w.dx-N,A?n(D.area/A):0);D.z=!0,D.dx+=w.x+w.dx-N,w.y+=A,w.dy-=A}else{for((b||A>w.dx)&&(A=w.dx);++L<E;)D=x[L],D.x=N,D.y=k,D.dx=A,k+=D.dy=Math.min(w.y+w.dy-k,A?n(D.area/A):0);D.z=!1,D.dy+=w.y+w.dy-k,w.x+=A,w.dx-=A}}function C(x){var P=f||t(x),w=P[0];return w.x=w.y=0,w.value?(w.dx=i[0],w.dy=i[1]):w.dx=w.dy=0,f&&t.revalue(w),d([w],w.dx*w.dy/w.value),(f?g:p)(w),s&&(f=P),P}return C.size=function(x){return arguments.length?(i=x,C):i},C.padding=function(x){if(!arguments.length)return r;function P(L){var E=x.call(C,L,L.depth);return E==null?cr(L):Ia(L,typeof E=="number"?[E,E,E,E]:E)}function w(L){return Ia(L,x)}var b;return a=(r=x)==null?cr:(b=typeof x)==="function"?P:(b==="number"&&(x=[x,x,x,x]),w),C},C.round=function(x){return arguments.length?(n=x?Math.round:Number,C):n!=Number},C.sticky=function(x){return arguments.length?(s=x,f=null,C):s},C.ratio=function(x){return arguments.length?(c=x,C):c},C.mode=function(x){return arguments.length?(l=x+"",C):l},Qe(C,t)};function cr(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Ia(t,n){var i=t.x+n[3],r=t.y+n[0],a=t.dx-n[1]-n[3],s=t.dy-n[0]-n[2];return a<0&&(i+=a/2,a=0),s<0&&(r+=s/2,s=0),{x:i,y:r,dx:a,dy:s}}m.random={normal:function(t,n){var i=arguments.length;return i<2&&(n=1),i<1&&(t=0),function(){var r,a,s;do r=Math.random()*2-1,a=Math.random()*2-1,s=r*r+a*a;while(!s||s>1);return t+n*r*Math.sqrt(-2*Math.log(s)/s)}},logNormal:function(){var t=m.random.normal.apply(m,arguments);return function(){return Math.exp(t())}},bates:function(t){var n=m.random.irwinHall(t);return function(){return n()/t}},irwinHall:function(t){return function(){for(var n=0,i=0;i<t;i++)n+=Math.random();return n}}},m.scale={};function Re(t){var n=t[0],i=t[t.length-1];return n<i?[n,i]:[i,n]}function Gn(t){return t.rangeExtent?t.rangeExtent():Re(t.range())}function Rl(t,n,i,r){var a=i(t[0],t[1]),s=r(n[0],n[1]);return function(f){return s(a(f))}}function Yn(t,n){var i=0,r=t.length-1,a=t[i],s=t[r],f;return s<a&&(f=i,i=r,r=f,f=a,a=s,s=f),t[i]=n.floor(a),t[r]=n.ceil(s),t}function Ua(t){return t?{floor:function(n){return Math.floor(n/t)*t},ceil:function(n){return Math.ceil(n/t)*t}}:Ol}var Ol={floor:mt,ceil:mt};function Zl(t,n,i,r){var a=[],s=[],f=0,l=Math.min(t.length,n.length)-1;for(t[l]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++f<=l;)a.push(i(t[f-1],t[f])),s.push(r(n[f-1],n[f]));return function(c){var d=m.bisect(t,c,1,l)-1;return s[d](a[d](c))}}m.scale.linear=function(){return Ba([0,1],[0,1],Me,!1)};function Ba(t,n,i,r){var a,s;function f(){var c=Math.min(t.length,n.length)>2?Zl:Rl,d=r?al:ol;return a=c(t,n,d,i),s=c(n,t,d,Me),l}function l(c){return a(c)}return l.invert=function(c){return s(c)},l.domain=function(c){return arguments.length?(t=c.map(Number),f()):t},l.range=function(c){return arguments.length?(n=c,f()):n},l.rangeRound=function(c){return l.range(c).interpolate(va)},l.clamp=function(c){return arguments.length?(r=c,f()):r},l.interpolate=function(c){return arguments.length?(i=c,f()):i},l.ticks=function(c){return pr(t,c)},l.tickFormat=function(c,d){return _r(t,c,d)},l.nice=function(c){return Ra(t,c),f()},l.copy=function(){return Ba(t,n,i,r)},f()}function dr(t,n){return m.rebind(t,n,"range","rangeRound","interpolate","clamp")}function Ra(t,n){return Yn(t,Ua(Oe(t,n)[2])),Yn(t,Ua(Oe(t,n)[2])),t}function Oe(t,n){n==null&&(n=10);var i=Re(t),r=i[1]-i[0],a=Math.pow(10,Math.floor(Math.log(r/n)/Math.LN10)),s=n/r*a;return s<=.15?a*=10:s<=.35?a*=5:s<=.75&&(a*=2),i[0]=Math.ceil(i[0]/a)*a,i[1]=Math.floor(i[1]/a)*a+a*.5,i[2]=a,i}function pr(t,n){return m.range.apply(m,Oe(t,n))}function _r(t,n,i){var r=Oe(t,n);if(i){var a=co.exec(i);if(a.shift(),a[8]==="s"){var s=m.formatPrefix(Math.max(q(r[0]),q(r[1])));return a[7]||(a[7]="."+Xn(s.scale(r[2]))),a[8]="f",i=m.format(a.join("")),function(f){return i(s.scale(f))+s.symbol}}a[7]||(a[7]="."+Hl(a[8],r)),i=a.join("")}else i=",."+Xn(r[2])+"f";return m.format(i)}var Fl={s:1,g:1,p:1,r:1,e:1};function Xn(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function Hl(t,n){var i=Xn(n[2]);return t in Fl?Math.abs(i-Xn(Math.max(q(n[0]),q(n[1]))))+ +(t!=="e"):i-(t==="%")*2}m.scale.log=function(){return Oa(m.scale.linear().domain([0,1]),10,!0,[1,10])};function Oa(t,n,i,r){function a(l){return(i?Math.log(l<0?0:l):-Math.log(l>0?0:-l))/Math.log(n)}function s(l){return i?Math.pow(n,l):-Math.pow(n,-l)}function f(l){return t(a(l))}return f.invert=function(l){return s(t.invert(l))},f.domain=function(l){return arguments.length?(i=l[0]>=0,t.domain((r=l.map(Number)).map(a)),f):r},f.base=function(l){return arguments.length?(n=+l,t.domain(r.map(a)),f):n},f.nice=function(){var l=Yn(r.map(a),i?Math:ql);return t.domain(l),r=l.map(s),f},f.ticks=function(){var l=Re(r),c=[],d=l[0],p=l[1],g=Math.floor(a(d)),v=Math.ceil(a(p)),M=n%1?2:n;if(isFinite(v-g)){if(i){for(;g<v;g++)for(var C=1;C<M;C++)c.push(s(g)*C);c.push(s(g))}else for(c.push(s(g));g++<v;)for(var C=M-1;C>0;C--)c.push(s(g)*C);for(g=0;c[g]<d;g++);for(v=c.length;c[v-1]>p;v--);c=c.slice(g,v)}return c},f.tickFormat=function(l,c){if(!arguments.length)return Za;arguments.length<2?c=Za:typeof c!="function"&&(c=m.format(c));var d=Math.max(1,n*l/f.ticks().length);return function(p){var g=p/s(Math.round(a(p)));return g*n<n-.5&&(g*=n),g<=d?c(p):""}},f.copy=function(){return Oa(t.copy(),n,i,r)},dr(f,t)}var Za=m.format(".0e"),ql={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};m.scale.pow=function(){return Fa(m.scale.linear(),1,[0,1])};function Fa(t,n,i){var r=Jn(n),a=Jn(1/n);function s(f){return t(r(f))}return s.invert=function(f){return a(t.invert(f))},s.domain=function(f){return arguments.length?(t.domain((i=f.map(Number)).map(r)),s):i},s.ticks=function(f){return pr(i,f)},s.tickFormat=function(f,l){return _r(i,f,l)},s.nice=function(f){return s.domain(Ra(i,f))},s.exponent=function(f){return arguments.length?(r=Jn(n=f),a=Jn(1/n),t.domain(i.map(r)),s):n},s.copy=function(){return Fa(t.copy(),n,i)},dr(s,t)}function Jn(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}m.scale.sqrt=function(){return m.scale.pow().exponent(.5)},m.scale.ordinal=function(){return Ha([],{t:"range",a:[[]]})};function Ha(t,n){var i,r,a;function s(l){return r[((i.get(l)||(n.t==="range"?i.set(l,t.push(l)):NaN))-1)%r.length]}function f(l,c){return m.range(t.length).map(function(d){return l+c*d})}return s.domain=function(l){if(!arguments.length)return t;t=[],i=new ut;for(var c=-1,d=l.length,p;++c<d;)i.has(p=l[c])||i.set(p,t.push(p));return s[n.t].apply(s,n.a)},s.range=function(l){return arguments.length?(r=l,a=0,n={t:"range",a:arguments},s):r},s.rangePoints=function(l,c){arguments.length<2&&(c=0);var d=l[0],p=l[1],g=t.length<2?(d=(d+p)/2,0):(p-d)/(t.length-1+c);return r=f(d+g*c/2,g),a=0,n={t:"rangePoints",a:arguments},s},s.rangeRoundPoints=function(l,c){arguments.length<2&&(c=0);var d=l[0],p=l[1],g=t.length<2?(d=p=Math.round((d+p)/2),0):(p-d)/(t.length-1+c)|0;return r=f(d+Math.round(g*c/2+(p-d-(t.length-1+c)*g)/2),g),a=0,n={t:"rangeRoundPoints",a:arguments},s},s.rangeBands=function(l,c,d){arguments.length<2&&(c=0),arguments.length<3&&(d=c);var p=l[1]<l[0],g=l[p-0],v=l[1-p],M=(v-g)/(t.length-c+2*d);return r=f(g+M*d,M),p&&r.reverse(),a=M*(1-c),n={t:"rangeBands",a:arguments},s},s.rangeRoundBands=function(l,c,d){arguments.length<2&&(c=0),arguments.length<3&&(d=c);var p=l[1]<l[0],g=l[p-0],v=l[1-p],M=Math.floor((v-g)/(t.length-c+2*d));return r=f(g+Math.round((v-g-(t.length-c)*M)/2),M),p&&r.reverse(),a=Math.round(M*(1-c)),n={t:"rangeRoundBands",a:arguments},s},s.rangeBand=function(){return a},s.rangeExtent=function(){return Re(n.a[0])},s.copy=function(){return Ha(t,n)},s.domain(t)}m.scale.category10=function(){return m.scale.ordinal().range(Wl)},m.scale.category20=function(){return m.scale.ordinal().range(Vl)},m.scale.category20b=function(){return m.scale.ordinal().range(Gl)},m.scale.category20c=function(){return m.scale.ordinal().range(Yl)};var Wl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(cn),Vl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(cn),Gl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(cn),Yl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(cn);m.scale.quantile=function(){return qa([],[])};function qa(t,n){var i;function r(){var s=0,f=n.length;for(i=[];++s<f;)i[s-1]=m.quantile(t,s/f);return a}function a(s){if(!isNaN(s=+s))return n[m.bisect(i,s)]}return a.domain=function(s){return arguments.length?(t=s.map(S).filter(T).sort(y),r()):t},a.range=function(s){return arguments.length?(n=s,r()):n},a.quantiles=function(){return i},a.invertExtent=function(s){return s=n.indexOf(s),s<0?[NaN,NaN]:[s>0?i[s-1]:t[0],s<i.length?i[s]:t[t.length-1]]},a.copy=function(){return qa(t,n)},r()}m.scale.quantize=function(){return Wa(0,1,[0,1])};function Wa(t,n,i){var r,a;function s(l){return i[Math.max(0,Math.min(a,Math.floor(r*(l-t))))]}function f(){return r=i.length/(n-t),a=i.length-1,s}return s.domain=function(l){return arguments.length?(t=+l[0],n=+l[l.length-1],f()):[t,n]},s.range=function(l){return arguments.length?(i=l,f()):i},s.invertExtent=function(l){return l=i.indexOf(l),l=l<0?NaN:l/r+t,[l,l+1/r]},s.copy=function(){return Wa(t,n,i)},f()}m.scale.threshold=function(){return Va([.5],[0,1])};function Va(t,n){function i(r){if(r<=r)return n[m.bisect(t,r)]}return i.domain=function(r){return arguments.length?(t=r,i):t},i.range=function(r){return arguments.length?(n=r,i):n},i.invertExtent=function(r){return r=n.indexOf(r),[t[r-1],t[r]]},i.copy=function(){return Va(t,n)},i}m.scale.identity=function(){return Ga([0,1])};function Ga(t){function n(i){return+i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=i.map(n),n):t},n.ticks=function(i){return pr(t,i)},n.tickFormat=function(i,r){return _r(t,i,r)},n.copy=function(){return Ga(t)},n}m.svg={};function Xl(){return 0}m.svg.arc=function(){var t=Jl,n=jl,i=Xl,r=jn,a=Ya,s=Xa,f=Kl;function l(){var d=Math.max(0,+t.apply(this,arguments)),p=Math.max(0,+n.apply(this,arguments)),g=a.apply(this,arguments)-dt,v=s.apply(this,arguments)-dt,M=Math.abs(v-g),C=g>v?0:1;if(p<d&&(x=p,p=d,d=x),M>=As)return c(p,C)+(d?c(d,1-C):"")+"Z";var x,P,w,b,L=0,E=0,N,k,A,D,B,Z,Y,W,G=[];if((b=(+f.apply(this,arguments)||0)/2)&&(w=r===jn?Math.sqrt(d*d+p*p):+r.apply(this,arguments),C||(E*=-1),p&&(E=re(w/p*Math.sin(b))),d&&(L=re(w/d*Math.sin(b)))),p){N=p*Math.cos(g+E),k=p*Math.sin(g+E),A=p*Math.cos(v-E),D=p*Math.sin(v-E);var z=Math.abs(v-g-2*E)<=tt?0:1;if(E&&Kn(N,k,A,D)===C^z){var R=(g+v)/2;N=p*Math.cos(R),k=p*Math.sin(R),A=D=null}}else N=k=0;if(d){B=d*Math.cos(v-L),Z=d*Math.sin(v-L),Y=d*Math.cos(g+L),W=d*Math.sin(g+L);var H=Math.abs(g-v+2*L)<=tt?0:1;if(L&&Kn(B,Z,Y,W)===1-C^H){var I=(g+v)/2;B=d*Math.cos(I),Z=d*Math.sin(I),Y=W=null}}else B=Z=0;if(M>X&&(x=Math.min(Math.abs(p-d)/2,+i.apply(this,arguments)))>.001){P=d<p^C?0:1;var F=x,j=x;if(M<tt){var $=Y==null?[B,Z]:A==null?[N,k]:Qi([N,k],[Y,W],[A,D],[B,Z]),et=N-$[0],rt=k-$[1],st=A-$[0],wt=D-$[1],St=1/Math.sin(Math.acos((et*st+rt*wt)/(Math.sqrt(et*et+rt*rt)*Math.sqrt(st*st+wt*wt)))/2),Pt=Math.sqrt($[0]*$[0]+$[1]*$[1]);j=Math.min(x,(d-Pt)/(St-1)),F=Math.min(x,(p-Pt)/(St+1))}if(A!=null){var Tt=$n(Y==null?[B,Z]:[Y,W],[N,k],p,F,C),xt=$n([A,D],[B,Z],p,F,C);x===F?G.push("M",Tt[0],"A",F,",",F," 0 0,",P," ",Tt[1],"A",p,",",p," 0 ",1-C^Kn(Tt[1][0],Tt[1][1],xt[1][0],xt[1][1]),",",C," ",xt[1],"A",F,",",F," 0 0,",P," ",xt[0]):G.push("M",Tt[0],"A",F,",",F," 0 1,",P," ",xt[0])}else G.push("M",N,",",k);if(Y!=null){var Dt=$n([N,k],[Y,W],d,-j,C),Le=$n([B,Z],A==null?[N,k]:[A,D],d,-j,C);x===j?G.push("L",Le[0],"A",j,",",j," 0 0,",P," ",Le[1],"A",d,",",d," 0 ",C^Kn(Le[1][0],Le[1][1],Dt[1][0],Dt[1][1]),",",1-C," ",Dt[1],"A",j,",",j," 0 0,",P," ",Dt[0]):G.push("L",Le[0],"A",j,",",j," 0 0,",P," ",Dt[0])}else G.push("L",B,",",Z)}else G.push("M",N,",",k),A!=null&&G.push("A",p,",",p," 0 ",z,",",C," ",A,",",D),G.push("L",B,",",Z),Y!=null&&G.push("A",d,",",d," 0 ",H,",",1-C," ",Y,",",W);return G.push("Z"),G.join("")}function c(d,p){return"M0,"+d+"A"+d+","+d+" 0 1,"+p+" 0,"+-d+"A"+d+","+d+" 0 1,"+p+" 0,"+d}return l.innerRadius=function(d){return arguments.length?(t=at(d),l):t},l.outerRadius=function(d){return arguments.length?(n=at(d),l):n},l.cornerRadius=function(d){return arguments.length?(i=at(d),l):i},l.padRadius=function(d){return arguments.length?(r=d==jn?jn:at(d),l):r},l.startAngle=function(d){return arguments.length?(a=at(d),l):a},l.endAngle=function(d){return arguments.length?(s=at(d),l):s},l.padAngle=function(d){return arguments.length?(f=at(d),l):f},l.centroid=function(){var d=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,p=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-dt;return[Math.cos(p)*d,Math.sin(p)*d]},l};var jn="auto";function Jl(t){return t.innerRadius}function jl(t){return t.outerRadius}function Ya(t){return t.startAngle}function Xa(t){return t.endAngle}function Kl(t){return t&&t.padAngle}function Kn(t,n,i,r){return(t-i)*n-(n-r)*t>0?0:1}function $n(t,n,i,r,a){var s=t[0]-n[0],f=t[1]-n[1],l=(a?r:-r)/Math.sqrt(s*s+f*f),c=l*f,d=-l*s,p=t[0]+c,g=t[1]+d,v=n[0]+c,M=n[1]+d,C=(p+v)/2,x=(g+M)/2,P=v-p,w=M-g,b=P*P+w*w,L=i-r,E=p*M-v*g,N=(w<0?-1:1)*Math.sqrt(Math.max(0,L*L*b-E*E)),k=(E*w-P*N)/b,A=(-E*P-w*N)/b,D=(E*w+P*N)/b,B=(-E*P+w*N)/b,Z=k-C,Y=A-x,W=D-C,G=B-x;return Z*Z+Y*Y>W*W+G*G&&(k=D,A=B),[[k-c,A-d],[k*i/L,A*i/L]]}function Ja(t){var n=Ae,i=Ye,r=We,a=Ht,s=a.key,f=.7;function l(c){var d=[],p=[],g=-1,v=c.length,M,C=at(n),x=at(i);function P(){d.push("M",a(t(p),f))}for(;++g<v;)r.call(this,M=c[g],g)?p.push([+C.call(this,M,g),+x.call(this,M,g)]):p.length&&(P(),p=[]);return p.length&&P(),d.length?d.join(""):null}return l.x=function(c){return arguments.length?(n=c,l):n},l.y=function(c){return arguments.length?(i=c,l):i},l.defined=function(c){return arguments.length?(r=c,l):r},l.interpolate=function(c){return arguments.length?(typeof c=="function"?s=a=c:s=(a=gr.get(c)||Ht).key,l):s},l.tension=function(c){return arguments.length?(f=c,l):f},l}m.svg.line=function(){return Ja(mt)};var gr=m.map({linear:Ht,"linear-closed":ja,step:$l,"step-before":mr,"step-after":vr,basis:Ka,"basis-open":nh,"basis-closed":ih,bundle:rh,cardinal:eh,"cardinal-open":Ql,"cardinal-closed":th,monotone:sh});gr.forEach(function(t,n){n.key=t,n.closed=/-closed$/.test(t)});function Ht(t){return t.length>1?t.join("L"):t+"Z"}function ja(t){return t.join("L")+"Z"}function $l(t){for(var n=0,i=t.length,r=t[0],a=[r[0],",",r[1]];++n<i;)a.push("H",(r[0]+(r=t[n])[0])/2,"V",r[1]);return i>1&&a.push("H",r[0]),a.join("")}function mr(t){for(var n=0,i=t.length,r=t[0],a=[r[0],",",r[1]];++n<i;)a.push("V",(r=t[n])[1],"H",r[0]);return a.join("")}function vr(t){for(var n=0,i=t.length,r=t[0],a=[r[0],",",r[1]];++n<i;)a.push("H",(r=t[n])[0],"V",r[1]);return a.join("")}function Ql(t,n){return t.length<4?Ht(t):t[1]+Qn(t.slice(1,-1),yr(t,n))}function th(t,n){return t.length<3?ja(t):t[0]+Qn((t.push(t[0]),t),yr([t[t.length-2]].concat(t,[t[1]]),n))}function eh(t,n){return t.length<3?Ht(t):t[0]+Qn(t,yr(t,n))}function Qn(t,n){if(n.length<1||t.length!=n.length&&t.length!=n.length+2)return Ht(t);var i=t.length!=n.length,r="",a=t[0],s=t[1],f=n[0],l=f,c=1;if(i&&(r+="Q"+(s[0]-f[0]*2/3)+","+(s[1]-f[1]*2/3)+","+s[0]+","+s[1],a=t[1],c=2),n.length>1){l=n[1],s=t[c],c++,r+="C"+(a[0]+f[0])+","+(a[1]+f[1])+","+(s[0]-l[0])+","+(s[1]-l[1])+","+s[0]+","+s[1];for(var d=2;d<n.length;d++,c++)s=t[c],l=n[d],r+="S"+(s[0]-l[0])+","+(s[1]-l[1])+","+s[0]+","+s[1]}if(i){var p=t[c];r+="Q"+(s[0]+l[0]*2/3)+","+(s[1]+l[1]*2/3)+","+p[0]+","+p[1]}return r}function yr(t,n){for(var i=[],r=(1-n)/2,a,s=t[0],f=t[1],l=1,c=t.length;++l<c;)a=s,s=f,f=t[l],i.push([r*(f[0]-a[0]),r*(f[1]-a[1])]);return i}function Ka(t){if(t.length<3)return Ht(t);var n=1,i=t.length,r=t[0],a=r[0],s=r[1],f=[a,a,a,(r=t[1])[0]],l=[s,s,s,r[1]],c=[a,",",s,"L",It(he,f),",",It(he,l)];for(t.push(t[i-1]);++n<=i;)r=t[n],f.shift(),f.push(r[0]),l.shift(),l.push(r[1]),xr(c,f,l);return t.pop(),c.push("L",r),c.join("")}function nh(t){if(t.length<4)return Ht(t);for(var n=[],i=-1,r=t.length,a,s=[0],f=[0];++i<3;)a=t[i],s.push(a[0]),f.push(a[1]);for(n.push(It(he,s)+","+It(he,f)),--i;++i<r;)a=t[i],s.shift(),s.push(a[0]),f.shift(),f.push(a[1]),xr(n,s,f);return n.join("")}function ih(t){for(var n,i=-1,r=t.length,a=r+4,s,f=[],l=[];++i<4;)s=t[i%r],f.push(s[0]),l.push(s[1]);for(n=[It(he,f),",",It(he,l)],--i;++i<a;)s=t[i%r],f.shift(),f.push(s[0]),l.shift(),l.push(s[1]),xr(n,f,l);return n.join("")}function rh(t,n){var i=t.length-1;if(i)for(var r=t[0][0],a=t[0][1],s=t[i][0]-r,f=t[i][1]-a,l=-1,c,d;++l<=i;)c=t[l],d=l/i,c[0]=n*c[0]+(1-n)*(r+d*s),c[1]=n*c[1]+(1-n)*(a+d*f);return Ka(t)}function It(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}var $a=[0,2/3,1/3,0],Qa=[0,1/3,2/3,0],he=[0,1/6,2/3,1/6];function xr(t,n,i){t.push("C",It($a,n),",",It($a,i),",",It(Qa,n),",",It(Qa,i),",",It(he,n),",",It(he,i))}function Mr(t,n){return(n[1]-t[1])/(n[0]-t[0])}function oh(t){for(var n=0,i=t.length-1,r=[],a=t[0],s=t[1],f=r[0]=Mr(a,s);++n<i;)r[n]=(f+(f=Mr(a=s,s=t[n+1])))/2;return r[n]=f,r}function ah(t){for(var n=[],i,r,a,s,f=oh(t),l=-1,c=t.length-1;++l<c;)i=Mr(t[l],t[l+1]),q(i)<X?f[l]=f[l+1]=0:(r=f[l]/i,a=f[l+1]/i,s=r*r+a*a,s>9&&(s=i*3/Math.sqrt(s),f[l]=s*r,f[l+1]=s*a));for(l=-1;++l<=c;)s=(t[Math.min(c,l+1)][0]-t[Math.max(0,l-1)][0])/(6*(1+f[l]*f[l])),n.push([s||0,f[l]*s||0]);return n}function sh(t){return t.length<3?Ht(t):t[0]+Qn(t,ah(t))}m.svg.line.radial=function(){var t=Ja(ts);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t};function ts(t){for(var n,i=-1,r=t.length,a,s;++i<r;)n=t[i],a=n[0],s=n[1]-dt,n[0]=a*Math.cos(s),n[1]=a*Math.sin(s);return t}function es(t){var n=Ae,i=Ae,r=0,a=Ye,s=We,f=Ht,l=f.key,c=f,d="L",p=.7;function g(v){var M=[],C=[],x=[],P=-1,w=v.length,b,L=at(n),E=at(r),N=n===i?function(){return A}:at(i),k=r===a?function(){return D}:at(a),A,D;function B(){M.push("M",f(t(x),p),d,c(t(C.reverse()),p),"Z")}for(;++P<w;)s.call(this,b=v[P],P)?(C.push([A=+L.call(this,b,P),D=+E.call(this,b,P)]),x.push([+N.call(this,b,P),+k.call(this,b,P)])):C.length&&(B(),C=[],x=[]);return C.length&&B(),M.length?M.join(""):null}return g.x=function(v){return arguments.length?(n=i=v,g):i},g.x0=function(v){return arguments.length?(n=v,g):n},g.x1=function(v){return arguments.length?(i=v,g):i},g.y=function(v){return arguments.length?(r=a=v,g):a},g.y0=function(v){return arguments.length?(r=v,g):r},g.y1=function(v){return arguments.length?(a=v,g):a},g.defined=function(v){return arguments.length?(s=v,g):s},g.interpolate=function(v){return arguments.length?(typeof v=="function"?l=f=v:l=(f=gr.get(v)||Ht).key,c=f.reverse||f,d=f.closed?"M":"L",g):l},g.tension=function(v){return arguments.length?(p=v,g):p},g}mr.reverse=vr,vr.reverse=mr,m.svg.area=function(){return es(mt)},m.svg.area.radial=function(){var t=es(ts);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},m.svg.chord=function(){var t=Xi,n=Ji,i=uh,r=Ya,a=Xa;function s(p,g){var v=f(this,t,p,g),M=f(this,n,p,g);return"M"+v.p0+c(v.r,v.p1,v.a1-v.a0)+(l(v,M)?d(v.r,v.p1,v.r,v.p0):d(v.r,v.p1,M.r,M.p0)+c(M.r,M.p1,M.a1-M.a0)+d(M.r,M.p1,v.r,v.p0))+"Z"}function f(p,g,v,M){var C=g.call(p,v,M),x=i.call(p,C,M),P=r.call(p,C,M)-dt,w=a.call(p,C,M)-dt;return{r:x,a0:P,a1:w,p0:[x*Math.cos(P),x*Math.sin(P)],p1:[x*Math.cos(w),x*Math.sin(w)]}}function l(p,g){return p.a0==g.a0&&p.a1==g.a1}function c(p,g,v){return"A"+p+","+p+" 0 "+ +(v>tt)+",1 "+g}function d(p,g,v,M){return"Q 0,0 "+M}return s.radius=function(p){return arguments.length?(i=at(p),s):i},s.source=function(p){return arguments.length?(t=at(p),s):t},s.target=function(p){return arguments.length?(n=at(p),s):n},s.startAngle=function(p){return arguments.length?(r=at(p),s):r},s.endAngle=function(p){return arguments.length?(a=at(p),s):a},s};function uh(t){return t.radius}m.svg.diagonal=function(){var t=Xi,n=Ji,i=ns;function r(a,s){var f=t.call(this,a,s),l=n.call(this,a,s),c=(f.y+l.y)/2,d=[f,{x:f.x,y:c},{x:l.x,y:c},l];return d=d.map(i),"M"+d[0]+"C"+d[1]+" "+d[2]+" "+d[3]}return r.source=function(a){return arguments.length?(t=at(a),r):t},r.target=function(a){return arguments.length?(n=at(a),r):n},r.projection=function(a){return arguments.length?(i=a,r):i},r};function ns(t){return[t.x,t.y]}m.svg.diagonal.radial=function(){var t=m.svg.diagonal(),n=ns,i=t.projection;return t.projection=function(r){return arguments.length?i(lh(n=r)):n},t};function lh(t){return function(){var n=t.apply(this,arguments),i=n[0],r=n[1]-dt;return[i*Math.cos(r),i*Math.sin(r)]}}m.svg.symbol=function(){var t=fh,n=hh;function i(r,a){return(rs.get(t.call(this,r,a))||is)(n.call(this,r,a))}return i.type=function(r){return arguments.length?(t=at(r),i):t},i.size=function(r){return arguments.length?(n=at(r),i):n},i};function hh(){return 64}function fh(){return"circle"}function is(t){var n=Math.sqrt(t/tt);return"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z"}var rs=m.map({circle:is,cross:function(t){var n=Math.sqrt(t/5)/2;return"M"+-3*n+","+-n+"H"+-n+"V"+-3*n+"H"+n+"V"+-n+"H"+3*n+"V"+n+"H"+n+"V"+3*n+"H"+-n+"V"+n+"H"+-3*n+"Z"},diamond:function(t){var n=Math.sqrt(t/(2*os)),i=n*os;return"M0,"+-n+"L"+i+",0 0,"+n+" "+-i+",0Z"},square:function(t){var n=Math.sqrt(t)/2;return"M"+-n+","+-n+"L"+n+","+-n+" "+n+","+n+" "+-n+","+n+"Z"},"triangle-down":function(t){var n=Math.sqrt(t/ti),i=n*ti/2;return"M0,"+i+"L"+n+","+-i+" "+-n+","+-i+"Z"},"triangle-up":function(t){var n=Math.sqrt(t/ti),i=n*ti/2;return"M0,"+-i+"L"+n+","+i+" "+-n+","+i+"Z"}});m.svg.symbolTypes=rs.keys();var ti=Math.sqrt(3),os=Math.tan(30*Q);it.transition=function(t){for(var n=we||++ss,i=Pr(t),r=[],a,s,f=ni||{time:Date.now(),ease:Hu,delay:0,duration:250},l=-1,c=this.length;++l<c;){r.push(a=[]);for(var d=this[l],p=-1,g=d.length;++p<g;)(s=d[p])&&ii(s,p,i,n,f),a.push(s)}return en(r,i,n)},it.interrupt=function(t){return this.each(t==null?ei:as(Pr(t)))};var ei=as(Pr());function as(t){return function(){var n,i,r;(n=this[t])&&(r=n[i=n.active])&&(r.timer.c=null,r.timer.t=NaN,--n.count?delete n[i]:delete this[t],n.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function en(t,n,i){return an(t,gt),t.namespace=n,t.id=i,t}var gt=[],ss=0,we,ni;gt.call=it.call,gt.empty=it.empty,gt.node=it.node,gt.size=it.size,m.transition=function(t,n){return t&&t.transition?we?t.transition(n):t:m.selection().transition(t)},m.transition.prototype=gt,gt.select=function(t){var n=this.id,i=this.namespace,r=[],a,s,f;t=gi(t);for(var l=-1,c=this.length;++l<c;){r.push(a=[]);for(var d=this[l],p=-1,g=d.length;++p<g;)(f=d[p])&&(s=t.call(f,f.__data__,p,l))?("__data__"in f&&(s.__data__=f.__data__),ii(s,p,i,n,f[i][n]),a.push(s)):a.push(null)}return en(r,i,n)},gt.selectAll=function(t){var n=this.id,i=this.namespace,r=[],a,s,f,l,c;t=Ir(t);for(var d=-1,p=this.length;++d<p;)for(var g=this[d],v=-1,M=g.length;++v<M;)if(f=g[v]){c=f[i][n],s=t.call(f,f.__data__,v,d),r.push(a=[]);for(var C=-1,x=s.length;++C<x;)(l=s[C])&&ii(l,C,i,n,c),a.push(l)}return en(r,i,n)},gt.filter=function(t){var n=[],i,r,a;typeof t!="function"&&(t=Wr(t));for(var s=0,f=this.length;s<f;s++){n.push(i=[]);for(var r=this[s],l=0,c=r.length;l<c;l++)(a=r[l])&&t.call(a,a.__data__,l,s)&&i.push(a)}return en(n,this.namespace,this.id)},gt.tween=function(t,n){var i=this.id,r=this.namespace;return arguments.length<2?this.node()[r][i].tween.get(t):Xt(this,n==null?function(a){a[r][i].tween.remove(t)}:function(a){a[r][i].tween.set(t,n)})};function wr(t,n,i,r){var a=t.id,s=t.namespace;return Xt(t,typeof i=="function"?function(f,l,c){f[s][a].tween.set(n,r(i.call(f,f.__data__,l,c)))}:(i=r(i),function(f){f[s][a].tween.set(n,i)}))}gt.attr=function(t,n){if(arguments.length<2){for(n in t)this.attr(n,t[n]);return this}var i=t=="transform"?wa:Me,r=m.ns.qualify(t);function a(){this.removeAttribute(r)}function s(){this.removeAttributeNS(r.space,r.local)}function f(c){return c==null?a:(c+="",function(){var d=this.getAttribute(r),p;return d!==c&&(p=i(d,c),function(g){this.setAttribute(r,p(g))})})}function l(c){return c==null?s:(c+="",function(){var d=this.getAttributeNS(r.space,r.local),p;return d!==c&&(p=i(d,c),function(g){this.setAttributeNS(r.space,r.local,p(g))})})}return wr(this,"attr."+t,n,r.local?l:f)},gt.attrTween=function(t,n){var i=m.ns.qualify(t);function r(s,f){var l=n.call(this,s,f,this.getAttribute(i));return l&&function(c){this.setAttribute(i,l(c))}}function a(s,f){var l=n.call(this,s,f,this.getAttributeNS(i.space,i.local));return l&&function(c){this.setAttributeNS(i.space,i.local,l(c))}}return this.tween("attr."+t,i.local?a:r)},gt.style=function(t,n,i){var r=arguments.length;if(r<3){if(typeof t!="string"){r<2&&(n="");for(i in t)this.style(i,t[i],n);return this}i=""}function a(){this.style.removeProperty(t)}function s(f){return f==null?a:(f+="",function(){var l=ct(this).getComputedStyle(this,null).getPropertyValue(t),c;return l!==f&&(c=Me(l,f),function(d){this.style.setProperty(t,c(d),i)})})}return wr(this,"style."+t,n,s)},gt.styleTween=function(t,n,i){arguments.length<3&&(i="");function r(a,s){var f=n.call(this,a,s,ct(this).getComputedStyle(this,null).getPropertyValue(t));return f&&function(l){this.style.setProperty(t,f(l),i)}}return this.tween("style."+t,r)},gt.text=function(t){return wr(this,"text",t,ch)};function ch(t){return t==null&&(t=""),function(){this.textContent=t}}gt.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var n;this[t].count<2&&(n=this.parentNode)&&n.removeChild(this)})},gt.ease=function(t){var n=this.id,i=this.namespace;return arguments.length<1?this.node()[i][n].ease:(typeof t!="function"&&(t=m.ease.apply(m,arguments)),Xt(this,function(r){r[i][n].ease=t}))},gt.delay=function(t){var n=this.id,i=this.namespace;return arguments.length<1?this.node()[i][n].delay:Xt(this,typeof t=="function"?function(r,a,s){r[i][n].delay=+t.call(r,r.__data__,a,s)}:(t=+t,function(r){r[i][n].delay=t}))},gt.duration=function(t){var n=this.id,i=this.namespace;return arguments.length<1?this.node()[i][n].duration:Xt(this,typeof t=="function"?function(r,a,s){r[i][n].duration=Math.max(1,t.call(r,r.__data__,a,s))}:(t=Math.max(1,t),function(r){r[i][n].duration=t}))},gt.each=function(t,n){var i=this.id,r=this.namespace;if(arguments.length<2){var a=ni,s=we;try{we=i,Xt(this,function(f,l,c){ni=f[r][i],t.call(f,f.__data__,l,c)})}finally{ni=a,we=s}}else Xt(this,function(f){var l=f[r][i];(l.event||(l.event=m.dispatch("start","end","interrupt"))).on(t,n)});return this},gt.transition=function(){for(var t=this.id,n=++ss,i=this.namespace,r=[],a,s,f,l,c=0,d=this.length;c<d;c++){r.push(a=[]);for(var s=this[c],p=0,g=s.length;p<g;p++)(f=s[p])&&(l=f[i][t],ii(f,p,i,n,{time:l.time,ease:l.ease,delay:l.delay+l.duration,duration:l.duration})),a.push(f)}return en(r,i,n)};function Pr(t){return t==null?"__transition__":"__transition_"+t+"__"}function ii(t,n,i,r,a){var s=t[i]||(t[i]={active:0,count:0}),f=s[r],l,c,d,p,g;function v(x){var P=f.delay;if(c.t=P+l,P<=x)return M(x-P);c.c=M}function M(x){var P=s.active,w=s[P];w&&(w.timer.c=null,w.timer.t=NaN,--s.count,delete s[P],w.event&&w.event.interrupt.call(t,t.__data__,w.index));for(var b in s)if(+b<r){var L=s[b];L.timer.c=null,L.timer.t=NaN,--s.count,delete s[b]}c.c=C,xn(function(){return c.c&&C(x||1)&&(c.c=null,c.t=NaN),1},0,l),s.active=r,f.event&&f.event.start.call(t,t.__data__,n),g=[],f.tween.forEach(function(E,N){(N=N.call(t,t.__data__,n))&&g.push(N)}),p=f.ease,d=f.duration}function C(x){for(var P=x/d,w=p(P),b=g.length;b>0;)g[--b].call(t,w);if(P>=1)return f.event&&f.event.end.call(t,t.__data__,n),--s.count?delete s[r]:delete t[i],1}f||(l=a.time,c=xn(v,0,l),f=s[r]={tween:new ut,time:l,timer:c,delay:a.delay,duration:a.duration,ease:a.ease,index:n},a=null,++s.count)}m.svg.axis=function(){var t=m.scale.linear(),n=us,i=6,r=6,a=3,s=[10],f=null,l;function c(d){d.each(function(){var p=m.select(this),g=this.__chart__||t,v=this.__chart__=t.copy(),M=f??(v.ticks?v.ticks.apply(v,s):v.domain()),C=l??(v.tickFormat?v.tickFormat.apply(v,s):mt),x=p.selectAll(".tick").data(M,v),P=x.enter().insert("g",".domain").attr("class","tick").style("opacity",X),w=m.transition(x.exit()).style("opacity",X).remove(),b=m.transition(x.order()).style("opacity",1),L=Math.max(i,0)+a,E,N=Gn(v),k=p.selectAll(".domain").data([0]),A=(k.enter().append("path").attr("class","domain"),m.transition(k));P.append("line"),P.append("text");var D=P.select("line"),B=b.select("line"),Z=x.select("text").text(C),Y=P.select("text"),W=b.select("text"),G=n==="top"||n==="left"?-1:1,z,R,H,I;if(n==="bottom"||n==="top"?(E=ph,z="x",H="y",R="x2",I="y2",Z.attr("dy",G<0?"0em":".71em").style("text-anchor","middle"),A.attr("d","M"+N[0]+","+G*r+"V0H"+N[1]+"V"+G*r)):(E=_h,z="y",H="x",R="y2",I="x2",Z.attr("dy",".32em").style("text-anchor",G<0?"end":"start"),A.attr("d","M"+G*r+","+N[0]+"H0V"+N[1]+"H"+G*r)),D.attr(I,G*i),Y.attr(H,G*L),B.attr(R,0).attr(I,G*i),W.attr(z,0).attr(H,G*L),v.rangeBand){var F=v,j=F.rangeBand()/2;g=v=function($){return F($)+j}}else g.rangeBand?g=v:w.call(E,v,g);P.call(E,g,v),b.call(E,v,v)})}return c.scale=function(d){return arguments.length?(t=d,c):t},c.orient=function(d){return arguments.length?(n=d in dh?d+"":us,c):n},c.ticks=function(){return arguments.length?(s=nt(arguments),c):s},c.tickValues=function(d){return arguments.length?(f=d,c):f},c.tickFormat=function(d){return arguments.length?(l=d,c):l},c.tickSize=function(d){var p=arguments.length;return p?(i=+d,r=+arguments[p-1],c):i},c.innerTickSize=function(d){return arguments.length?(i=+d,c):i},c.outerTickSize=function(d){return arguments.length?(r=+d,c):r},c.tickPadding=function(d){return arguments.length?(a=+d,c):a},c.tickSubdivide=function(){return arguments.length&&c},c};var us="bottom",dh={top:1,right:1,bottom:1,left:1};function ph(t,n,i){t.attr("transform",function(r){var a=n(r);return"translate("+(isFinite(a)?a:i(r))+",0)"})}function _h(t,n,i){t.attr("transform",function(r){var a=n(r);return"translate(0,"+(isFinite(a)?a:i(r))+")"})}m.svg.brush=function(){var t=di(p,"brushstart","brush","brushend"),n=null,i=null,r=[0,0],a=[0,0],s,f,l=!0,c=!0,d=Lr[0];function p(x){x.each(function(){var P=m.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",C).on("touchstart.brush",C),w=P.selectAll(".background").data([0]);w.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),P.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var b=P.selectAll(".resize").data(d,mt);b.exit().remove(),b.enter().append("g").attr("class",function(k){return"resize "+k}).style("cursor",function(k){return gh[k]}).append("rect").attr("x",function(k){return/[ew]$/.test(k)?-3:null}).attr("y",function(k){return/^[ns]/.test(k)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),b.style("display",p.empty()?"none":null);var L=m.transition(P),E=m.transition(w),N;n&&(N=Gn(n),E.attr("x",N[0]).attr("width",N[1]-N[0]),v(L)),i&&(N=Gn(i),E.attr("y",N[0]).attr("height",N[1]-N[0]),M(L)),g(L)})}p.event=function(x){x.each(function(){var P=t.of(this,arguments),w={x:r,y:a,i:s,j:f},b=this.__chart__||w;this.__chart__=w,we?m.select(this).transition().each("start.brush",function(){s=b.i,f=b.j,r=b.x,a=b.y,P({type:"brushstart"})}).tween("brush:brush",function(){var L=Vn(r,w.x),E=Vn(a,w.y);return s=f=null,function(N){r=w.x=L(N),a=w.y=E(N),P({type:"brush",mode:"resize"})}}).each("end.brush",function(){s=w.i,f=w.j,P({type:"brush",mode:"resize"}),P({type:"brushend"})}):(P({type:"brushstart"}),P({type:"brush",mode:"resize"}),P({type:"brushend"}))})};function g(x){x.selectAll(".resize").attr("transform",function(P){return"translate("+r[+/e$/.test(P)]+","+a[+/^s/.test(P)]+")"})}function v(x){x.select(".extent").attr("x",r[0]),x.selectAll(".extent,.n>rect,.s>rect").attr("width",r[1]-r[0])}function M(x){x.select(".extent").attr("y",a[0]),x.selectAll(".extent,.e>rect,.w>rect").attr("height",a[1]-a[0])}function C(){var x=this,P=m.select(m.event.target),w=t.of(x,arguments),b=m.select(x),L=P.datum(),E=!/^(n|s)$/.test(L)&&n,N=!/^(e|w)$/.test(L)&&i,k=P.classed("extent"),A=un(x),D,B=m.mouse(x),Z,Y=m.select(ct(x)).on("keydown.brush",z).on("keyup.brush",R);if(m.event.changedTouches?Y.on("touchmove.brush",H).on("touchend.brush",F):Y.on("mousemove.brush",H).on("mouseup.brush",F),b.interrupt().selectAll("*").interrupt(),k)B[0]=r[0]-B[0],B[1]=a[0]-B[1];else if(L){var W=+/w$/.test(L),G=+/^n/.test(L);Z=[r[1-W]-B[0],a[1-G]-B[1]],B[0]=r[W],B[1]=a[G]}else m.event.altKey&&(D=B.slice());b.style("pointer-events","none").selectAll(".resize").style("display",null),m.select("body").style("cursor",P.style("cursor")),w({type:"brushstart"}),H();function z(){m.event.keyCode==32&&(k||(D=null,B[0]-=r[1],B[1]-=a[1],k=2),ne())}function R(){m.event.keyCode==32&&k==2&&(B[0]+=r[1],B[1]+=a[1],k=0,ne())}function H(){var j=m.mouse(x),$=!1;Z&&(j[0]+=Z[0],j[1]+=Z[1]),k||(m.event.altKey?(D||(D=[(r[0]+r[1])/2,(a[0]+a[1])/2]),B[0]=r[+(j[0]<D[0])],B[1]=a[+(j[1]<D[1])]):D=null),E&&I(j,n,0)&&(v(b),$=!0),N&&I(j,i,1)&&(M(b),$=!0),$&&(g(b),w({type:"brush",mode:k?"move":"resize"}))}function I(j,$,et){var rt=Gn($),st=rt[0],wt=rt[1],St=B[et],Pt=et?a:r,Tt=Pt[1]-Pt[0],xt,Dt;if(k&&(st-=St,wt-=Tt+St),xt=(et?c:l)?Math.max(st,Math.min(wt,j[et])):j[et],k?Dt=(xt+=St)+Tt:(D&&(St=Math.max(st,Math.min(wt,2*D[et]-xt))),St<xt?(Dt=xt,xt=St):Dt=St),Pt[0]!=xt||Pt[1]!=Dt)return et?f=null:s=null,Pt[0]=xt,Pt[1]=Dt,!0}function F(){H(),b.style("pointer-events","all").selectAll(".resize").style("display",p.empty()?"none":null),m.select("body").style("cursor",null),Y.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),A(),w({type:"brushend"})}}return p.x=function(x){return arguments.length?(n=x,d=Lr[!n<<1|!i],p):n},p.y=function(x){return arguments.length?(i=x,d=Lr[!n<<1|!i],p):i},p.clamp=function(x){return arguments.length?(n&&i?(l=!!x[0],c=!!x[1]):n?l=!!x:i&&(c=!!x),p):n&&i?[l,c]:n?l:i?c:null},p.extent=function(x){var P,w,b,L,E;return arguments.length?(n&&(P=x[0],w=x[1],i&&(P=P[0],w=w[0]),s=[P,w],n.invert&&(P=n(P),w=n(w)),w<P&&(E=P,P=w,w=E),(P!=r[0]||w!=r[1])&&(r=[P,w])),i&&(b=x[0],L=x[1],n&&(b=b[1],L=L[1]),f=[b,L],i.invert&&(b=i(b),L=i(L)),L<b&&(E=b,b=L,L=E),(b!=a[0]||L!=a[1])&&(a=[b,L])),p):(n&&(s?(P=s[0],w=s[1]):(P=r[0],w=r[1],n.invert&&(P=n.invert(P),w=n.invert(w)),w<P&&(E=P,P=w,w=E))),i&&(f?(b=f[0],L=f[1]):(b=a[0],L=a[1],i.invert&&(b=i.invert(b),L=i.invert(L)),L<b&&(E=b,b=L,L=E))),n&&i?[[P,b],[w,L]]:n?[P,w]:i&&[b,L])},p.clear=function(){return p.empty()||(r=[0,0],a=[0,0],s=f=null),p},p.empty=function(){return!!n&&r[0]==r[1]||!!i&&a[0]==a[1]},m.rebind(p,t,"on")};var gh={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Lr=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Er=K.format=vo.timeFormat,ls=Er.utc,hs=ls("%Y-%m-%dT%H:%M:%S.%LZ");Er.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Sr:hs;function Sr(t){return t.toISOString()}Sr.parse=function(t){var n=new Date(t);return isNaN(n)?null:n},Sr.toString=hs.toString,K.second=pe(function(t){return new yt(Math.floor(t/1e3)*1e3)},function(t,n){t.setTime(t.getTime()+Math.floor(n)*1e3)},function(t){return t.getSeconds()}),K.seconds=K.second.range,K.seconds.utc=K.second.utc.range,K.minute=pe(function(t){return new yt(Math.floor(t/6e4)*6e4)},function(t,n){t.setTime(t.getTime()+Math.floor(n)*6e4)},function(t){return t.getMinutes()}),K.minutes=K.minute.range,K.minutes.utc=K.minute.utc.range,K.hour=pe(function(t){var n=t.getTimezoneOffset()/60;return new yt((Math.floor(t/36e5-n)+n)*36e5)},function(t,n){t.setTime(t.getTime()+Math.floor(n)*36e5)},function(t){return t.getHours()}),K.hours=K.hour.range,K.hours.utc=K.hour.utc.range,K.month=pe(function(t){return t=K.day(t),t.setDate(1),t},function(t,n){t.setMonth(t.getMonth()+n)},function(t){return t.getMonth()}),K.months=K.month.range,K.months.utc=K.month.utc.range;function br(t,n,i){function r(s){return t(s)}r.invert=function(s){return Pe(t.invert(s))},r.domain=function(s){return arguments.length?(t.domain(s),r):t.domain().map(Pe)};function a(s,f){var l=s[1]-s[0],c=l/f,d=m.bisect(ri,c);return d==ri.length?[n.year,Oe(s.map(function(p){return p/31536e6}),f)[2]]:d?n[c/ri[d-1]<ri[d]/c?d-1:d]:[vh,Oe(s,f)[2]]}return r.nice=function(s,f){var l=r.domain(),c=Re(l),d=s==null?a(c,10):typeof s=="number"&&a(c,s);d&&(s=d[0],f=d[1]);function p(g){return!isNaN(g)&&!s.range(g,Pe(+g+1),f).length}return r.domain(Yn(l,f>1?{floor:function(g){for(;p(g=s.floor(g));)g=Pe(g-1);return g},ceil:function(g){for(;p(g=s.ceil(g));)g=Pe(+g+1);return g}}:s))},r.ticks=function(s,f){var l=Re(r.domain()),c=s==null?a(l,10):typeof s=="number"?a(l,s):!s.range&&[{range:s},f];return c&&(s=c[0],f=c[1]),s.range(l[0],Pe(+l[1]+1),f<1?1:f)},r.tickFormat=function(){return i},r.copy=function(){return br(t.copy(),n,i)},dr(r,t)}function Pe(t){return new Date(t)}var ri=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Cr=[[K.second,1],[K.second,5],[K.second,15],[K.second,30],[K.minute,1],[K.minute,5],[K.minute,15],[K.minute,30],[K.hour,1],[K.hour,3],[K.hour,6],[K.hour,12],[K.day,1],[K.day,2],[K.week,1],[K.month,1],[K.month,3],[K.year,1]],mh=Er.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&t.getDate()!=1}],["%b %d",function(t){return t.getDate()!=1}],["%B",function(t){return t.getMonth()}],["%Y",We]]),vh={range:function(t,n,i){return m.range(Math.ceil(t/i)*i,+n,i).map(Pe)},floor:mt,ceil:mt};Cr.year=K.year,K.scale=function(){return br(m.scale.linear(),Cr,mh)};var fs=Cr.map(function(t){return[t[0].utc,t[1]]}),yh=ls.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&t.getUTCDate()!=1}],["%b %d",function(t){return t.getUTCDate()!=1}],["%B",function(t){return t.getUTCMonth()}],["%Y",We]]);fs.year=K.year.utc,K.scale.utc=function(){return br(m.scale.linear(),fs,yh)},m.text=Ii(function(t){return t.responseText}),m.json=function(t,n){return _n(t,"application/json",xh,n)};function xh(t){return JSON.parse(t.responseText)}m.html=function(t,n){return _n(t,"text/html",Mh,n)};function Mh(t){var n=lt.createRange();return n.selectNode(lt.body),n.createContextualFragment(t.responseText)}m.xml=Ii(function(t){return t.responseXML}),typeof define=="function"&&define.amd?(this.d3=m,define(m)):typeof si=="object"&&si.exports?si.exports=m:this.d3=m})()});var nn=ps(_s()),ui=ps(gs());var te=nn.default.map("map").setView([52.505,13.41],11);nn.default.tileLayer("http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',maxZoom:18}).addTo(te);var ms,vs,Se,rn,ys;function Dh(){Se=ui.select(te.getPanes().overlayPane).append("svg").attr("id","overlay").attr("class","leaflet-zoom-hide"),rn=Se.append("g").classed("paths",!0).selectAll("path"),ys=Se.append("g").classed("points",!0).selectAll("circle")}var kh={onAdd:function(m){m.on("viewreset moveend",ws),Dh(),Ms(),ws()}};vs=ui.geom.voronoi().x(function(m){return m.x}).y(function(m){return m.y});function xs(m){if(m)return"M"+m.join("L")+"Z"}function Ms(){let m=te.getBounds(),J=te.latLngToLayerPoint(m.getNorthWest());return Se.style("width",te.getSize().x+"px").style("height",te.getSize().y+"px").style("margin-left",J.x+"px").style("margin-top",J.y+"px"),Se.selectAll("g").attr("transform","translate("+-J.x+","+-J.y+")"),Se}function ws(){Ms();let J=te.getBounds().pad(.4),lt=ms.filter(function(ct){let Nt=new nn.default.LatLng(ct.lat,ct.lon);return J.contains(Nt)}).map(function(ct){let Nt=new nn.default.LatLng(ct.lat,ct.lon);return te.latLngToLayerPoint(Nt)});Se.selectAll(".points circle").remove(),ys.data(lt).enter().append("circle").attr("transform",function(ct){return"translate("+ct.x+","+ct.y+")"}).attr("r",2),rn=rn.data(vs(lt),xs),rn.exit().remove(),rn.enter().append("path").attr("class","part").attr("d",xs)}fetch("https://overpass-api.de/api/interpreter",{method:"POST",body:"[out:json];area[name='Berlin'];node(area)[man_made=water_well];out;"}).then(m=>m.json()).then(function(m){ms=m.elements,te.addLayer(kh)});})();
